(this.webpackJsonpgamehub=this.webpackJsonpgamehub||[]).push([[0],{228:function(e,t,n){e.exports=n(445)},233:function(e,t,n){},273:function(e,t){},445:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(3),o=n(6),i=n(7),c=n(8),s=n(0),l=n.n(s),u=n(20),A=n.n(u),p=(n(233),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function m(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var g=n(48),E=n(57),f=n(503),h=n(477),d=n(71),b=Object(s.createContext)(),C=n(201),B=n(202),O=n.n(B),v=n(12),j=n(61),I=n(101),Q=Object(I.a)({palette:{type:"dark"}}),w=n(490),y=n(11),k=n(4),N=n(502),S=n(481),T=n(479),_=n(76),R=n(478),M=n(218),x=n.n(M),G=function(e){var t=e.label,n=e.to,a=e.component;return l.a.createElement(E.a,{path:n,exact:!0,children:function(e){var r=e.match;return l.a.createElement(a||R.a,{to:n,disabled:Boolean(r),component:g.b,children:t})}})},P=n(18),L=n.n(P),D=n(504),U=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).setSizeForce=function(){var e=n.getSize();n.setSize(e),setTimeout((function(){var e=n.getSize();n.setSize(e)}),200)},n.listener=function(){n.getting||clearTimeout(n.timer),n.getting=!1,n.timer=setTimeout((function(){n.getting=!0;var e=n.getSize();n.setSize(e)}),250)},n.setType1=function(e){var t=n.props.k,a=e-n.spacing;return{width:a,height:a*t}},n.setType2=function(e){var t=n.props.k,a=e-n.spacing;return{width:a/t,height:a}},n.getSize=function(){if(!n.ref.current)return!1;var e,t=n.ref.current.parentElement,a=t.offsetWidth,r=t.offsetHeight;return a<r?(e=n.setType1(a)).height>r&&(e=n.setType2(r)):a>r&&(e=n.setType2(r)).width>a&&(e=n.setType1(a)),e},n.setSize=function(e){if(!e)return!1;var t=e.width,a=e.height;n.setState((function(){return{width:t,height:a}}))},n.updateChildren=function(){var e=n.props.children,t=n.state,a=t.width,r=t.height;return Object(s.cloneElement)(e,{resizer:{width:a,height:r}})},n.ref=Object(s.createRef)(),n.getting=!0,n.spacing=e.theme.spacing(2),n.state={width:"100%",height:"100%"},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setSizeForce(),window.addEventListener("resize",this.listener,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.listener,!1)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=this.state,r=a.width,o=a.height;return l.a.createElement(D.a,{className:L()(t.resizer,n),ref:this.ref,style:{width:"".concat(r,"px"),height:"".concat(o,"px")}},this.updateChildren())}}]),t}(s.PureComponent),Y=Object(y.a)((function(){return{resizer:{position:"absolute",minWidth:50,minHeight:50,transition:"all 0.3s ease 0s"}}}),{withTheme:!0})(U),H=n(2),z=n(146),W=n(507),K=n(480),F=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleSubmit=function(e){var t=n.props.onSubmit;e.preventDefault(),t(e)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onChange,a=e.placeholder,r=e.value,o=e.className,i=Object(H.a)(e,["classes","onChange","placeholder","value","className"]);return l.a.createElement(z.a,Object.assign({className:L()(t.root,o),square:!0},i),l.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},l.a.createElement(W.a,{className:t.input,placeholder:a,value:r,onChange:n,autoFocus:!0}),l.a.createElement(T.a,{className:t.iconButton,onClick:this.handleSubmit},l.a.createElement(K.a,null))))}}]),t}(s.PureComponent),J=Object(y.a)((function(e){return{root:{position:"relative"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{},form:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"}}}))(F);function V(e){return{type:"SET_APP",payload:e}}var q,$,X,Z,ee,te,ne,ae,re=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setApp)({header:e.header})}},{key:"componentWillUnmount",value:function(){(0,this.props.setApp)({header:null})}},{key:"render",value:function(){return this.props.component}}]),t}(s.PureComponent),oe=Object(v.b)(null,(function(e){return{setApp:function(t){return e(V(t))}}}))(re),ie=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.children,r=Object(H.a)(e,["classes","className","children"]);return l.a.createElement(S.a,Object.assign({className:L()(t.toolbar,n)},r),a)}}]),t}(s.PureComponent),ce=Object(y.a)((function(e){return{toolbar:{paddingTop:0,paddingBottom:0,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),minHeight:"auto"}}}))(ie),se=n(482),le=n(483),ue=n(484),Ae=n(485),pe=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.onClose,r=e.title,o=void 0===r?"Game results":r;return n&&n.length?l.a.createElement(Oe,{open:!0,title:o,isCancel:!0,onClose:a},l.a.createElement(se.a,{className:t.table},l.a.createElement(le.a,null,n.map((function(e,n){var a=e.label,r=e.value;return l.a.createElement(ue.a,{key:n,className:t.row},l.a.createElement(Ae.a,null,a,": "),l.a.createElement(Ae.a,{align:"right"},r))}))))):null}}]),t}(s.PureComponent),me=Object(y.a)((function(){return{table:{},row:{"&:only-child":{"& > *":{border:"none"}}}}}))(pe),ge=n(207),Ee=n.n(ge),fe=n(505),he=n(486),de=n(487),be=n(488),Ce=Object(y.a)((function(){return{paper:{width:"100%"}}}))(fe.a),Be=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleClose=function(){(0,n.props.onClose)()},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,a=e.title,r=e.isCancel,o=e.buttons,i=e.children;return l.a.createElement(Ce,{open:n,onClose:this.handleClose,maxWidth:"xs"},l.a.createElement(he.a,{disableTypography:!0,className:t.title},l.a.createElement(_.a,{variant:"h6",className:t.titleLabel},a),r?l.a.createElement(T.a,{onClick:this.handleClose},l.a.createElement(Ee.a,null)):null),l.a.createElement(de.a,{dividers:!0,className:t.content},i),l.a.createElement(be.a,{className:t.actions},o?o.map((function(e,t){var n=e.label,a=Object(H.a)(e,["label"]);return l.a.createElement(R.a,Object.assign({key:t},a),n)})):null,r?l.a.createElement(R.a,{variant:"contained",onClick:this.handleClose,color:"secondary"},"Cancel"):null))}}]),t}(s.PureComponent),Oe=Object(y.a)((function(e){return{title:{display:"flex",alignItems:"center",padding:e.spacing(2)},titleLabel:{flexGrow:1},content:{padding:e.spacing(2)},actions:{padding:e.spacing(2)}}}))(Be),ve=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.isBack,r=void 0===a||a,o=e.isNext,i=void 0===o||o,c=e.onBack,s=e.onNext,u=Object(H.a)(e,["classes","className","isBack","isNext","onBack","onNext"]);return l.a.createElement(D.a,Object.assign({className:L()(t.stepper,n)},u),r?l.a.createElement(R.a,{variant:"contained",onClick:c,className:t.button},"Back"):null,i?l.a.createElement(R.a,{variant:"contained",onClick:s,className:t.button},"Next"):null)}}]),t}(s.PureComponent),je=Object(y.a)((function(e){return{stepper:{marginTop:e.spacing(3),width:250},button:{margin:e.spacing(1)}}}))(ve),Ie=n(489),Qe=n(491),we=n(492),ye=n(493),ke=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){this.props.classes;return l.a.createElement(Ie.a,null,l.a.createElement(w.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:1},Br.map((function(e){var t=e.label,n=e.link,a=e.description,r=Object(s.forwardRef)((function(e,r){return l.a.createElement(G,Object.assign({to:n,label:l.a.createElement(Qe.a,null,l.a.createElement(_.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),l.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},a))},e))}));return l.a.createElement(w.a,{key:n,item:!0,zeroMinWidth:!0,xs:6,md:4,lg:3},l.a.createElement(ye.a,null,l.a.createElement(r,{component:function(e){return l.a.createElement(we.a,e)}})))}))))}}]),t}(s.PureComponent),Ne=n(43),Se=[0,4],Te="MOVE_DIRECTION_LEFT",_e="MOVE_DIRECTION_RIGHT",Re="MOVE_DIRECTION_UP",Me="MOVE_DIRECTION_DOWN",xe=[Re,_e,Me,Te],Ge=(q={},Object(k.a)(q,Me,(function(e){var t=Object(Ne.a)(e,2);return[t[0]+1,t[1]]})),Object(k.a)(q,Te,(function(e){var t=Object(Ne.a)(e,2);return[t[0],t[1]-1]})),Object(k.a)(q,_e,(function(e){var t=Object(Ne.a)(e,2);return[t[0],t[1]+1]})),q),Pe="ArrowLeft",Le="ArrowRight",De="ArrowUp",Ue="ArrowDown",Ye="Space",He={T:($={},Object(k.a)($,Re,[[0,1,0],[1,1,1]]),Object(k.a)($,Me,[[1,1,1],[0,1,0]]),Object(k.a)($,Te,[[0,1],[1,1],[0,1]]),Object(k.a)($,_e,[[1,0],[1,1],[1,0]]),$),Z:(X={},Object(k.a)(X,Re,[[0,1],[1,1],[1,0]]),Object(k.a)(X,Me,[[0,1],[1,1],[1,0]]),Object(k.a)(X,Te,[[1,1,0],[0,1,1]]),Object(k.a)(X,_e,[[1,1,0],[0,1,1]]),X),S:(Z={},Object(k.a)(Z,Re,[[1,0],[1,1],[0,1]]),Object(k.a)(Z,Me,[[1,0],[1,1],[0,1]]),Object(k.a)(Z,Te,[[0,1,1],[1,1,0]]),Object(k.a)(Z,_e,[[0,1,1],[1,1,0]]),Z),Q:(ee={},Object(k.a)(ee,Re,[[1,1],[1,1]]),Object(k.a)(ee,Me,[[1,1],[1,1]]),Object(k.a)(ee,Te,[[1,1],[1,1]]),Object(k.a)(ee,_e,[[1,1],[1,1]]),ee),J:(te={},Object(k.a)(te,Re,[[1,1],[1,0],[1,0]]),Object(k.a)(te,Me,[[0,1],[0,1],[1,1]]),Object(k.a)(te,Te,[[1,0,0],[1,1,1]]),Object(k.a)(te,_e,[[1,1,1],[0,0,1]]),te),L:(ne={},Object(k.a)(ne,Re,[[1,1],[0,1],[0,1]]),Object(k.a)(ne,Me,[[1,0],[1,0],[1,1]]),Object(k.a)(ne,Te,[[1,1,1],[1,0,0]]),Object(k.a)(ne,_e,[[0,0,1],[1,1,1]]),ne),I:(ae={},Object(k.a)(ae,Re,[[1],[1],[1],[1]]),Object(k.a)(ae,Me,[[1],[1],[1],[1]]),Object(k.a)(ae,Te,[[1,1,1,1]]),Object(k.a)(ae,_e,[[1,1,1,1]]),ae)};function ze(){return function(e){e({type:"START_NEW_GAME"}),e(We())}}function We(){return{type:"START_MOVING"}}function Ke(e){return{type:"UPDATE_CONFIG",payload:{config:e}}}var Fe=n(24),Je=n(62);function Ve(e,t){return Array.from({length:t},(function(){return Array.from({length:e},(function(){return 0}))}))}function qe(e,t,n){var a=Object(Ne.a)(t,2),r=a[0],o=a[1],i=Object(Je.cloneDeep)(n);return i.map((function(t,n){return n===r&&e.forEach((function(e,t){var a;(a=i[n+t]).splice.apply(a,[o,e.length].concat(Object(Fe.a)(e))).forEach((function(e,a){0!==e&&(i[n+t][o+a]=1)}))})),t.map((function(e){return e}))}))}function $e(){var e=Math.ceil(Math.random()*(xe.length-1));return xe[e]}function Xe(){var e=Object.keys(He),t=Math.floor(Math.random()*e.length);return He[e[t]]}function Ze(e){var t=xe.length,n=xe.indexOf(e);return 0===n?xe[t-1]:xe[n-1]}function et(e){var t=xe.length,n=xe.indexOf(e);return n===t-1?xe[0]:xe[n+1]}function tt(e,t){return!e.find((function(e,n){return e.find((function(e,a){return e===t[n][a]&&1===e}))}))}function nt(e){return e.reduce((function(e,t,n){return 10===t.reduce((function(e,t){return e+t}))&&e.push(n),e}),[])}function at(e,t){var n=Array.from({length:10},(function(){return 0})),a=Object(Je.cloneDeep)(e);return t.forEach((function(e,t,r){var o=a.slice(0,e),i=a.slice(r[t]+1,a.length);a=[n].concat(Object(Fe.a)(o),Object(Fe.a)(i))})),a}function rt(e,t){return qe(e,t,Ve(10,24))}function ot(e,t){for(var n=1;n<t;n++)e>=1*n&&e<1*n+1&&t!==250-10*n&&(t-=10);return t}function it(e){var t={inner:!1,outer:!1},n=null,a=function(a,r){a in e&&function(e,a,r){if(t.inner)return!1;var o=a===De||a===Ue?150:75;t.inner=!0,t.outer||e(),n="interval"===r?setInterval((function(){e(),t.inner=!1}),o):setTimeout((function(){e(),t.inner=!1}),o)}(e[a],a,r),t.outer||(t.outer=!0)},r=function(){t.inner=!1,t.outer=!1};return{onPressDown:function(e){a(e,"timeout")},onPressUp:function(t){t in e&&(clearTimeout(n),r())},onTouchDown:function(e){a(e,"interval")},onTouchUp:function(t){t in e&&(clearInterval(n),r())}}}var ct=function(e){function t(e){var n,r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleKeyPressDown=function(e){var t=e.code;r.pressingFunc.onPressDown(t)},r.handleKeyPressUp=function(e){var t=e.code;r.pressingFunc.onPressUp(t)},r.key_map=(n={},Object(k.a)(n,De,(function(){return e.rotateFigure(Ze)})),Object(k.a)(n,Ue,(function(){return e.rotateFigure(et)})),Object(k.a)(n,Pe,(function(){return e.moveFigure(Te)})),Object(k.a)(n,Le,(function(){return e.moveFigure(_e)})),Object(k.a)(n,Ye,(function(){return e.moveFigureDown()})),n),r.pressingFunc=it(r.key_map),r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.storeActionData)(e.moveFigureDown,this.key_map),document.addEventListener("keydown",this.handleKeyPressDown),document.addEventListener("keyup",this.handleKeyPressUp)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPressDown),document.removeEventListener("keyup",this.handleKeyPressUp)}},{key:"render",value:function(){return null}}]),t}(s.PureComponent),st=Object(v.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.key_map;return{key_map:!a&&n?r:{}}}),(function(e){return{moveFigure:function(t){e(function(e){return{type:"MOVE_FIGURE",payload:{direction:e}}}(t))},moveFigureDown:function(){e({type:"MOVE_FIGURE_DOWN"})},rotateFigure:function(t){e(function(e){return{type:"ROTATE_FIGURE",payload:{getRotation:e}}}(t))},storeActionData:function(t,n){e(function(e,t){return{type:"STORE_ACTION_DATA",payload:{moveFunc:e,key_map:t}}}(t,n))}}}))(ct),lt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.results,n=e.closeResults;return l.a.createElement(s.Fragment,null,l.a.createElement(Yn,{isOpponent:!1}),t?l.a.createElement(me,{data:t,onClose:n}):null)}}]),t}(s.PureComponent),ut=Object(v.b)((function(e){var t=e.tetris,n=t.isResultModalOpen,a=t.score;return{results:n?[{label:"Your score",value:a}]:null}}),(function(e){return{closeResults:function(){e({type:"CLOSE_RESULTS"})}}}))(lt),At=n(14),pt=50,mt=60,gt={type:"COMMON_ACTIONS",meta:{remote:"META_SOCKET_EMIT"}};function Et(e){return Object(At.a)({action:"UPDATE_USER"},e,{},gt)}var ft=function(e){function t(e){var n,r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).steps=(n={},Object(k.a)(n,"LOBBY_STEP_NICKNAME",l.a.createElement(wt,null)),Object(k.a)(n,"LOBBY_STEP_TYPE_SELECTING",l.a.createElement(Tt,null)),Object(k.a)(n,"LOBBY_STEP_CONNECTION",l.a.createElement(Rt,null)),n),r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.socketUpdateUser)({game:"GAME_TETRIS"})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.step;return l.a.createElement(D.a,{className:t.lobby},n in this.steps?this.steps[n]:n)}}]),t}(s.PureComponent),ht=Object(v.b)((function(e){return{step:e.tetris.config.step}}),(function(e){return{socketUpdateUser:function(t){return e(Et(t))}}}))(Object(y.a)((function(){return{lobby:{position:"relative"}}}))(ft)),dt=n(39),bt=n.n(dt);function Ct(){var e=!1;return function(t){e||(e=!0,t(),setTimeout((function(){e=!1}),750))}}function Bt(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var Ot={type:"GAME_TETRIS",meta:{remote:"META_SOCKET_EMIT"}};function vt(e){return Object(At.a)({action:"MAKE_CONNECTION",server_id:e},Ot)}function jt(){return function(e){e({type:"STOP_GAME"}),e(vt())}}var It=Object(s.createContext)(),Qt=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleNicknameChange=function(e){var t=e.target.value;(0,n.props.updateConfig)({nickname:t})},n.submitNickname=function(){var e,t,a,r,o,i;return bt.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=n.context,t=n.props,a=t.nickname,r=t.updateConfig,o=t.socketValidateNickname,c.next=4,bt.a.awrap(o(a));case 4:i=c.sent,e(i,(function(e){r(e)}));case 6:case"end":return c.stop()}}))},n.handleNicknameSubmit=function(){n.handleNicknameSubmitDecorator(n.submitNickname)},n.handleNicknameSubmitDecorator=Ct(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.nickname;return l.a.createElement(J,{onChange:this.handleNicknameChange,onSubmit:this.handleNicknameSubmit,placeholder:"Enter your nickname",value:e})}}]),t}(s.PureComponent);Qt.contextType=It;var wt=Object(v.b)((function(e){return{nickname:e.tetris.config.nickname}}),(function(e){return{updateConfig:function(t){return e(Ke(t))},socketValidateNickname:function(t){return e(function(e){return Object(At.a)({action:"VALIDATE_NICKNAME",nickname:e},Ot)}(t))}}}))(Qt),yt=n(512),kt=n(494),Nt=n(506),St=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleType=function(e){var t=e.target.value;(0,n.props.updateConfig)({type:t})},n.handleBack=function(){(0,n.props.updateConfig)({step:"LOBBY_STEP_NICKNAME"})},n.handleNext=function(){(0,n.props.updateConfig)({step:"LOBBY_STEP_CONNECTION"})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.type;return l.a.createElement(D.a,{className:t.form},l.a.createElement(yt.a,{value:n,onChange:this.handleType},l.a.createElement(kt.a,{value:"TYPE_CLIENT",control:l.a.createElement(Nt.a,null),label:"Client"}),l.a.createElement(kt.a,{value:"TYPE_SERVER",control:l.a.createElement(Nt.a,null),label:"Server"})),l.a.createElement(je,{onBack:this.handleBack,onNext:this.handleNext}))}}]),t}(s.PureComponent),Tt=Object(v.b)((function(e){return{type:e.tetris.config.type}}),(function(e){return{updateConfig:function(t){return e(Ke(t))}}}))(Object(y.a)((function(e){return{form:{margin:e.spacing(2),width:200}}}))(St)),_t=function(e){function t(e){var n,r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).renderStepTypeClient=function(){var e=r.state.server_id;return l.a.createElement(s.Fragment,null,l.a.createElement(_.a,null,"Your friend is ought to be server. Ask him to provide you his ID"),l.a.createElement(J,{onChange:r.handleClientChange,onSubmit:r.handleClientSubmit,placeholder:"Enter your friend's id",value:e}))},r.renderStepTypeServer=function(){return l.a.createElement(b.Consumer,null,(function(e){return l.a.createElement(s.Fragment,null,l.a.createElement(_.a,null,"Share your ID with your friend"),l.a.createElement(_.a,null,l.a.createElement("code",null,e.id)))}))},r.handleClientChange=function(e){var t=e.target.value;r.setState((function(){return{server_id:t}}))},r.submitClient=function(){var e,t,n,a;return bt.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e=r.context,t=r.state.server_id,n=r.props.socketMakeConnection,o.next=5,bt.a.awrap(n(t));case 5:a=o.sent,e(a);case 7:case"end":return o.stop()}}))},r.handleClientSubmit=function(){r.handleNicknameSubmitDecorator(r.submitClient)},r.handleBack=function(){(0,r.props.updateConfig)({step:"LOBBY_STEP_TYPE_SELECTING"})},r.handleNicknameSubmitDecorator=Ct(),r.step_type_map=(n={},Object(k.a)(n,"TYPE_CLIENT",r.renderStepTypeClient),Object(k.a)(n,"TYPE_SERVER",r.renderStepTypeServer),n),r.state={server_id:""},r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.type;return l.a.createElement(D.a,{className:t.form},this.step_type_map[n](),l.a.createElement(je,{onBack:this.handleBack,onNext:this.submitClient,isNext:!1}))}}]),t}(s.PureComponent);_t.contextType=It;var Rt=Object(v.b)((function(e){return{type:e.tetris.config.type}}),(function(e){return{updateConfig:function(t){return e(Ke(t))},socketMakeConnection:function(t){return e(vt(t))}}}))(Object(y.a)((function(e){return{form:{margin:e.spacing(2),width:200}}}))(_t)),Mt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){var e=this.props,t=e.resetConfig,n=e.is_lobby,a=e.socketDisconnect,r=e.stopGame;n||(console.log("make disconnect"),r(),a()),t()}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.results_data,o=a.socketGameFinish;null!==r&&o()}},{key:"render",value:function(){var e=this.props,t=e.isConnected,n=e.is_lobby,a=e.results_data,r=e.closeResults;return t?l.a.createElement(s.Fragment,null,n?l.a.createElement(ht,null):l.a.createElement(Yn,null),a?l.a.createElement(me,{data:a.data,title:a.title,onClose:r}):null):l.a.createElement(s.Fragment,null,"no connected")}}]),t}(s.PureComponent),xt=Object(v.b)((function(e){var t=e.tetris,n=t.isResultModalOpen,a=t.opponent,r=t.score,o=t.config;return{isConnected:e.socket.isConnected,is_lobby:null===a,results_data:n?{title:r>a.score?"You won!":r<a.score?"You lost!":"\u041f\u043e\u0431\u0435\u0434\u0438\u043b\u0430 \u0434\u0440\u0443\u0436\u0431\u0430!",data:[{label:"You (".concat(o.nickname,"):"),value:r},{label:"Opponent (".concat(a.nickname,"):"),value:a.score}]}:null}}),(function(e){return{resetConfig:function(){return e({type:"RESET_CONFIG"})},stopGame:function(){return e({type:"STOP_GAME"})},socketDisconnect:function(){return e(Object(At.a)({action:"DISCONNECT"},Ot))},socketGameFinish:function(){return e(Object(At.a)({action:"GAME_FINISH"},Ot))},closeResults:function(){return e({type:"CLOSE_RESULTS"})}}}))(Mt),Gt=n(511),Pt=[{value:"score",label:"Score"},{value:"speed",label:"Speed"}],Lt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.className;return l.a.createElement(D.a,null,Pt.map((function(t,r){var o=t.value,i=t.label;return l.a.createElement(_.a,{key:r,variant:"h6",className:L()(n.item,a)},i,": ",e.props[o])})))}}]),t}(s.PureComponent),Dt=Object(y.a)((function(e){return{item:{lineHeight:1,"&:not(:first-child)":{marginTop:e.spacing(.5)}}}}))(Lt),Ut=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.isOpponent,r=e.className;return l.a.createElement(ce,{className:L()(t.toolbar,r)},n.map((function(e,n){return e?l.a.createElement(D.a,{key:n,className:L()(t.item,a?t.item_with_opponent:t.item_without_opponent)},e):null})))}}]),t}(s.PureComponent),Yt=Object(v.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}))(Object(y.a)((function(e){var t;return{toolbar:{flexWrap:"wrap",flexDirection:"column",alignItems:"stretch",height:"100%"},item:{display:"flex",alignItems:"flex-start"},item_with_opponent:{"&:not(:first-child)":(t={},Object(k.a)(t,e.breakpoints.up("sm"),{marginTop:e.spacing(1)}),Object(k.a)(t,e.breakpoints.down("xs"),{marginTop:e.spacing(.5)}),t)},item_without_opponent:{"&:not(:first-child)":{marginTop:e.spacing(2)}},score:{}}}))(Ut)),Ht=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=e.className,a=e.classes,r=Object(H.a)(e,["preview","className","classes"]);return l.a.createElement(Kt,Object.assign({grid:t,className:L()(a.preview,n),isPreview:!0},r))}}]),t}(s.PureComponent),zt=Object(y.a)((function(){return{preview:{display:"flex",alignItems:"center"}}}))(Ht),Wt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.grid,a=e.isField,r=e.isPreview,o=e.className;return l.a.createElement(D.a,{className:L()(t.field,r&&t.fieldPreview,o)},l.a.createElement(D.a,{className:t.fieldInner},n?n.map((function(e,n){return l.a.createElement(D.a,{key:n,className:L()(t.row,a&&n<4&&t.hidden)},e.map((function(e,n){return l.a.createElement(D.a,{key:n,className:L()(t.col,1===e&&t.square,r&&t.colPreview)})})))})):null))}}]),t}(s.PureComponent);Wt.defaultProps={size:30};var Kt=Object(y.a)((function(){return{field:{position:"relative",height:function(e){return 20*e.size-19},width:function(e){return 10*e.size-10+1},overflow:"hidden"},fieldPreview:{height:function(e){return 4*e.size},width:function(e){return 4*e.size}},fieldInner:{position:"absolute",bottom:0,left:0,right:0,"$fieldPreview &":{position:"relative"}},row:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",flexWrap:"nowrap","&:not(:first-child)":{marginTop:-1}},col:{width:function(e){return e.size},height:function(e){return e.size},flexShrink:0,margin:0,border:"1px solid #5a5a5a",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",flexWrap:"nowrap","&:not(:first-child)":{marginLeft:-1},"&$colPreview":{borderColor:"transparent","&$square":{borderColor:"#5a5a5a"}}},square:{backgroundColor:"#4050b5"},hidden:{opacity:0,pointerEvents:"none"},colPreview:{}}}))(Wt),Ft=n(495),Jt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.icon,r=Object(H.a)(e,["classes","className","icon"]);return l.a.createElement(Ft.a,Object.assign({className:L()(t.button,n)},r),a)}}]),t}(s.PureComponent);Jt.defaultProps={icon:"Add"};var Vt=Object(y.a)((function(){return{button:{},typograpy:{lineHeight:1}}}))(Jt),qt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.name,a=e.className;return l.a.createElement(D.a,{className:t.nickname},l.a.createElement(_.a,{variant:"h6",className:L()(t.value,a)},n))}}]),t}(s.PureComponent),$t=Object(y.a)((function(){return{nickname:{position:"relative",display:"flex",width:"100%",alignItems:"stretch",justifyContent:"stretch"},value:{lineHeight:1.1,width:0,flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}))(qt),Xt=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.toolbarClassName,r=e.field,o=e.toolbar;return l.a.createElement(D.a,{className:L()(t.playerInterface,n)},r,l.a.createElement(D.a,{className:L()(t.toolbar,a)},o))}}]),t}(s.PureComponent),Zt=Object(y.a)((function(){return{playerInterface:{display:"flex",alignItems:"stretch",justifyContent:"center"},toolbar:{}}}))(Xt),en=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.speed,a=Object(H.a)(e,["score","speed"]);return l.a.createElement(Dt,Object.assign({score:t,speed:n},a))}}]),t}(s.PureComponent),tn=Object(v.b)((function(e){return{score:e.tetris.score,speed:e.tetris.speed}}))(en),nn=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=Object(H.a)(e,["preview"]);return l.a.createElement(zt,Object.assign({preview:t},n))}}]),t}(s.PureComponent),an=Object(v.b)((function(e){return{preview:e.tetris.isGameRunning&&e.tetris.figureNext[e.tetris.rotationNext]}}))(nn),rn=n(144),on=n.n(rn),cn=n(208),sn=n.n(cn),ln=n(209),un=n.n(ln),An=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grid,n=Object(H.a)(e,["grid"]);return l.a.createElement(Kt,Object.assign({grid:t,isField:!0},n))}}]),t}(s.PureComponent),pn=Object(v.b)((function(e){var t=e.tetris.opponent;return{grid:t.field&&t.field.length?t.field:e.tetris.table}}))(An),mn=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.speed,a=Object(H.a)(e,["score","speed"]);return l.a.createElement(Dt,Object.assign({score:t,speed:n},a))}}]),t}(s.PureComponent),gn=Object(v.b)((function(e){return{score:e.tetris.opponent.score,speed:e.tetris.opponent.speed}}))(mn),En=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.speed,e.nickname),n=e.previewComponent,a=(e.classes,e.labelClassName),r=Object(H.a)(e,["speed","nickname","previewComponent","classes","labelClassName"]);return l.a.createElement(Yt,Object.assign({data:[l.a.createElement($t,{name:t,className:a}),l.a.createElement(gn,{className:a}),n]},r))}}]),t}(s.PureComponent),fn=Object(v.b)((function(e){return{nickname:e.tetris.opponent.nickname}}))(Object(y.a)((function(){return{}}))(En)),hn=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=Object(H.a)(e,["preview"]);return l.a.createElement(zt,Object.assign({preview:t},n))}}]),t}(s.PureComponent),dn=Object(v.b)((function(e){return{preview:e.tetris.isGameRunning&&e.tetris.opponent.preview}}))(hn),bn=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.size,a=e.labelClassName,r=e.toolbarClassName;return l.a.createElement(Zt,{className:t.opponent,field:l.a.createElement(pn,{size:n}),toolbar:l.a.createElement(fn,{className:r,labelClassName:a,previewComponent:l.a.createElement(dn,{size:n})})})}}]),t}(s.PureComponent),Cn=Object(y.a)((function(e){return{opponent:Object(k.a)({},e.breakpoints.down("sm"),{position:"absolute",bottom:0})}}))(bn),Bn=10,On=17,vn=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),u=0;u<r;u++)c[u]=arguments[u];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleAction=function(e){var t,a,r,o,i,c;return bt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=n.context,a=n.props,r=a.isOpponent,o=a.socketSendButtonAction,i=function(){return e in n.props&&n.props[e]()},r){s.next=7;break}i(),s.next=11;break;case 7:return s.next=9,bt.a.awrap(o(e));case 9:c=s.sent,t(c,i);case 11:case"end":return s.stop()}}))},n.handleStart=function(e){e.currentTarget.blur(),n.handleAction("startNewGameAndMove")},n.handleStartMoving=function(){n.handleAction("startMoving")},n.handleStopMoving=function(){n.handleAction("stopMoving")},n.handleStopGame=function(){var e=n.props.isOpponent?"socketGameReset":"stopGame";n.handleAction(e)},n.renderPlayPauseButtons=function(){var e=n.props,t=e.classes,a=e.isGameRunning,r=e.isPlayButton,o=e.isPauseButton;return l.a.createElement(s.Fragment,null,a?l.a.createElement(s.Fragment,null,l.a.createElement(Vt,{icon:l.a.createElement(sn.a,null),size:"small",onClick:n.handleStopGame,className:t.button}),r&&l.a.createElement(Vt,{icon:l.a.createElement(on.a,null),size:"small",onClick:n.handleStartMoving,className:t.button}),o&&l.a.createElement(Vt,{icon:l.a.createElement(un.a,null),size:"small",onClick:n.handleStopMoving,className:t.button})):l.a.createElement(Vt,{icon:l.a.createElement(on.a,null),size:"small",onClick:n.handleStart}))},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setApp)({topComponent:this.renderPlayPauseButtons()})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.setApp,o=a.isGameRunning,i=a.isPlayButton,c=a.isPauseButton;o===e.isGameRunning&&i===e.isPlayButton&&c===e.isPauseButton||r({topComponent:this.renderPlayPauseButtons()})}},{key:"componentWillUnmount",value:function(){(0,this.props.setApp)({topComponent:null})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.nickname,a=e.previewComponent,r=e.isOpponent,o=e.width,i=Object(Gt.b)("sm",o),c=Object(Gt.b)("xs",o)?Bn:On;return l.a.createElement(Yt,{data:[n&&l.a.createElement($t,{name:n,className:r?t.label:t.labelSingle}),l.a.createElement(tn,{className:r?t.label:t.labelSingle}),a,r&&i&&l.a.createElement(Cn,{size:c,labelClassName:t.labelOpponent,toolbarClassName:t.toolbarOpponent})]})}}]),t}(s.PureComponent);vn.contextType=It;var jn,In=Object(v.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.opponent,o=t.config;return{isGameRunning:n,isPlayButton:n&&a,isPauseButton:n&&!a,nickname:null!==r&&o.nickname,isOpponent:null!==r}}),(function(e){return{startNewGame:function(){e({type:"START_NEW_GAME"})},stopGame:function(){e({type:"STOP_GAME"})},startMoving:function(){e({type:"START_MOVING"})},stopMoving:function(){e({type:"STOP_MOVING"})},startNewGameAndMove:function(){e(ze())},setApp:function(t){return e(V(t))},socketSendButtonAction:function(t){return e(function(e){return Object(At.a)({action:"SEND_BUTTON_ACTION",button_action:e},Ot)}(t))},socketGameReset:function(){return e(jt())}}}))(Object(Gt.a)()(Object(y.a)((function(e){return{button:{"&:not(:first-child)":{marginLeft:e.spacing(1)}},label:Object(k.a)({},e.breakpoints.down("xs"),{fontSize:"0.7rem"}),labelOpponent:Object(k.a)({},e.breakpoints.down("sm"),{fontSize:"0.7rem"}),labelSingle:Object(k.a)({},e.breakpoints.down("xs"),{fontSize:"0.8rem"}),toolbarOpponent:Object(k.a)({},e.breakpoints.down("xs"),{position:"absolute",bottom:20*Bn-18,left:0,padding:0,height:"auto"})}}))(vn))),Qn=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.isOpponent&&!Object(Je.isEqual)(this.props.field,e.field)){var a=this.props;(0,a.socketSendMove)({field:a.field,preview:a.preview,speed:a.speed,score:a.score})}}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.width,a=Object(H.a)(e,["field","width"]);return l.a.createElement(Kt,Object.assign({size:Object(Gt.c)("sm",n)?30:20,grid:t,isField:!0},a))}}]),t}(s.PureComponent),wn=Object(v.b)((function(e){var t=e.tetris,n=t.opponent,a=t.isGameRunning,r=t.figureNext,o=t.rotationNext,i=t.figure,c=t.rotation,s=t.position,l=t.table,u=t.speed,A=t.score;return{isOpponent:null!==n,preview:a&&r[o],speed:u,score:A,field:i?qe(i[c],s,l):l}}),(function(e){return{socketSendMove:function(t){return e(function(e){return Object(At.a)({action:"SEND_MOVE"},e,{},Ot)}(t))}}}))(Object(Gt.a)()(Qn)),yn=n(210),kn=n.n(yn),Nn=n(211),Sn=n.n(Nn),Tn=n(212),_n=n.n(Tn),Rn=n(213),Mn=n.n(Rn),xn=[{icon:l.a.createElement(kn.a,null),action:Pe,position:"left"},{icon:l.a.createElement(Sn.a,null),action:Le,position:"right"},{icon:l.a.createElement(_n.a,null),action:Ye,position:"down"}],Gn=function(e){function t(e){var n,r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).init=function(){var e=r.props.key_map;for(var t in r.pressingFunc=it(e),r.ref_map){var n=A.a.findDOMNode(r.ref_map[t].current);r.listener_map[t]={},r.listener_map[t].onDown=r.setRuleDecorator(r.handleMouseDown(t)),r.listener_map[t].onUp=r.setRuleDecorator(r.handleMouseUp(t)),Bt()?(n.addEventListener("touchstart",r.listener_map[t].onDown,!1),n.addEventListener("touchend",r.listener_map[t].onUp,!1)):(n.addEventListener("mousedown",r.listener_map[t].onDown,!1),n.addEventListener("mouseup",r.listener_map[t].onUp,!1)),n.addEventListener("contextmenu",r.handleContextMenu,!1)}},r.setRuleDecorator=function(e){return function(){return!!r.props.isKeyPressingAllowed&&e()}},r.handleContextMenu=function(e){e.preventDefault()},r.handleMouseDown=function(e){return function(){return r.pressingFunc.onTouchDown(e)}},r.handleMouseUp=function(e){return function(){return r.pressingFunc.onTouchUp(e)}},r.ref_map=(n={},Object(k.a)(n,Pe,Object(s.createRef)()),Object(k.a)(n,Le,Object(s.createRef)()),Object(k.a)(n,Ye,Object(s.createRef)()),Object(k.a)(n,De,Object(s.createRef)()),n),r.listener_map={},r.pressingFunc=null,r.is_loaded=!1,r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){this.is_loaded||null===this.props.key_map||(this.init(),this.is_loaded=!0)}},{key:"componentWillUnmount",value:function(){for(var e in this.ref_map){var t=A.a.findDOMNode(this.ref_map[e].current);t.removeEventListener("mousedown",this.listener_map[e].onDown,!1),t.removeEventListener("touchstart",this.listener_map[e].onDown,!1),t.removeEventListener("mouseup",this.listener_map[e].onUp,!1),t.removeEventListener("touchend",this.listener_map[e].onUp,!1),t.removeEventListener("touchcancel",this.listener_map[e].onUp,!1),t.removeEventListener("contextmenu",this.handleContextMenu,!1)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.classes;return t.key_map&&l.a.createElement(D.a,{className:n.mobileBar},l.a.createElement(D.a,{className:n.item},l.a.createElement(D.a,{className:n.arrows},xn.map((function(t,a){var r=t.icon,o=t.action,i=t.position;return l.a.createElement(Vt,{key:a,icon:r,className:L()(n.touchButton,n.arrow,n["arrow_".concat(i)]),ref:e.ref_map[o]})})))),l.a.createElement(D.a,{className:n.item},l.a.createElement(D.a,{className:n.arrows},l.a.createElement(Vt,{icon:l.a.createElement(Mn.a,null),className:L()(n.touchButton,n.arrow,n.arrow_rightCenter),ref:this.ref_map[De]}))))}}]),t}(s.PureComponent),Pn=Object(v.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause;return{key_map:t.key_map,isKeyPressingAllowed:!a&&n}}),null)(Object(y.a)((function(){return{mobileBar:{position:"relative",display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",zIndex:1,height:120},item:{"&:first-child":{marginLeft:60},"&:last-child":{marginRight:60}},arrows:{position:"relative",width:60,height:60,marginTop:-60,marginBottom:60},touchButton:{width:60,height:60,padding:0,minWidth:"auto"},arrow:{position:"absolute",borderRadius:"100%"},arrow_left:{top:0,left:"-100%"},arrow_right:{top:0,right:"-100%"},arrow_down:{bottom:"-100%"},arrow_center:{top:0,left:0},arrow_rightCenter:{top:"50%",right:"-100%"}}}))(Gn)),Ln=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.size,a=e.isOpponent;return l.a.createElement(Zt,{field:l.a.createElement(wn,{size:n}),toolbar:l.a.createElement(In,{previewComponent:l.a.createElement(an,{size:n,className:a?t.preview:""})}),toolbarClassName:!a&&t.toolbar})}}]),t}(s.PureComponent),Dn=Object(v.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}))(Object(y.a)((function(e){return{toolbar:Object(k.a)({},e.breakpoints.up("sm"),{marginLeft:30}),preview:Object(k.a)({},e.breakpoints.down("xs"),{position:"fixed",top:pt,right:0,opacity:.25,display:"flex",alignItems:"center",justifyContent:"center"})}}))(Ln)),Un=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.width,a=e.isOpponent,r=Object(Gt.b)("xs",n),o=Object(Gt.b)("sm",n),i=r?20:30;return l.a.createElement(s.Fragment,null,l.a.createElement(st,null),l.a.createElement(D.a,{className:t.layout},l.a.createElement(D.a,{className:t.body},l.a.createElement(Dn,{size:i}),a&&!o?l.a.createElement(Cn,{size:i}):null),r?l.a.createElement(D.a,{className:t.mobileBar},l.a.createElement(Pn,null)):null))}}]),t}(s.PureComponent),Yn=Object(v.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}),(function(e){return{closeResults:function(){e({type:"CLOSE_RESULTS"})}}}))(Object(E.f)(Object(Gt.a)()(Object(y.a)((function(){return{layout:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"},body:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},mobileBar:{alignSelf:"stretch"}}}))(Un)))),Hn=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(Ie.a,null,l.a.createElement(w.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:1},Cr.map((function(t){var n=t.name,a=t.description,r=t.link,o=Object(s.forwardRef)((function(e,t){return l.a.createElement(G,Object.assign({to:r,label:l.a.createElement(Qe.a,null,l.a.createElement(_.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),l.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},a))},e))}));return l.a.createElement(w.a,{key:r,item:!0,zeroMinWidth:!0,xs:6,md:4,lg:3},l.a.createElement(ye.a,{className:e.card},l.a.createElement(o,{component:function(t){return l.a.createElement(we.a,Object.assign({className:e.actionArea},t))}})))}))))}}]),t}(s.PureComponent),zn=Object(y.a)((function(){return{home:{},card:{height:"100%"},actionArea:{height:"100%"}}}))(Hn),Wn=(jn={},Object(k.a)(jn,"ROOM_STATUS_WAITING",(function(){return"We need more players (2 minimum)"})),Object(k.a)(jn,"ROOM_STATUS_PAINTER_SELECTING",(function(e){var t=e.countdown;return"Painter is being selected in ".concat(t," (random)")})),Object(k.a)(jn,"ROOM_STATUS_WORD_SELECTING",(function(e){var t=e.painter;return"Painter ".concat(t.nickname," is selecting a word")})),Object(k.a)(jn,"ROOM_STATUS_DRAWING",(function(e){var t=e.painter;return"".concat(t.nickname," is drawing")})),Object(k.a)(jn,"ROOM_STATUS_GAME_FINISHED",(function(e){var t=e.winner;return"The game is over. ".concat(t.nickname," wins")})),jn);function Kn(e){return{type:"UPDATE_CONFIG",payload:{config:e}}}function Fn(e){return console.log(e),{type:"UPDATE_ROOM_LIST",payload:{rooms:e}}}var Jn=function(e){function t(e){var n,r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleBackToNickname=function(){(0,r.props.updateConfig)({step:"LOBBY_STEP_NICKNAME"})},r.steps=(n={},Object(k.a)(n,"LOBBY_STEP_NICKNAME",l.a.createElement(Zn,null)),Object(k.a)(n,"LOBBY_STEP_ROOM_SELECTION",l.a.createElement(ca,{onBackToNickname:r.handleBackToNickname})),n),r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.socketUpdateUser)({room:"LOBBY_CROCODILE",game:"GAME_CROCODILE"})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.step;return l.a.createElement(D.a,{className:t.lobby},n in this.steps?this.steps[n]:n)}}]),t}(s.PureComponent),Vn=Object(v.b)((function(e){return{step:e.crocodile.config.step}}),(function(e){return{updateConfig:function(t){return e(Kn(t))},socketUpdateUser:function(t){return e(Et(t))}}}))(Object(y.a)((function(){return{lobby:{position:"relative"},lobbyContent:{position:"relative"}}}))(Jn));var qn={type:"GAME_CROCODILE",meta:{remote:"META_SOCKET_EMIT"}};var $n=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleNicknameChange=function(e){var t=e.target.value;(0,n.props.updateConfig)({nickname:t})},n.submitNickname=function(){var e,t,a,r,o,i,c;return bt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=n.context,t=n.props,a=t.nickname,r=t.updateConfig,o=t.socketValidateNickname,i=t.updateRoomList,s.next=4,bt.a.awrap(o(a));case 4:c=s.sent,e(c,(function(e){var t=e.config,n=e.rooms;r(t),i(n)}));case 6:case"end":return s.stop()}}))},n.handleNicknameSubmit=function(){n.handleNicknameSubmitDecorator(n.submitNickname)},n.handleNicknameSubmitDecorator=function(){var e=!1;return function(t){e||(e=!0,t(),setTimeout((function(){e=!1}),750))}}(),n.state={nickname:""},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.nickname;return l.a.createElement(J,{onChange:this.handleNicknameChange,onSubmit:this.handleNicknameSubmit,placeholder:"Enter your nickname",value:e})}}]),t}(s.PureComponent);$n.contextType=It;var Xn,Zn=Object(v.b)((function(e){return{nickname:e.crocodile.config.nickname}}),(function(e){return{updateConfig:function(t){return e(Kn(t))},updateRoomList:function(t){return e(Fn(t))},socketValidateNickname:function(t){return e(function(e){return Object(At.a)({action:"VALIDATE_NICKNAME",nickname:e},qn)}(t))}}}))($n),ea=n(498),ta=n(508),na=n(499),aa=n(500),ra=n(496),oa=n(497),ia=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleNewRoomModalOpen=function(){n.setState((function(){return{isNewRoomModal:!0}}))},n.handleJoinRoom=function(e){(0,n.props.socketJoinRoom)(e)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.rooms,r=t.onBackToNickname;return l.a.createElement(Ie.a,null,l.a.createElement(_.a,{className:n.stepTitle,variant:"h6"},"Select room or create new one:"),l.a.createElement(w.a,{container:!0},l.a.createElement(w.a,{item:!0},l.a.createElement(T.a,{className:n.iconButton,onClick:r},l.a.createElement(ra.a,null)),l.a.createElement(T.a,{className:n.iconButton,onClick:this.handleNewRoomModalOpen,disabled:!0},l.a.createElement(oa.a,null))),l.a.createElement(w.a,{item:!0,className:n.listArea},l.a.createElement(z.a,{square:!0},l.a.createElement(ea.a,{component:"nav",className:n.list},a&&a.length?a.map((function(t,r){var o=t.room,i=t.players;return l.a.createElement(s.Fragment,{key:o},l.a.createElement(ta.a,{button:!0,onClick:function(){return e.handleJoinRoom(o)}},l.a.createElement(na.a,{primary:o,className:n.listItemText}),l.a.createElement(D.a,null,"(",i,")")),r!==a.length-1?l.a.createElement(aa.a,null):null)})):"No rooms found")))))}}]),t}(s.PureComponent),ca=Object(v.b)((function(e){return{rooms:e.crocodile.rooms}}),(function(e){return{socketJoinRoom:function(t){return e(function(e){return Object(At.a)({action:"JOIN_ROOM",room:e},qn)}(t))}}}))(Object(y.a)((function(e){return{root:{},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:20},divider:{height:28,margin:4},stepTitle:{margin:"20px 0"},list:{maxWidth:350,width:"100%"},listArea:{flexGrow:1},listItemText:{marginRight:e.spacing(2)}}}))(ia)),sa=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.task,a=e.isPainter,r=e.children;return l.a.createElement(s.Fragment,null,l.a.createElement(w.a,{container:!0,spacing:0,wrap:"nowrap",className:t.crocodile},l.a.createElement(w.a,{item:!0,className:t.paint},l.a.createElement(D.a,{className:t.paintWork},r),l.a.createElement(D.a,{className:t.paintHeader},l.a.createElement(Ba,{data:[Object(At.a)({},n),{label:"Players",value:l.a.createElement(ba,null)}]}))),l.a.createElement(w.a,{item:!0,className:t.chat},l.a.createElement(Ia,{painterMode:a}))),l.a.createElement(va,null))}}]),t}(s.PureComponent),la=Object(y.a)((function(e){return{crocodile:Object(k.a)({alignItems:"stretch",justifyContent:"stretch",height:"100%",flexDirection:"column"},e.breakpoints.up("md"),{flexDirection:"row"}),paint:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"},paintHeader:{},paintWork:{position:"relative",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},chat:Object(k.a)({flexBasis:function(e){return e.isPainter?130:200},flexShrink:0,paddingTop:0,paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},e.breakpoints.up("md"),{flexBasis:"250px !important",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:0}),players:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}))(sa),ua=function(e){e.classes;var t=Object(H.a)(e,["classes"]);return t.isPainter?l.a.createElement(fa,t):l.a.createElement(ga,t)},Aa=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).handleLeaveRoom=function(){if(n.is_left)return!1;var e=n.props,t=e.setApp,a=e.cleanRoom;(0,e.socketLeaveRoom)(),a(),t({sub_header:null,topAction:null}),n.is_left=!0},n.is_left=!1,n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setApp)({sub_header:e.roomName,topAction:this.handleLeaveRoom})}},{key:"componentWillUnmount",value:function(){this.handleLeaveRoom()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isPainter;return l.a.createElement(D.a,{className:t.interface},l.a.createElement(ua,Object.assign({isPainter:n},this.props)))}}]),t}(s.PureComponent),pa=Object(v.b)((function(e){return{sub_header:e.app.sub_header,isPainter:(e.crocodile.room.painter||{}).id===e.socket.id,roomName:e.crocodile.room.roomName}}),(function(e){return{cleanRoom:function(){e({type:"CLEAN_ROOM"})},setApp:function(t){e(V(t))},socketLeaveRoom:function(){e(Object(At.a)({action:"LEAVE_ROOM"},qn))}}}))(Object(y.a)((function(){return{interface:{position:"relative",width:"100%",height:"100%"}}}))(Aa)),ma=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).getTask=function(){var e=n.props,t=e.word,a=e.painter_name;return t?{label:"Your task",value:"Try to guess the word that ".concat(a," is drawing")}:{}},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.getTask();return l.a.createElement(la,Object.assign({task:e},this.props),l.a.createElement(Ya,null))}}]),t}(s.PureComponent),ga=Object(v.b)((function(e){return{word:e.crocodile.room.word,painter_name:(e.crocodile.room.painter||{}).nickname}}))(Object(y.a)((function(){return{}}))(ma)),Ea=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleWordSelect=function(e,t){(0,n.props.socketWordSelect)(t)},n.handleConvertToImage=function(e){if(!e)return!1;(0,n.props.socketPaint)(e.current.toDataURL())},n.getTask=function(){var e=n.props.word;return e?{label:"Your task",value:'Try to draw word "'.concat(e,'"')}:{}},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=(t.onWordSelect,t.word),r=t.words,o=Object(H.a)(t,["classes","onWordSelect","word","words"]);return l.a.createElement(s.Fragment,null,l.a.createElement(la,Object.assign({task:this.getTask()},o),l.a.createElement(Da,{onConvertToImage:this.handleConvertToImage})),l.a.createElement(fe.a,{open:!a},l.a.createElement(D.a,{className:n.wordList},r.map((function(t,a){return l.a.createElement(R.a,{key:a,className:n.wordButton,variant:"outlined",onClick:function(n){return e.handleWordSelect(n,t)}},t)})))))}}]),t}(s.PureComponent),fa=Object(v.b)((function(e){return{word:e.crocodile.room.word,words:e.crocodile.room.words}}),(function(e){return{socketWordSelect:function(t){return e(function(e){return Object(At.a)({action:"WORD_SELECT",word:e},qn)}(t))},socketPaint:function(t){return e(function(e){return Object(At.a)({action:"PAINT",image:e},qn)}(t))}}}))(Object(y.a)((function(e){return{wordList:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(2)},wordButton:{width:"100%","&:not(:first-child)":{marginTop:e.spacing(1)}}}}))(Ea)),ha=n(510),da=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleClick=function(e){return function(e){}},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.players,a=e.painterId,r=Object.keys(n);return l.a.createElement(D.a,{className:t.players},n&&r.length?r.map((function(e,t){return l.a.createElement(ha.a,{key:t,size:"small",label:n[e].nickname,color:a===e?"primary":"default"})})):"There is no players in this room")}}]),t}(s.PureComponent),ba=Object(v.b)((function(e){return{players:e.crocodile.room.players,painterId:(e.crocodile.room.painter||{}).id}}))(Object(y.a)((function(e){return{players:{alignSelf:"flex-start",display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}))(da)),Ca=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data;return l.a.createElement(ce,null,l.a.createElement(D.a,{className:t.roomInfoBar},n.map((function(e,n){var a=e.label,r=e.value;return a&&r?l.a.createElement(D.a,{key:n,className:t.item},l.a.createElement(D.a,{className:t.label,fontWeight:"fontWeightMedium"},a,":"),l.a.createElement(D.a,{className:t.value},r)):null}))))}}]),t}(s.PureComponent),Ba=Object(y.a)((function(e){return{roomInfoBar:{position:"relative",alignSelf:"flex-start",width:"100%",marginBottom:e.spacing(1)},item:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",flexDirection:"row"},label:{flexBasis:70},value:{marginLeft:e.spacing(2)}}}))(Ca),Oa=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.winner_name,a=e.word;return n?l.a.createElement(fe.a,{open:!0},l.a.createElement(he.a,null,l.a.createElement(D.a,null,l.a.createElement(D.a,{component:"h4"},"The game is over!"),l.a.createElement(se.a,{className:t.table},l.a.createElement(le.a,null,l.a.createElement(ue.a,null,l.a.createElement(Ae.a,null,"Winner: "),l.a.createElement(Ae.a,{align:"right"},n)),l.a.createElement(ue.a,null,l.a.createElement(Ae.a,null,"Right word: "),l.a.createElement(Ae.a,{align:"right"},a))))))):null}}]),t}(s.PureComponent),va=Object(v.b)((function(e){return{winner_name:(e.crocodile.room.winner||{}).nickname,word:e.crocodile.room.word}}))(Object(y.a)((function(){return{table:{maxWidth:300}}}))(Oa)),ja=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).onChat=function(e){(0,n.props.socketChat)(e)},n.handleChat=function(){var e=n.state.message;e.length>0&&(n.setState((function(){return{message:""}})),n.lockFuncChat((function(){return n.onChat(e)})))},n.handleMessageChange=function(e){var t=e.target.value;n.setState((function(){return{message:t}}))},n.handleLikeMessage=function(e){return function(t){(0,n.props.socketMessageMark)(e,t)}},n.lockFuncChat=Ct(),n.state={message:""},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.painterMode,a=this.state.message;return l.a.createElement(w.a,{container:!0,spacing:0,direction:"column",className:t.wrapChat},l.a.createElement(w.a,{item:!0,className:t.wrapMessages},l.a.createElement(Ma,{painterMode:n,onLikeMessage:this.handleLikeMessage})),n?null:l.a.createElement(w.a,{item:!0,className:t.wrapSubmit},l.a.createElement(J,{onChange:this.handleMessageChange,onSubmit:this.handleChat,placeholder:"Message",value:a,className:t.textField,elevation:5})))}}]),t}(s.PureComponent),Ia=Object(v.b)(null,(function(e){return{socketChat:function(t){return e(function(e){return Object(At.a)({action:"CHAT",message:e},qn)}(t))},socketMessageMark:function(t,n){return e(function(e,t){return Object(At.a)({action:"MESSAGE_MARK",id:e,value:t},qn)}(t,n))}}}))(Object(y.a)((function(e){return{chat:{flexGrow:1},wrapChat:{position:"relative",height:"100%",margin:0},wrapMessages:{position:"relative",flexGrow:1,padding:"0 !important"},wrapSubmit:{flexShrink:0,padding:"".concat(e.spacing(1),"px 0 0 0 !important")},textField:{width:"100%",padding:"2px 4px",display:"flex",alignItems:"center"},input:{flex:1}}}))(ja)),Qa=n(110),wa=n.n(Qa),ya=n(111),ka=n.n(ya),Na=n(145),Sa=(Xn={},Object(k.a)(Xn,"THUMB_STATUS_LIKE",(function(e){return l.a.createElement(wa.a,{className:L()(e.thumb,e.thumbUp)})})),Object(k.a)(Xn,"THUMB_STATUS_DISLIKE",(function(e){return l.a.createElement(ka.a,{className:L()(e.thumb,e.thumbDown)})})),Xn),Ta=function(e){var t=e.classes,n=e.sender,a=e.message,r=e.onLikeMessage,o=e.likeStatus;return l.a.createElement(D.a,{className:t.card},r?l.a.createElement(sr,{className:t.thumbClicker,onClick:r}):null,l.a.createElement(D.a,{fontWeight:"fontWeightBold",className:t.name},o&&Sa[o](t),n),l.a.createElement(D.a,{className:t.message},a))},_a=function(e){var t=e.classes,n=e.message;return l.a.createElement(D.a,{className:t.card},l.a.createElement(D.a,{fontWeight:"fontWeightLight",className:t.messageServer},n))},Ra=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).scrollWindowToBottom=function(){if(n.windowRef&&n.windowRef.current){var e=n.windowRef.current,t=e.scrollHeight,a=e.clientHeight;n.windowRef.current.scrollTop=t-a}},n.windowRef=Object(s.createRef)(),n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.scrollWindowToBottom()}},{key:"componentDidUpdate",value:function(e,t,n){this.scrollWindowToBottom()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.chat,a=e.painterMode,r=e.onLikeMessage,o=n&&n.length?n:[{player:{nickname:"SERVER"},message:"This chat is currently empty"}];return l.a.createElement(z.a,{elevation:5,square:!0,className:t.window},l.a.createElement(D.a,{className:t.windowInner,ref:this.windowRef},o.map((function(e,n){var o=e.player,i=e.message,c=e.id,u=e.likeStatus,A=o.nickname,p=a?{onLikeMessage:r(c)}:null;return l.a.createElement(s.Fragment,{key:n},"SERVER"===A?l.a.createElement(_a,{classes:t,message:i}):l.a.createElement(Ta,Object.assign({classes:t,message:i,sender:A,likeStatus:u},p)))}))))}}]),t}(s.PureComponent),Ma=Object(v.b)((function(e){return{chat:e.crocodile.room.chat}}))(Object(y.a)((function(e){return{window:{position:"relative",width:"100%",height:"100%"},windowInner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowX:"hidden",overflowY:"scroll"},card:Object(k.a)({position:"relative",padding:e.spacing(1),"&:nth-child(2n)":{backgroundColor:Object(Na.fade)(e.palette.grey[400],.1)}},e.breakpoints.down("sm"),{padding:e.spacing(.5)}),cardActive:{cursor:"pointer",display:"block","&:hover":{backgroundColor:Object(Na.fade)(e.palette.primary.light,.2)}},name:Object(k.a)({textAlign:"left",fontSize:e.typography.pxToRem(13),paddingBottom:e.spacing(1)},e.breakpoints.down("sm"),{paddingBottom:e.spacing(.5)}),message:{textAlign:"right",color:"#fff",fontSize:e.typography.pxToRem(12)},messageServer:{textAlign:"right",fontSize:e.typography.pxToRem(10)},thumb:{fontSize:e.typography.pxToRem(14),verticalAlign:"middle",marginRight:e.spacing(1),color:e.palette.primary.main},thumbUp:{color:"green"},thumbDown:{color:"red"},thumbClicker:{position:"absolute",top:0,right:0,width:"auto",transition:"opacity 0.3s ease 0s",opacity:0,"$card:hover &":{opacity:.75}}}}))(Ra)),xa=n(112),Ga=n.n(xa),Pa=null,La=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).state={lineOptions:{lineWidth:2,lineJoin:"round",lineCap:"round",strokeStyle:"#ffffff"}},n.handlerColorSelect=function(e){n.setState((function(t){return{lineOptions:Object(At.a)({},t.lineOptions,{strokeStyle:e})}}))},n.getCoords=function(e){var t=e.target,n=e.changedTouches,a=t.getBoundingClientRect(),r=a.left,o=a.top,i=n?n[0]:e;return{x:i.clientX-r,y:i.clientY-o}},n.updateLine=function(){var e=n.state.lineOptions;for(var t in e)Pa[t]=e[t]},n.makeStep=function(e){var t=n.props.onConvertToImage,a=n.getCoords(e),r=a.x,o=a.y;return Pa.lineTo(r,o),Pa.stroke(),t(n.canvas),{x:r,y:o}},n.init=function(e,t){console.log(e,t),n.canvas.current.width=e,n.canvas.current.height=t,Pa=n.canvas.current.getContext("2d"),Ga.a.enableUndo(Pa),n.setListeners()},n.saveUpdateSizeFunc=function(e){n.doUpdateSize=e},n.updateSize=function(e,t){Ga.a.disableUndo(Pa);var a=Pa.getImageData(0,0,e,t);n.canvas.current.width=e,n.canvas.current.height=t,Pa.putImageData(a,0,0),n.savedSize.width=e,n.savedSize.height=t,Ga.a.enableUndo(Pa)},n.setListeners=function(){n.canvas.current.addEventListener("mousedown",n.handleMouseDown,!1),n.canvas.current.addEventListener("mouseup",n.handleMouseUp,!1),n.canvas.current.addEventListener("mousemove",n.handleMouseMove,!1),n.canvas.current.addEventListener("touchstart",n.handleTouchStart,!1),n.canvas.current.addEventListener("touchend",n.handleTouchEnd,!1),n.canvas.current.addEventListener("touchmove",n.handleTouchMove,!1)},n.removeListeners=function(){n.canvas.current.removeEventListener("mousedown",n.handleMouseDown,!1),n.canvas.current.removeEventListener("mouseup",n.handleMouseUp,!1),n.canvas.current.removeEventListener("mousemove",n.handleMouseMove,!1),n.canvas.current.removeEventListener("touchstart",n.handleTouchStart,!1),n.canvas.current.removeEventListener("touchend",n.handleTouchEnd,!1),n.canvas.current.removeEventListener("touchmove",n.handleTouchMove,!1)},n.handleTouchStart=function(e){n.pointStart(e)},n.handleTouchEnd=function(e){n.pointEnd(e)},n.handleTouchMove=function(e){n.handleMouseMove(e)},n.pointStart=function(e){n.isDrawing=!0;var t=n.props.onConvertToImage;Pa.putTag(),n.updateLine(),Pa.beginPath();var a=n.getCoords(e),r=a.x,o=a.y;Pa.moveTo(r,o),t(n.canvas)},n.pointEnd=function(e){n.isDrawing=!1,n.makeStep(e),Pa.putTag()},n.pointMove=function(e){n.isDrawing&&n.makeStep(e)},n.handleMouseDown=function(e){0===e.button&&n.pointStart(e)},n.handleMouseUp=function(e){0===e.button&&n.pointEnd(e)},n.handleMouseMove=function(e){n.isDrawing&&n.makeStep(e)},n.handleUndo=function(){var e=n.props.onConvertToImage;console.log(n.savedSize),Pa.undoTag(/^(?!.*(width|height|size|fillRect))/,1),e(n.canvas)},n.handleRedo=function(){var e=n.props.onConvertToImage;Pa.redoTag(),e(n.canvas)},n.handleClear=function(){var e=n.props.onConvertToImage;Pa.clearRect(0,0,n.canvas.current.width,n.canvas.current.height),e(n.canvas)},n.handleSizeChange=function(e,t){n.setState((function(e){return{lineOptions:Object(At.a)({},e.lineOptions,{lineWidth:t})}}))},n.canvas=Object(s.createRef)(),n.isDrawing=!1,n.doUpdateSize=null,n.savedSize={},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.lineOptions.lineWidth;return l.a.createElement(w.a,{container:!0,className:e.paint},l.a.createElement(w.a,{item:!0,className:e.toolbar},l.a.createElement(er,{onColorSelect:this.handlerColorSelect,onUndo:this.handleUndo,onRedo:this.handleRedo,onClear:this.handleClear,onSizeChange:this.handleSizeChange,lineWidth:t})),l.a.createElement(w.a,{item:!0,className:e.screen},l.a.createElement(Y,{k:500/600},l.a.createElement(za,{innerRef:this.canvas,init:this.init,updateSize:this.updateSize,saveUpdateSizeFunc:this.saveUpdateSizeFunc}))))}}]),t}(s.PureComponent),Da=Object(y.a)((function(){return{desk:{position:"relative",width:"100%",height:"100%"},canvas:{},paint:{width:"100%",height:"100%",flexDirection:"column"},toolbar:{},screen:{position:"relative",flexGrow:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}}}))(La),Ua=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.image;return l.a.createElement(Y,{k:500/600},l.a.createElement(z.a,{elevation:5,square:!0,className:t.screen},n&&n.length?l.a.createElement("img",{src:n||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAYAAAByNR6YAAAT1ElEQVR4Xu3WMREAAAgDMerfNCZ+DAI65Bh+5wgQIECAAAECBFKBpWvGCBAgQIAAAQIETmB5AgIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQeJDfAZGJuGy/AAAAAElFTkSuQmCC",className:t.image,alt:"gamehub"}):l.a.createElement(D.a,{className:t.note},"The game is going to start")))}}]),t}(s.PureComponent),Ya=Object(v.b)((function(e){return{image:e.crocodile.room.image}}))(Object(y.a)((function(){return{screen:{position:"relative",margin:"0 auto",width:"100%",height:"100%"},image:{display:"block",width:"100%",height:"100%"},note:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}}}))(Ua)),Ha=function(e){function t(e){var n;return Object(a.a)(this,t),(n=Object(o.a)(this,Object(i.a)(t).call(this,e))).updateSize=function(){var e=n.props,t=e.updateSize,a=e.resizer;t(a.width,a.height)},n.setInit=function(){var e=n.props,t=e.init,a=e.resizer;t(a.width,a.height),n.isInited=!0},n.isInited=!1,n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.saveUpdateSizeFunc(this.updateSize),setTimeout((function(){e.setInit()}),100)}},{key:"componentDidUpdate",value:function(e,t,n){!this.isInited||e.resizer.width===this.props.resizer.width&&e.resizer.height===this.props.resizer.height||this.updateSize()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.innerRef;return l.a.createElement(z.a,{elevation:5,square:!0,className:t.desk},l.a.createElement("canvas",{ref:n,className:t.canvas}))}}]),t}(s.PureComponent),za=Object(y.a)((function(){return{desk:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},canvas:{}}}))(Object(s.forwardRef)((function(e,t){return l.a.createElement(Ha,Object.assign({innerRef:t},e))}))),Wa=n(509),Ka=n(214),Fa=n.n(Ka),Ja=n(215),Va=n.n(Ja),qa=n(216),$a=n.n(qa),Xa=[{id:"undo",icon:l.a.createElement(Fa.a,null),action:"onUndo"},{id:"redo",icon:l.a.createElement(Va.a,null),action:"onRedo"},{id:"clear",icon:l.a.createElement($a.a,null),action:"onClear"}],Za=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).renderButton=function(){var e=n.props,t=e.classes,a=e.width,r=Object(Gt.b)("xs",a)?"small":"medium";return l.a.createElement(D.a,{className:t.iconButtons},Xa.map((function(e){var a=e.id,o=e.icon,i=e.action;return l.a.createElement(T.a,{key:a,onClick:n.props[i],size:r,className:t.iconButton},o)})))},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onColorSelect,a=e.onSizeChange,r=e.lineWidth;return l.a.createElement(ce,{variant:"dense",className:t.toolbar},l.a.createElement(rr,{onColorSelect:n,className:t.colorPicker}),l.a.createElement(Wa.a,{value:r,onChange:a,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:100,className:t.sizeSlider}),this.renderButton())}}]),t}(s.PureComponent),er=Object(Gt.a)()(Object(y.a)((function(e){var t;return{toolbar:{flexWrap:"wrap"},colorPicker:Object(k.a)({position:"relative"},e.breakpoints.down("xs"),{flexGrow:1}),sizeSlider:(t={flexGrow:1},Object(k.a)(t,e.breakpoints.down("xs"),{order:1}),Object(k.a)(t,e.breakpoints.up("sm"),{width:"auto",marginLeft:e.spacing(2)}),t),iconButtons:{},iconButton:Object(k.a)({},e.breakpoints.down("xs"),{"&:not(:first-child)":{marginLeft:e.spacing(1)}})}}))(Za)),tr=n(217),nr=["#ffffff","#000075","#ffe119","#3cb44b","#4363d8","#f032e6","#42d4f4","#f58231","#e6beff","#e6194B","#fabebe","#000000"],ar=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleChange=function(e,t){var a=n.props.onColorSelect;a&&a(e.hex)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className;return l.a.createElement(D.a,{className:L()(t.color,n)},l.a.createElement(tr.GithubPicker,{width:150,color:nr[0],onChange:this.handleChange,triangle:"hide",colors:nr,className:t.picker}))}}]),t}(s.PureComponent),rr=Object(y.a)((function(){return{color:{},picker:{background:"transparent !important",border:"none !important",boxShadow:"none !important",padding:"0 !important"}}}))(ar),or=n(501),ir=n(514),cr=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={value:null},n.handleChange=function(e,t){var a=n.props.onClick;n.setState((function(){return{value:t}})),a(t)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=this.state.value;return l.a.createElement(w.a,{container:!0,className:L()(t.thumbClicker,n)},l.a.createElement(ir.a,{size:"small",value:a,exclusive:!0,onChange:this.handleChange},l.a.createElement(or.a,{key:1,value:"THUMB_STATUS_LIKE"},l.a.createElement(wa.a,null)),l.a.createElement(or.a,{key:2,value:"THUMB_STATUS_DISLIKE"},l.a.createElement(ka.a,null))))}}]),t}(s.PureComponent),sr=Object(y.a)((function(){return{thumbClicker:{}}}))(cr),lr=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentWillUnmount",value:function(){(0,this.props.resetConfig)()}},{key:"render",value:function(){var e=this.props,t=e.isConnected,n=e.isRoomDefined;return t?l.a.createElement(s.Fragment,null,n?l.a.createElement(pa,null):l.a.createElement(Vn,null)):l.a.createElement(s.Fragment,null,"no connect")}}]),t}(s.PureComponent),ur=Object(v.b)((function(e){return{isConnected:e.socket.isConnected,isRoomDefined:e.crocodile.room.status}}),(function(e){return{resetConfig:function(){return e({type:"RESET_CONFIG"})}}}))(lr),Ar=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(ke,null)}}]),t}(s.PureComponent),pr=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(ur,null)}}]),t}(s.PureComponent),mr=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return console.log(this.props),l.a.createElement(_.a,{variant:"h3"},"404")}}]),t}(s.PureComponent),gr={link:"/",label:"Home",page:function(e){return l.a.createElement(zn,e)}},Er={link:"/tetris",label:"Tetris",name:"Tetris",description:"Classic tetris, that you can play single or with friend.",page:function(e){return l.a.createElement(oe,{header:"Tetris",component:l.a.createElement(Ar,e)})}},fr={link:"/crocodile",label:"Crocodile",name:"Crocodile",description:"You can guess the word that painter draws or you can be painter.",page:function(e){return l.a.createElement(oe,{header:"Crocodile",component:l.a.createElement(pr,e)})}},hr={link:"/tetris/singleplayer",label:"Singleplayer",description:"Play with your own",page:function(e){return l.a.createElement(oe,{header:"Tetris/singleplayer",component:l.a.createElement(ut,e)})}},dr={link:"/tetris/multiplayer",label:"Multiplayer",description:"Play vs your friend",page:function(e){return l.a.createElement(oe,{header:"Tetris/multiplayer",component:l.a.createElement(xt,e)})}},br=[gr,Er,fr,hr,dr],Cr=[Er,fr],Br=[hr,dr],Or=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.location.pathname,a=e.header,r=e.sub_header,o=e.topAction,i=e.topComponent;return l.a.createElement(N.a,{position:"static",color:"primary",className:t.appBar},l.a.createElement(S.a,{className:t.toolbar},n!==gr.link&&l.a.createElement(T.a,{component:g.b,to:gr.link,onClick:o},l.a.createElement(x.a,null)),l.a.createElement(_.a,{variant:"h6",className:t.title},a&&"".concat(a),r&&"/".concat(r)),o&&l.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:o},"Leave"),i&&i))}}]),t}(s.PureComponent),vr=Object(v.b)((function(e){var t=e.app;return{header:t.header,sub_header:t.sub_header,topAction:t.topAction,topComponent:t.topComponent}}))(Object(y.a)((function(e){var t;return{appBar:{},title:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",display:"block",width:0},toolbar:(t={},Object(k.a)(t,e.breakpoints.down("sm"),{minHeight:"auto"}),Object(k.a)(t,e.breakpoints.up("sm"),{minHeight:mt}),t)}}))(Or)),jr=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.status;return n?l.a.createElement(ce,{className:t.footerToolbar},n):null}}]),t}(s.PureComponent),Ir=Object(v.b)((function(e){return{status:(e.crocodile.room||{}).appStatusText}}))(Object(y.a)((function(e){return{footerToolbar:{textAlign:"center",paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),justifyContent:"center"}}}))(jr));var Qr=function(e){function t(e){var n,r;return Object(a.a)(this,t),(r=Object(o.a)(this,Object(i.a)(t).call(this,e))).doGameFinish=function(){var e=r.props,t=e.isResultModalOpen,n=e.showResults;t||n()},r.doTetrisActionButton=function(e){var t=e.button_action;t&&t in r.props&&r.props[t]()},r.handleSocket=function(e){var t=e.target,n=e.action,a=e.args;t in r.listen_map&&n in r.listen_map[t]&&r.listen_map[t][n](a)},r.socketOnConnect=function(){var e=r.context;(0,r.props.socketConnect)(e.id)},r.socketOnDisconnect=function(){var e=r.context;(0,r.props.socketDisconnect)(e.id)},r.socketOnMessage=function(e){var t=e.message_type,n=e.message;(0,r.props.enqueueSnackbar)(n,{variant:t,autoHideDuration:1500})},r.listen_map=(n={},Object(k.a)(n,"COMMON_ACTIONS",{SOCKET_MESSAGE:r.socketOnMessage}),Object(k.a)(n,"GAME_TETRIS",{ON_GAME:e.updateOpponent,DO_BUTTON_ACTION:r.doTetrisActionButton,DO_GAME_DISCONNECT:e.socketGameDisconnect,DO_GAME_FINISH:r.doGameFinish}),Object(k.a)(n,"GAME_CROCODILE",{LOBBY_UPDATE_CONFIG:e.updateConfigCrocodile,UPDATE_ROOM_LIST:e.updateRoomList,UPDATE_ROOM:e.updateRoom}),n),r}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.context;e.on("connect",this.socketOnConnect),e.on("disconnect",this.socketOnDisconnect),e.on("SOCKET_CHANNEL",this.handleSocket)}},{key:"componentWillUnmount",value:function(){var e=this.context;e.off("connect",this.socketOnConnect),e.off("disconnect",this.socketOnDisconnect),e.off("SOCKET_CHANNEL",this.handleSocket)}},{key:"render",value:function(){return null}}]),t}(s.PureComponent);Qr.contextType=b;var wr=Object(v.b)((function(e){return{isResultModalOpen:e.tetris.isResultModalOpen}}),(function(e){return{socketConnect:function(t){return e(function(e){return{type:"CONNECT",payload:{id:e}}}(t))},socketDisconnect:function(t){return e(function(e){return{type:"DISCONNECT",payload:{id:e}}}(t))},updateOpponent:function(t){return e(function(e){return{type:"UPDATE_OPPONENT",payload:{opponent:e}}}(t))},resetConfig:function(){return e({type:"RESET_CONFIG"})},showResults:function(){return e({type:"SHOW_RESULTS"})},socketGameReset:function(){return e(jt())},socketGameDisconnect:function(){return e((function(e){e({type:"STOP_GAME"}),e({type:"RESET_CONFIG"})}))},startNewGame:function(){return e({type:"START_NEW_GAME"})},startMoving:function(){return e({type:"START_MOVING"})},stopMoving:function(){return e({type:"STOP_MOVING"})},stopGame:function(){return e({type:"STOP_GAME"})},startNewGameAndMove:function(){return e(ze())},updateConfigCrocodile:function(t){return e(Kn(t))},updateRoomList:function(t){return e(Fn(t))},updateRoom:function(t){return e(function(e){return{type:"UPDATE_ROOM",payload:{room:e}}}(t))}}}))(Object(d.withSnackbar)(Qr)),yr=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props.classes;return l.a.createElement(g.a,null,l.a.createElement(wr,null),l.a.createElement(w.a,{container:!0,direction:"column",alignItems:"stretch",justify:"space-between",className:e.layout},l.a.createElement(w.a,{item:!0,className:e.header},l.a.createElement(E.a,{component:function(e){return l.a.createElement(vr,e)}})),l.a.createElement(w.a,{item:!0,className:e.body},l.a.createElement(E.c,null,br.map((function(e,t){var n=e.link,a=(e.label,e.page);return l.a.createElement(E.a,{key:t,exact:!0,path:n,component:a})})),l.a.createElement(E.a,{path:"/:errorPage",component:function(e){return l.a.createElement(mr,e)}}))),l.a.createElement(w.a,{item:!0,className:e.footer},l.a.createElement(Ir,null))))}}]),t}(s.PureComponent),kr=Object(y.a)((function(){return{layout:{backgroundColor:"#191922",width:"100%",height:"100%",overflow:"hidden"},header:{backgroundColor:"#121216"},body:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1},footer:{backgroundColor:"#121216"}}}))(yr),Nr=Object(s.createContext)(),Sr=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(n=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).showSnackbar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=n.props.enqueueSnackbar;a(e,{variant:t,autoHideDuration:2500})},n.validateResponse=function(e,t){e&&e.error?n.showSnackbar(e.error,"error"):t&&"function"===typeof t&&t(e)},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(Nr.Provider,{value:this.showSnackbar},l.a.createElement(It.Provider,{value:this.validateResponse},l.a.createElement(kr,null)))}}]),t}(s.PureComponent),Tr=Object(d.withSnackbar)(Sr),_r={header:null,sub_header:null,topAction:null,topComponent:null};var Rr={isConnected:!1,id:null};var Mr,xr={nickname:"",step:"LOBBY_STEP_NICKNAME"},Gr={room:{},rooms:[],config:Object(At.a)({},xr)};var Pr=function(e,t){var n=t.table,a=t.figure,r=t.rotation;return!!Lr(e,r,t)&&tt(n,rt(a[r],e))},Lr=function(e,t,n){var a=Object(Ne.a)(e,2),r=a[0],o=a[1],i=n.figure,c=r+i[t].length,s=o+i[t][0].length;return c<=24&&s<=10},Dr=function(e){return e.table[3].find((function(e){return 1===e}))},Ur=function(e,t){var n=t.position,a=Object(Ne.a)(n,2),r=a[0],o=a[1],i=Yr(e,t);return i<0?[r,o+i]:[r,o]},Yr=function(e,t){var n=t.position,a=t.table,r=t.figure,o=n[1];return a[0].length-(o+r[e][0].length)},Hr=function(e,t,n){var a=n.table;return!!Lr(e,t,n)&&tt(a,zr(n))},zr=function(e){var t=e.figure,n=e.position,a=e.rotation,r=t[a].length,o=t[a][0].length,i=r>o?r:o;return rt(Array.from({length:i},(function(){return Array.from({length:i},(function(){return 1}))})),n)},Wr={nickname:"",type:"TYPE_CLIENT",step:"LOBBY_STEP_NICKNAME"},Kr={table:function(e){var t=[[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,0,0,1,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,1,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];return qe(t,[e.length-t.length,0],e)}(Ve(10,24)),rotation:$e(),rotationNext:$e(),figure:Xe(),figureNext:Xe(),position:Se,speed:250,score:0,isPause:!0,isGameRunning:!1,isResultModalOpen:!1,moveAction:null,key_map:null,opponent:null,config:Object(At.a)({},Wr)},Fr=(Mr={},Object(k.a)(Mr,Te,(function(e){return function(e){return e.position[1]-1>=0}(e)})),Object(k.a)(Mr,_e,(function(e){return function(e){var t=e.position,n=e.rotation,a=e.table,r=e.figure;return t[1]<a[0].length-r[n][0].length}(e)})),Mr),Jr=null,Vr=function(e,t){clearInterval(Jr),Jr=setInterval((function(){t.moveAction()}),e)};var qr=Object(j.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP":return Object(At.a)({},e,{},t.payload);case"CLEAN_APP":return _r;default:return e}},socket:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CONNECT":return(e=JSON.parse(JSON.stringify(t))).isConnected=!0,e.id=n.payload.id,e;case"DISCONNECT":return Rr;default:return t}},crocodile:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_ROOM":e=Object(Je.cloneDeep)(t);var a=n.payload.room;return e.room=Object(At.a)({},e.room,{},a,{appStatusText:a.status?Wn[a.status](a):null}),e;case"CLEAN_ROOM":return Object(At.a)({},Gr,{config:Object(At.a)({},t.config,{step:"LOBBY_STEP_ROOM_SELECTION"})});case"UPDATE_CONFIG":return Object(At.a)({},t,{config:Object(At.a)({},t.config,{},n.payload.config)});case"RESET_CONFIG":return Object(At.a)({},t,{config:Object(At.a)({},xr,{nickname:t.config.nickname})});case"UPDATE_ROOM_LIST":return Object(At.a)({},t,{rooms:n.payload.rooms});default:return t}},tetris:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SPEED":return Object(At.a)({},e,{speed:t.payload.speed});case"MOVE_FIGURE":var n=t.payload.direction,a=Ge[n](e.position);return n in Fr&&!Fr[n](e,t.payload.rotation)?e:Pr(a,e)?Object(At.a)({},e,{position:a}):e;case"START_NEW_GAME":return clearInterval(Jr),Object(At.a)({},e,{isResultModalOpen:!1,table:Ve(10,24),figure:Xe(),figureNext:Xe(),position:Se,rotation:$e(),rotationNext:$e(),score:0,isPause:!1,isGameRunning:!0,speed:250});case"STOP_GAME":return clearInterval(Jr),Object(At.a)({},Kr,{moveAction:e.moveAction,key_map:e.key_map,config:e.config,opponent:e.opponent});case"START_MOVING":return Vr(e.speed,e),Object(At.a)({},e,{isPause:!1});case"STOP_MOVING":return clearInterval(Jr),Object(At.a)({},e,{isPause:!0});case"MOVE_FIGURE_DOWN":var r=Ge[Me](e.position);if(Pr(r,e))return Object(At.a)({},e,{position:r});if(Dr(e))return clearInterval(Jr),Object(At.a)({},e,{isResultModalOpen:!0,isGameRunning:!1,speed:250});var o=qe(e.figure[e.rotation],e.position,e.table),i=nt(o),c=e.score+i.length,s=e.speed;return i.length&&(o=at(o,i),s=ot(c,e.speed)),Vr(s,e),Object(At.a)({},e,{table:o,score:c,speed:s,figure:e.figureNext,figureNext:Xe(),position:Se,rotation:e.rotationNext,rotationNext:$e()});case"ROTATE_FIGURE":var l=t.payload.getRotation(e.rotation),u=Ur(l,e);return Hr(u,l,e)?Object(At.a)({},e,{position:u,rotation:l}):e;case"STORE_ACTION_DATA":return Object(At.a)({},e,{moveAction:t.payload.moveFunc,key_map:t.payload.key_map});case"CLOSE_RESULTS":return Object(At.a)({},e,{isResultModalOpen:!1});case"UPDATE_OPPONENT":return Object(At.a)({},e,{opponent:Object(At.a)({},e.opponent,{},t.payload.opponent)});case"UPDATE_CONFIG":return Object(At.a)({},e,{config:Object(At.a)({},e.config,{},t.payload.config)});case"RESET_CONFIG":return Object(At.a)({},e,{opponent:null,config:Object(At.a)({},Wr,{nickname:e.config.nickname})});case"SHOW_RESULTS":return clearInterval(Jr),Object(At.a)({},e,{isResultModalOpen:!0,isGameRunning:!1});default:return e}}}),$r=O()("https://gamehub-server.herokuapp.com/"),Xr=Object(j.d)(qr,Object(j.a)(C.a,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SOCKET_CHANNEL";return function(n){return function(n){return function(a){return a.meta&&"META_SOCKET_EMIT"===a.meta.remote?new Promise((function(n,r){e.emit(t,a,(function(e){n(e)}))})):n(a)}}}}($r))),Zr=function(e){function t(){return Object(a.a)(this,t),Object(o.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return l.a.createElement(g.a,null,l.a.createElement(v.a,{store:Xr},l.a.createElement(h.a,{theme:Q},l.a.createElement(d.SnackbarProvider,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"}},l.a.createElement(f.a,null),l.a.createElement(b.Provider,{value:$r},l.a.createElement(E.a,{component:Tr}))))))}}]),t}(s.PureComponent);A.a.render(l.a.createElement(Zr,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");p?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):m(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):m(t,e)}))}}()}},[[228,1,2]]]);
//# sourceMappingURL=main.4e1f0b22.chunk.js.map