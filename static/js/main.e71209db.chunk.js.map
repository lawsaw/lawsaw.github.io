{"version":3,"sources":["serviceWorker.js","helpers/SocketContext.js","helpers/theme.js","components/RouteLink.js","components/Resizer.js","components/TextInput.js","actions/app.js","components/Page.js","components/Toolbar.js","components/Results.js","components/Modal.js","components/Stepper.js","games/tetris/Root.js","games/tetris/helpers/constants.js","actions/tetris.js","games/tetris/helpers/etc.js","games/tetris/Engine.js","games/tetris/SinglePlayer.js","helpers/constants.js","socket/helper.js","games/tetris/lobby/Lobby.js","helpers/etc.js","socket/tetris.js","helpers/ResponseContext.js","games/tetris/lobby/Nickname.js","games/tetris/lobby/TypeSelecting.js","games/tetris/lobby/Connection.js","games/tetris/MultiPlayer.js","games/tetris/components/Score.js","games/tetris/components/Toolbar.js","games/tetris/components/Preview.js","games/tetris/components/Grid.js","games/tetris/components/Fab.js","games/tetris/components/Nickname.js","games/tetris/components/PlayerInterface.js","games/tetris/single/Score.js","games/tetris/single/Preview.js","games/tetris/opponent/Field.js","games/tetris/opponent/Score.js","games/tetris/opponent/Toolbar.js","games/tetris/opponent/Preview.js","games/tetris/opponent/Opponent.js","games/tetris/single/Toolbar.js","games/tetris/single/Field.js","games/tetris/single/MobileBar.js","games/tetris/single/Single.js","games/tetris/Arena.js","pages/Home.js","games/crocodile/helpers/constants.js","actions/crocodile.js","games/crocodile/lobby/Lobby.js","socket/crocodile.js","games/crocodile/lobby/Nickname.js","games/crocodile/helpers/etc.js","games/crocodile/lobby/RoomSelection.js","games/crocodile/game/Game.js","games/crocodile/game/GameInterface.js","games/crocodile/game/GameWatcher.js","games/crocodile/game/GamePainter.js","games/crocodile/game/PlayersBar.js","games/crocodile/game/RoomInfoBar.js","games/crocodile/game/Winner.js","games/crocodile/game/Chat.js","games/crocodile/game/ChatWindow.js","games/crocodile/game/Paint.js","games/crocodile/game/Screen.js","games/crocodile/game/Desk.js","games/crocodile/game/DeskToolbar.js","games/crocodile/game/ColorPicker.js","games/crocodile/game/ThumbClicker.js","games/crocodile/Root.js","pages/Tetris.js","pages/Crocodile.js","pages/Page404.js","helpers/routes.js","containers/Header.js","containers/Footer.js","IO.js","actions/socket.js","Root.js","helpers/SnackbarContext.js","App.js","reducers/app.js","reducers/socket.js","reducers/crocodile.js","reducers/tetris.js","reducers/index.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","onUpdate","onSuccess","catch","error","SocketContext","createContext","theme","createMuiTheme","palette","type","label","to","component","path","exact","children","React","createElement","Button","disabled","Link","Resizer","props","setSizeForce","size","getSize","setSize","setTimeout","listener","getting","clearTimeout","timer","setType1","parentWidth","k","width","spacing","height","setType2","parentHeight","ref","current","parentElement","parentOffsetWidth","offsetWidth","parentOffsetHeight","offsetHeight","setState","updateChildren","cloneElement","resizer","createRef","this","addEventListener","removeEventListener","classes","className","Box","cx","style","PureComponent","withStyles","position","minWidth","minHeight","transition","withTheme","TextInput","handleSubmit","e","onSubmit","preventDefault","onChange","placeholder","value","Paper","root","square","form","InputBase","input","autoFocus","IconButton","iconButton","onClick","Send","marginLeft","flex","padding","display","alignItems","setApp","app","payload","Page","header","connect","dispatch","obj","Toolbar","toolbar","paddingTop","paddingBottom","paddingLeft","paddingRight","Results","data","onClose","title","length","open","isCancel","Table","table","TableHead","map","index","TableRow","key","row","TableCell","align","border","StyledDialog","paper","Dialog","Modal","handleClose","buttons","maxWidth","DialogTitle","disableTypography","Typography","variant","titleLabel","DialogContent","dividers","content","DialogActions","actions","color","flexGrow","Stepper","isBack","isNext","onBack","onNext","stepper","button","marginTop","margin","Root","Container","container","direction","justify","TETRIS_ROUTES","link","description","LinkCustom","forwardRef","RouteLink","CardContent","gutterBottom","item","zeroMinWidth","xs","md","lg","Card","CardActionArea","POSITION","COLS","MOVE_DIRECTION","ROTATION_CIRCLE","MOVE_STEP_MAP","KEY_MAP","SYMBOLS","FIGURES","startNewGameAndMove","startMoving","updateConfig","generateGrid","hor","ver","Array","from","merge","figure","grid","rowPosition","colPosition","cloneDeep","rowIndex","forEach","figureRow","figureRowIndex","splice","replacementItem","replacementIndex","col","getRandomRotation","rotation","Math","ceil","random","getRandomFigure","figures","Object","keys","floor","getPrevRotationPosition","indexOf","getNextRotationPosition","hasTablesConflict","table1","table2","find","tableRow","tableRowIndex","tableCol","tableColIndex","getAllFullRowsIndexes","reduce","a","i","push","cleanTableFromFullRows","fullRows","cleanRow","newTable","rowToClean","rowToCleanIndex","arr","top","slice","bottom","getFigureMap","getScoreOptimalSpeed","score","speed","pressingRule","key_map","lock","inner","outer","start","code","timer_type","func","period","setInterval","doPeriodic","finish","onPressDown","onPressUp","onTouchDown","onTouchUp","clearInterval","Engine","handleKeyPressDown","isKeyPressingAllowed","pressingFunc","handleKeyPressUp","rotateFigure","moveFigure","moveFigureDown","storeActionData","document","store","tetris","isGameRunning","isPause","getRotation","moveFunc","SinglePlayer","results","closeResults","isOpponent","isResultModalOpen","HEADER_HEIGHT","ACTION_INIT","meta","remote","socketUpdateUser","action","Lobby","steps","game","step","lobby","preventMultipleSubmit","isLocked","callback","isTouchDevice","createEvent","socketMakeConnection","server_id","socketGameReset","ResponseContext","Nickname","handleNicknameChange","target","nickname","submitNickname","async","validateResponse","context","socketValidateNickname","response","handleNicknameSubmit","handleNicknameSubmitDecorator","contextType","TypeSelecting","handleType","handleBack","handleNext","RadioGroup","FormControlLabel","control","Radio","Connection","renderStepTypeClient","handleClientChange","handleClientSubmit","renderStepTypeServer","Consumer","socket","id","submitClient","step_type_map","MultiPlayer","resetConfig","is_lobby","socketDisconnect","stopGame","prevProps","prevState","snapshot","results_data","socketGameFinish","isConnected","opponent","DATA","Score","lineHeight","item_with_opponent","item_without_opponent","flexWrap","flexDirection","breakpoints","up","down","Preview","preview","isPreview","Grid","isField","field","fieldPreview","fieldInner","hidden","colIndex","colPreview","defaultProps","overflow","left","right","justifyContent","flexShrink","borderColor","backgroundColor","opacity","pointerEvents","Fab","icon","typograpy","name","textOverflow","whiteSpace","PlayerInterface","toolbarClassName","playerInterface","figureNext","rotationNext","Field","previewComponent","labelClassName","Opponent","OPPONENT_COL_SIZE","handleAction","socketSendButtonAction","doAction","handleStart","currentTarget","blur","handleStartMoving","handleStopMoving","handleStopGame","renderPlayPauseButtons","isPlayButton","isPauseButton","topComponent","is_tablet","isWidthDown","col_size_opponent","labelSingle","labelOpponent","toolbarOpponent","startNewGame","stopMoving","options","button_action","withWidth","fontSize","isEqual","socketSendMove","isWidthUp","ARROWS_MAP","MobileBar","init","ref_map","ReactDOM","findDOMNode","listener_map","onDown","setRuleDecorator","handleMouseDown","onUp","handleMouseUp","handleContextMenu","is_loaded","mobileBar","arrows","touchButton","arrow","arrow_rightCenter","zIndex","ARROW_SIZE","marginRight","marginBottom","borderRadius","arrow_left","arrow_right","arrow_down","arrow_center","Single","Arena","is_mobile","col_size","layout","body","withRouter","alignSelf","Home","GAMES","card","actionArea","home","STATUS_MAP","countdown","painter","winner","updateRoomList","rooms","handleBackToNickname","onBackToNickname","room","crocodile","lobbyContent","RoomSelection","handleNewRoomModalOpen","isNewRoomModal","handleJoinRoom","room_name","socketJoinRoom","stepTitle","ArrowBack","Add","listArea","List","list","players","ListItem","ListItemText","primary","listItemText","Divider","divider","Game","task","isPainter","wrap","paint","paintWork","paintHeader","chat","painterMode","flexBasis","Interface","GameInterface","handleLeaveRoom","is_left","cleanRoom","socketLeaveRoom","sub_header","topAction","roomName","interface","GameWatcher","getTask","word","painter_name","GamePainter","handleWordSelect","socketWordSelect","handleConvertToImage","canvas","socketPaint","toDataURL","onWordSelect","words","onConvertToImage","wordList","wordButton","image","PlayersBar","handleClick","playerId","painterId","arrayOfPlayers","Chip","RoomInfoBar","roomInfoBar","fontWeight","Winner","winner_name","Chat","onChat","message","socketChat","handleChat","lockFuncChat","handleMessageChange","handleLikeMessage","socketMessageMark","wrapChat","wrapMessages","onLikeMessage","wrapSubmit","textField","elevation","THUMB_MAP","thumb","thumbUp","thumbDown","MessageClient","sender","likeStatus","thumbClicker","MessageServer","messageServer","ChatWindow","scrollWindowToBottom","windowRef","scrollHeight","clientHeight","scrollTop","lenta","player","windowInner","likeHandler","overflowX","overflowY","fade","grey","cardActive","cursor","light","textAlign","typography","pxToRem","verticalAlign","main","Paint","lineOptions","lineWidth","lineJoin","lineCap","strokeStyle","handlerColorSelect","getCoords","changedTouches","getBoundingClientRect","x","clientX","y","clientY","updateLine","option","makeStep","lineTo","stroke","getContext","UndoCanvas","enableUndo","setListeners","saveUpdateSizeFunc","f","doUpdateSize","updateSize","disableUndo","temp","getImageData","putImageData","savedSize","handleMouseMove","handleTouchStart","handleTouchEnd","handleTouchMove","removeListeners","pointStart","pointEnd","isDrawing","putTag","beginPath","moveTo","pointMove","handleUndo","undoTag","handleRedo","redoTag","handleClear","clearRect","handleSizeChange","onColorSelect","onUndo","onRedo","onClear","onSizeChange","screen","innerRef","desk","Screen","src","alt","note","Desk","setInit","isInited","BUTTON_MAP","DeskToolbar","renderButton","iconButtons","colorPicker","Slider","aria-labelledby","valueLabelDisplay","marks","min","max","sizeSlider","order","COLORS","ColorPicker","handleChange","hex","triangle","colors","picker","background","boxShadow","ThumbClicker","ToggleButtonGroup","exclusive","ToggleButton","isRoomDefined","status","Tetris","Crocodile","Page404","HOME","page","TETRIS","CROCODILE","TETRIS_SINGLE","TETRIS_ONLINE","ROUTES","Header","pathname","AppBar","appBar","Footer","footerToolbar","appStatusText","doGameFinish","showResults","doTetrisActionButton","handleSocket","args","listen_map","socketOnConnect","socketConnect","socketOnDisconnect","socketOnMessage","message_type","enqueueSnackbar","autoHideDuration","updateOpponent","socketGameDisconnect","updateConfigCrocodile","updateRoom","IO","on","off","withSnackbar","footer","SnackbarContext","App","showSnackbar","Provider","initialState","initialConfig","hasFigureRightToMove","isPositionInArea","rowLimit","colLimit","isEndGame","ROWS_HIDDEN","getFigureRotatePosition","figureOutsideSpace","getFigureOutsideSpace","hasFigureRightToRotate","getFigureFullGrid","rows","cols","smile","renderDemoHouse","moveAction","MOVE_RULE","isFigureCloseToLeft","isFigureCloseToRight","setTimer","mainReducer","combineReducers","newState","JSON","parse","stringify","positionNext","positionNext2","tableWithFigure","scoreNew","speedNew","rotationNew","positionNew","socketIOClient","createStore","applyMiddleware","thunk","channelName","next","Promise","resolve","reject","emit","apiRequest","Comp","maxSnack","anchorOrigin","vertical","horizontal","CssBaseline","render","getElementById","URL","process","href","origin","fetch","headers","contentType","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.e71209db.chunk.js","sourcesContent":["// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import { createContext } from 'react';\n\nconst SocketContext = createContext();\n\nexport default SocketContext;","import { createMuiTheme } from '@material-ui/core/styles';\n\nconst theme = createMuiTheme({\n    palette: {\n        type: 'dark',\n    },\n});\n\nexport default theme;","import React from 'react';\nimport { Route, Link } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\n\nexport default ({ label, to, component }) => {\n    return (\n        <Route\n            path={to}\n            exact={true}\n            children={({match}) => (\n                React.createElement(\n                    component || Button,\n                    {\n                        to,\n                        disabled: Boolean(match),\n                        component: Link,\n                        children: label,\n                    }\n                )\n\n            )}\n        />\n    );\n}\n","import React, { PureComponent, createRef, cloneElement } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Box } from \"@material-ui/core\";\n\nconst styles = () => ({\n    resizer: {\n        position: 'absolute',\n        minWidth: 50,\n        minHeight: 50,\n        transition: 'all 0.3s ease 0s',\n    },\n});\n\nclass Resizer extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.ref = createRef();\n        this.getting = true;\n        this.spacing = props.theme.spacing(2);\n        this.state = {\n            width: '100%',\n            height: '100%',\n        }\n    }\n\n    componentDidMount() {\n        this.setSizeForce();\n        window.addEventListener('resize', this.listener, false);\n    }\n\n    setSizeForce = () => {\n        let size = this.getSize();\n        this.setSize(size);\n        setTimeout(() => {\n            let size = this.getSize();\n            this.setSize(size);\n        }, 200);\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.listener, false);\n    }\n\n    listener = () => {\n        //console.log('listener');\n        if(!this.getting) {\n            clearTimeout(this.timer);\n        };\n        this.getting = false;\n        this.timer = setTimeout(() => {\n            this.getting = true;\n            let size = this.getSize();\n            //console.log(size);\n            this.setSize(size);\n        }, 250);\n    }\n\n    setType1 = (parentWidth) => {\n        const { k } = this.props;\n        let width = parentWidth - this.spacing;\n        let height = width * k;\n        return {\n            width,\n            height,\n        }\n    }\n\n    setType2 = (parentHeight) => {\n        const { k } = this.props;\n        let height = parentHeight - this.spacing;\n        let width = height / k;\n        return {\n            width,\n            height,\n        }\n    }\n\n    getSize = () => {\n        if(!this.ref.current) return false;\n        let { parentElement: { offsetWidth: parentOffsetWidth, offsetHeight: parentOffsetHeight } } = this.ref.current;\n        let size;\n        if(parentOffsetWidth < parentOffsetHeight) {\n            //console.log('type 1');\n            size = this.setType1(parentOffsetWidth);\n            if(size.height > parentOffsetHeight) size = this.setType2(parentOffsetHeight);\n        } else if(parentOffsetWidth > parentOffsetHeight) {\n            //console.log('type 2');\n            size = this.setType2(parentOffsetHeight);\n            if(size.width > parentOffsetWidth) size = this.setType1(parentOffsetWidth);\n        } else {\n            //console.log('type 3');\n        }\n        return size;\n    }\n\n    setSize = (size) => {\n        if(!size) return false;\n        let { width, height } = size;\n        this.setState(() => ({\n            width,\n            height,\n        }));\n    }\n\n    updateChildren = () => {\n        const { children } = this.props;\n        const { width, height } = this.state;\n        return cloneElement(\n            children,\n            {\n                resizer: {\n                    width,\n                    height,\n                },\n            },\n        );\n    }\n\n    render() {\n        const { classes, className } = this.props;\n        const { width, height } = this.state;\n        return (\n            <Box\n                className={cx(classes.resizer, className)}\n                ref={this.ref}\n                style={{\n                    width: `${width}px`,\n                    height: `${height}px`,\n                }}\n            >\n                {this.updateChildren()}\n            </Box>\n        )\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(Resizer);","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Paper, InputBase, IconButton } from \"@material-ui/core\";\nimport { Send } from '@material-ui/icons';\n\nconst styles = theme => ({\n    root: {\n       position: 'relative',\n    },\n    input: {\n        marginLeft: theme.spacing(2),\n        flex: 1,\n    },\n    iconButton: {\n        //padding: 20,\n    },\n    form: {\n        padding: '2px 4px',\n        display: 'flex',\n        alignItems: 'center',\n        width: '100%',\n    },\n});\n\nclass TextInput extends PureComponent {\n\n    // constructor(props) {\n    //     super(props);\n    //     this.lockFunc = lockFunc();\n    // }\n\n    handleSubmit = (e) => {\n        const { onSubmit } = this.props;\n        e.preventDefault();\n        onSubmit(e)\n    }\n\n    render() {\n        const { classes, onChange, placeholder, value, className, ...props } = this.props;\n        return (\n            <Paper\n                className={cx(classes.root, className)}\n                square={true}\n                {...props}\n            >\n                <form\n                    className={classes.form}\n                    onSubmit={this.handleSubmit}\n                >\n                    <InputBase\n                        className={classes.input}\n                        placeholder={placeholder}\n                        value={value}\n                        onChange={onChange}\n                        autoFocus\n                    />\n                    <IconButton\n                        className={classes.iconButton}\n                        onClick={this.handleSubmit}\n                    >\n                        <Send />\n                    </IconButton>\n                </form>\n            </Paper>\n        )\n    }\n}\n\nexport default withStyles(styles)(TextInput);","export const SET_APP = 'SET_APP';\nexport function setApp(app) {\n    return {\n        type: SET_APP,\n        payload: app,\n    };\n}\n\nexport const CLEAN_APP = 'CLEAN_APP';\nexport function cleanApp() {\n    return {\n        type: CLEAN_APP,\n    };\n}","import { PureComponent } from 'react';\nimport { connect } from \"react-redux\";\nimport { setApp } from '../actions/app';\n\nclass Page extends PureComponent {\n\n    componentDidMount() {\n        const { setApp, header } = this.props;\n        setApp({ header });\n    }\n\n    componentWillUnmount() {\n        const { setApp } = this.props;\n        setApp({\n            header: null,\n        });\n    }\n\n    render() {\n        const { component } = this.props;\n        return component\n    }\n\n}\n\nexport default connect(\n    null,\n    dispatch => {\n        return {\n            setApp: obj => dispatch(setApp(obj)),\n        }\n    }\n)(Page);\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Toolbar as ToolbarMaterial } from \"@material-ui/core\";\n\nconst styles = theme => ({\n    toolbar: {\n        paddingTop: 0,\n        paddingBottom: 0,\n        paddingLeft: theme.spacing(2),\n        paddingRight: theme.spacing(2),\n        minHeight: 'auto',\n    },\n});\n\nclass Toolbar extends PureComponent {\n\n    render() {\n        const { classes, className, children, ...props } = this.props;\n        return (\n            <ToolbarMaterial\n                className={cx(classes.toolbar, className)}\n                {...props}\n            >\n                {children}\n            </ToolbarMaterial>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Toolbar);\n","import React, { PureComponent } from 'react';\nimport { withStyles, Table, TableHead, TableCell, TableRow } from \"@material-ui/core\";\nimport { Modal } from './';\n\nconst styles = () => ({\n    table: {\n        //maxWidth: 300,\n    },\n    row: {\n        '&:only-child': {\n            '& > *': {\n                border: 'none',\n            }\n        }\n    },\n});\n\nclass Results extends PureComponent {\n\n    render() {\n        const { classes, data, onClose, title=\"Game results\" } = this.props;\n        return data && data.length ? (\n            <Modal\n                open={true}\n                title={title}\n                isCancel={true}\n                onClose={onClose}\n            >\n                <Table className={classes.table}>\n                    <TableHead>\n                        {\n                            data.map(({ label, value }, index) => (\n                                <TableRow\n                                    key={index}\n                                    className={classes.row}\n                                >\n                                    <TableCell>{label}: </TableCell>\n                                    <TableCell align=\"right\">{value}</TableCell>\n                                </TableRow>\n                            ))\n                        }\n                    </TableHead>\n                </Table>\n            </Modal>\n        ) : null;\n    }\n}\n\nexport default withStyles(styles)(Results);","import React, { PureComponent } from 'react';\nimport CloseIcon from '@material-ui/icons/Close';\nimport { withStyles, Dialog, DialogTitle, DialogActions, DialogContent, IconButton, Typography, Button } from \"@material-ui/core\";\n\nconst styles = theme => ({\n    title: {\n        display: 'flex',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n    },\n    titleLabel: {\n        flexGrow: 1,\n    },\n    content: {\n        padding: theme.spacing(2),\n    },\n    actions: {\n        padding: theme.spacing(2),\n    },\n});\n\nconst StyledDialog = withStyles(() => ({\n    paper: {\n        width: '100%',\n    },\n}))(Dialog);\n\nclass Modal extends PureComponent {\n\n    handleClose = () => {\n        const { onClose } = this.props;\n        onClose();\n    }\n\n    render() {\n        const { classes, open, title, isCancel, buttons, children } = this.props;\n        return (\n            <StyledDialog\n                open={open}\n                onClose={this.handleClose}\n                maxWidth=\"xs\"\n            >\n                <DialogTitle\n                    disableTypography\n                    className={classes.title}\n                >\n                    <Typography\n                        variant=\"h6\"\n                        className={classes.titleLabel}\n                    >\n                        {title}\n                    </Typography>\n                    {\n                        isCancel ? (\n                            <IconButton onClick={this.handleClose}>\n                                <CloseIcon />\n                            </IconButton>\n                        ) : null\n                    }\n                </DialogTitle>\n                <DialogContent\n                    dividers\n                    className={classes.content}\n                >\n                    {children}\n                </DialogContent>\n                <DialogActions\n                    className={classes.actions}\n                >\n                    {\n                        buttons ? buttons.map(({ label, ...props }, index) => (\n                            <Button\n                                key={index}\n                                {...props}\n                            >\n                                {label}\n                            </Button>\n                        )) : null\n                    }\n                    {\n                        isCancel ? (\n                            <Button\n                                variant=\"contained\"\n                                onClick={this.handleClose}\n                                color=\"secondary\"\n                            >\n                                Cancel\n                            </Button>\n                        ) : null\n                    }\n                </DialogActions>\n            </StyledDialog>\n        );\n    }\n}\n\nexport default withStyles(styles)(Modal);","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Box, Button } from \"@material-ui/core\";\n\nconst styles = theme => ({\n    stepper: {\n        marginTop: theme.spacing(3),\n        width: 250,\n    },\n    button: {\n        margin: theme.spacing(1),\n    }\n});\n\nclass Stepper extends PureComponent {\n\n    render() {\n        const { classes, className, isBack=true, isNext=true, onBack, onNext, ...props } = this.props;\n        return (\n            <Box\n                className={cx(classes.stepper, className)}\n                {...props}\n            >\n                {\n                    isBack ? (\n                        <Button\n                            variant='contained'\n                            onClick={onBack}\n                            className={classes.button}\n                        >\n                            Back\n                        </Button>\n                    ) : null\n                }\n                {\n                    isNext ? (\n                        <Button\n                            variant='contained'\n                            onClick={onNext}\n                            className={classes.button}\n                        >\n                            Next\n                        </Button>\n                    ) : null\n                }\n            </Box>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Stepper);\n","import React, { PureComponent, forwardRef } from 'react';\nimport { Container, Grid, CardContent, Typography, CardActionArea, Card } from \"@material-ui/core\";\nimport { RouteLink } from '../../components';\nimport { TETRIS_ROUTES } from '../../helpers/routes';\n\nclass Root extends PureComponent {\n\n    render() {\n        return (\n            <Container>\n                <Grid\n                    container\n                    direction=\"row\"\n                    justify=\"center\"\n                    alignItems=\"stretch\"\n                    spacing={1}\n                >\n                    {\n                        TETRIS_ROUTES.map(({ label, link, description }) => {\n                            let LinkCustom = forwardRef((props, ref) => (\n                                <RouteLink\n                                    to={link}\n                                    label={\n                                        <CardContent>\n                                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                                                {label}\n                                            </Typography>\n                                            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                                {description}\n                                            </Typography>\n                                        </CardContent>\n                                    }\n                                    {...props}\n                                />\n                            ));\n                            let cardActionArea = props => (\n                                <CardActionArea\n                                    {...props}\n                                />\n                            );\n                            return (\n                                <Grid\n                                    key={link}\n                                    item\n                                    zeroMinWidth\n                                    xs={6}\n                                    md={4}\n                                    lg={3}\n                                >\n                                    <Card>\n                                        <LinkCustom\n                                            component={cardActionArea}\n                                        />\n                                    </Card>\n                                </Grid>\n                            )\n                        })\n                    }\n                </Grid>\n            </Container>\n        )\n    }\n\n}\n\nexport default Root;\n","export const COL_SIZE = 30;\nexport const COL_SIZE_MOBILE = 20;\nexport const ROWS_HIDDEN = 4; //TODO it must be like the biggest figure\nexport const ROWS = 20 + ROWS_HIDDEN;\nexport const COLS = 10;\nexport const SPEED = 250;\nexport const SPEED_STEP = 10;\nexport const SPEED_RAISE_FOR_SCORE = 1;\nexport const POSITION = [0, COLS/2-1];\n\nexport const MOVE_DIRECTION_LEFT = 'MOVE_DIRECTION_LEFT';\nexport const MOVE_DIRECTION_RIGHT = 'MOVE_DIRECTION_RIGHT';\nexport const MOVE_DIRECTION_UP = 'MOVE_DIRECTION_UP';\nexport const MOVE_DIRECTION_DOWN = 'MOVE_DIRECTION_DOWN';\n\nexport const MOVE_DIRECTION = {\n    LEFT: MOVE_DIRECTION_LEFT,\n    RIGHT: MOVE_DIRECTION_RIGHT,\n    UP: MOVE_DIRECTION_UP,\n    DOWN: MOVE_DIRECTION_DOWN,\n};\n\nexport const ROTATION_CIRCLE = [MOVE_DIRECTION.UP, MOVE_DIRECTION.RIGHT, MOVE_DIRECTION.DOWN, MOVE_DIRECTION.LEFT];\n\nexport const MOVE_STEP_MAP = {\n    [MOVE_DIRECTION.DOWN]: ([row, col]) => ([row + 1, col]),\n    [MOVE_DIRECTION.LEFT]: ([row, col]) => ([row, col - 1]),\n    [MOVE_DIRECTION.RIGHT]: ([row, col]) => ([row, col + 1]),\n};\n\nexport const LOBBY_STEP_NICKNAME = 'LOBBY_STEP_NICKNAME';\nexport const LOBBY_STEP_TYPE_SELECTING = 'LOBBY_STEP_TYPE_SELECTING';\nexport const LOBBY_STEP_CONNECTION = 'LOBBY_STEP_CONNECTION';\n\nexport const KEY_MAP = {\n    LEFT: 'ArrowLeft',\n    RIGHT: 'ArrowRight',\n    UP: 'ArrowUp',\n    DOWN: 'ArrowDown',\n    SPACE: 'Space',\n};\n\nexport const SYMBOLS = {\n    T: 'T',\n    Z: 'Z',\n    S: 'S',\n    Q: 'Q',\n    J: 'J',\n    L: 'L',\n    I: 'I',\n};\n\nexport const FIGURES = {\n    [SYMBOLS.T]: {\n        [MOVE_DIRECTION.UP]: [\n            [0,1,0],\n            [1,1,1],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [1,1,1],\n            [0,1,0],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [0,1],\n            [1,1],\n            [0,1],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [1,0],\n            [1,1],\n            [1,0],\n        ],\n    },\n    [SYMBOLS.Z]: {\n        [MOVE_DIRECTION.UP]: [\n            [0,1],\n            [1,1],\n            [1,0],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [0,1],\n            [1,1],\n            [1,0],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [1,1,0],\n            [0,1,1],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [1,1,0],\n            [0,1,1],\n        ],\n    },\n    [SYMBOLS.S]: {\n        [MOVE_DIRECTION.UP]: [\n            [1,0],\n            [1,1],\n            [0,1],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [1,0],\n            [1,1],\n            [0,1],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [0,1,1],\n            [1,1,0],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [0,1,1],\n            [1,1,0],\n        ],\n    },\n    [SYMBOLS.Q]: {\n        [MOVE_DIRECTION.UP]: [\n            [1,1],\n            [1,1],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [1,1],\n            [1,1],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [1,1],\n            [1,1],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [1,1],\n            [1,1],\n        ],\n    },\n    [SYMBOLS.J]: {\n        [MOVE_DIRECTION.UP]: [\n            [1,1],\n            [1,0],\n            [1,0],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [0,1],\n            [0,1],\n            [1,1],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [1,0,0],\n            [1,1,1],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [1,1,1],\n            [0,0,1],\n        ],\n    },\n    [SYMBOLS.L]: {\n        [MOVE_DIRECTION.UP]: [\n            [1,1],\n            [0,1],\n            [0,1],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [1,0],\n            [1,0],\n            [1,1],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [1,1,1],\n            [1,0,0],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [0,0,1],\n            [1,1,1],\n        ],\n    },\n    [SYMBOLS.I]: {\n        [MOVE_DIRECTION.UP]: [\n            [1],\n            [1],\n            [1],\n            [1],\n        ],\n        [MOVE_DIRECTION.DOWN]: [\n            [1],\n            [1],\n            [1],\n            [1],\n        ],\n        [MOVE_DIRECTION.LEFT]: [\n            [1,1,1,1],\n        ],\n        [MOVE_DIRECTION.RIGHT]: [\n            [1,1,1,1],\n        ],\n    }\n};","export const SET_SPEED = 'SET_SPEED';\nexport function setSpeed(speed) {\n    return {\n        type: SET_SPEED,\n        payload: {\n            speed\n        },\n    };\n}\n\nexport const MOVE_FIGURE = 'MOVE_FIGURE';\nexport function moveFigure(direction) {\n    return {\n        type: MOVE_FIGURE,\n        payload: {\n            direction,\n        },\n    };\n}\n\nexport const MOVE_FIGURE_DOWN = 'MOVE_FIGURE_DOWN';\nexport function moveFigureDown() {\n    return {\n        type: MOVE_FIGURE_DOWN,\n    };\n}\n\nexport const START_NEW_GAME = 'START_NEW_GAME';\nexport function startNewGame() {\n    return {\n        type: START_NEW_GAME,\n    };\n}\n\nexport const START_NEW_GAME_AND_MOVE = 'START_NEW_GAME_AND_MOVE';\nexport function startNewGameAndMove() {\n    return dispatch => {\n        dispatch( startNewGame() );\n        dispatch( startMoving() );\n    }\n}\n\nexport const STOP_GAME = 'STOP_GAME';\nexport function stopGame() {\n    return {\n        type: STOP_GAME,\n    };\n}\n\nexport const START_MOVING = 'START_MOVING';\nexport function startMoving() {\n    return {\n        type: START_MOVING,\n    };\n}\n\nexport const STOP_MOVING = 'STOP_MOVING';\nexport function stopMoving() {\n    return {\n        type: STOP_MOVING,\n    };\n}\n\nexport const ROTATE_FIGURE = 'ROTATE_FIGURE';\nexport function rotateFigure(getRotation) {\n    return {\n        type: ROTATE_FIGURE,\n        payload: {\n            getRotation\n        },\n    };\n}\n\nexport const STORE_ACTION_DATA = 'STORE_ACTION_DATA';\nexport function storeActionData(moveFunc, key_map) {\n    return {\n        type: STORE_ACTION_DATA,\n        payload: {\n            moveFunc,\n            key_map\n        },\n    };\n}\n\nexport const CLOSE_RESULTS = 'CLOSE_RESULTS';\nexport function closeResults(func) {\n    return {\n        type: CLOSE_RESULTS,\n    };\n}\n\nexport const UPDATE_OPPONENT = 'UPDATE_OPPONENT';\nexport function updateOpponent(opponent) {\n    return {\n        type: UPDATE_OPPONENT,\n        payload: {\n            opponent,\n        },\n    };\n}\n\nexport const UPDATE_CONFIG = 'UPDATE_CONFIG';\nexport function updateConfig(config) {\n    return {\n        type: UPDATE_CONFIG,\n        payload: {\n            config,\n        },\n    };\n}\n\nexport const RESET_CONFIG = 'RESET_CONFIG';\nexport function resetConfig() {\n    return {\n        type: RESET_CONFIG,\n    };\n}\n\nexport const SHOW_RESULTS = 'SHOW_RESULTS';\nexport function showResults() {\n    return {\n        type: SHOW_RESULTS,\n    };\n}","import { cloneDeep } from \"lodash\";\nimport { ROTATION_CIRCLE, FIGURES, COLS, ROWS, SPEED_RAISE_FOR_SCORE, SPEED, SPEED_STEP, KEY_MAP } from './constants';\n\nexport function generateGrid(hor, ver) {\n    return Array.from({length: ver}, () => Array.from({length: hor}, () => 0));\n}\n\nexport function merge(figure, [rowPosition, colPosition], grid) {\n    //console.log({figure, rowPosition, colPosition, grid})\n    let table = cloneDeep(grid);\n    return table.map((row, rowIndex) => {\n        if(rowIndex === rowPosition) {\n            figure.forEach((figureRow, figureRowIndex) => {\n                let replacement = table[rowIndex + figureRowIndex].splice(colPosition, figureRow.length, ...figureRow);\n                replacement.forEach((replacementItem, replacementIndex) => {\n                    if(replacementItem !== 0) {\n                        let tableRowTarget = rowIndex + figureRowIndex;\n                        table[tableRowTarget][colPosition+replacementIndex] = 1;\n                    }\n                })\n            });\n        }\n        return row.map(col => col);\n    });\n}\n\nexport function renderDemoHouse(table) {\n    // let houseHuy = [\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,0,1,1,1,1,0,0,0],\n    //     [0,0,0,1,1,1,1,0,0,0],\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,0,0,1,1,0,0,0,0],\n    //     [0,0,1,1,1,1,1,1,0,0],\n    //     [0,0,1,1,1,1,1,1,0,0],\n    //     [0,0,1,1,1,1,1,1,0,0],\n    // ];\n    let smile = [\n        [0,0,1,0,0,0,0,1,0,0],\n        [0,1,1,1,0,0,1,1,1,0],\n        [0,0,1,0,0,0,0,1,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n        [0,0,1,0,0,0,0,1,0,0],\n        [0,0,0,1,0,0,1,0,0,0],\n        [0,0,0,0,1,1,0,0,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n        [0,0,0,0,0,0,0,0,0,0],\n    ];\n    let newGrid = merge(smile, [table.length-smile.length, 0], table);\n    return newGrid;\n}\n\nexport function getRandomRotation() {\n    let rotation = Math.ceil(Math.random() * (ROTATION_CIRCLE.length-1));\n    return ROTATION_CIRCLE[rotation];\n}\n\nexport function getRandomFigure() {\n    let figures = Object.keys(FIGURES);\n    let figure = Math.floor(Math.random() * (figures.length));\n    return FIGURES[figures[figure]];\n}\n\nexport function getPrevRotationPosition(figure) {\n    let { length } = ROTATION_CIRCLE;\n    let index = ROTATION_CIRCLE.indexOf(figure);\n    return index === 0 ? ROTATION_CIRCLE[length-1] : ROTATION_CIRCLE[index-1];\n}\n\nexport function getNextRotationPosition(figure) {\n    let { length } = ROTATION_CIRCLE;\n    let index = ROTATION_CIRCLE.indexOf(figure);\n    return index === length-1 ? ROTATION_CIRCLE[0] : ROTATION_CIRCLE[index+1];\n}\n\nexport function hasTablesConflict(table1, table2) {\n    return !table1.find((tableRow, tableRowIndex) => tableRow.find((tableCol, tableColIndex) => tableCol === table2[tableRowIndex][tableColIndex] && tableCol === 1));\n}\n\nexport function getAllFullRowsIndexes(table) {\n    return table.reduce(function(a, row, i) {\n        let isRowFull = row.reduce((a, col) => a + col) === COLS;\n        if(isRowFull) a.push(i);\n        return a;\n    }, []);\n}\n\nexport function cleanTableFromFullRows(table, fullRows) {\n    let cleanRow = Array.from({ length: COLS }, () => 0);\n    let newTable = cloneDeep(table);\n    fullRows.forEach((rowToClean, rowToCleanIndex, arr) => {\n        let top = newTable.slice(0, rowToClean);\n        let bottom = newTable.slice(arr[rowToCleanIndex]+1, newTable.length);\n        newTable = [cleanRow, ...top, ...bottom];\n    })\n    return newTable;\n}\n\nexport function getFigureMap(figure, position) {\n    let cleanGrid = generateGrid(COLS, ROWS);\n    return merge(figure, position, cleanGrid);\n}\n\nexport function getScoreOptimalSpeed(score, speed) {\n    for(let i = 1; i < speed; i++) if(score >= SPEED_RAISE_FOR_SCORE*i && score < SPEED_RAISE_FOR_SCORE*i+SPEED_RAISE_FOR_SCORE && speed !== SPEED-i*SPEED_STEP) {\n        speed -= SPEED_STEP;\n    }\n    return speed;\n}\n\nexport function pressingRule(key_map) {\n\n    let lock = {\n        inner: false,\n        outer: false,\n    };\n    let timer = null;\n\n    let doPeriodic = (func, code, timer_type) => {\n        if(lock.inner) return false;\n        let is_rotate_key = (code === KEY_MAP.UP) || (code === KEY_MAP.DOWN);\n        let period = is_rotate_key ? 150 : 75;\n        lock.inner = true;\n        if(!lock.outer) func();\n        if(timer_type === 'interval') {\n            timer = setInterval(() => {\n                func();\n                lock.inner = false;\n            }, period);\n        } else {\n            timer = setTimeout(() => {\n                func();\n                lock.inner = false;\n            }, period);\n        }\n    };\n\n    let start = (code, timer_type) => {\n        if(code in key_map) {\n            doPeriodic(key_map[code], code, timer_type);\n        }\n        if(!lock.outer) lock.outer = true;\n    };\n\n    let finish = () => {\n        lock.inner = false;\n        lock.outer = false;\n    }\n\n    let onPressDown = (code) => {\n        start(code, 'timeout');\n    };\n\n    let onPressUp = (code) => {\n        if(code in key_map) {\n            clearTimeout(timer);\n            finish();\n        }\n    };\n\n    let onTouchDown = (code) => {\n        start(code, 'interval');\n    };\n\n    let onTouchUp = (code) => {\n        if(code in key_map) {\n            clearInterval(timer);\n            finish();\n        }\n    };\n\n    return {\n        onPressDown,\n        onPressUp,\n        onTouchDown,\n        onTouchUp,\n    };\n\n}","import { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { MOVE_DIRECTION, KEY_MAP } from './helpers/constants';\nimport { storeActionData, moveFigure, moveFigureDown, rotateFigure } from '../../actions/tetris';\nimport { getPrevRotationPosition, getNextRotationPosition, pressingRule } from './helpers/etc';\n\nclass Engine extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.key_map = {\n            [KEY_MAP.UP]:    () => props.rotateFigure(getPrevRotationPosition),\n            [KEY_MAP.DOWN]:  () => props.rotateFigure(getNextRotationPosition),\n            [KEY_MAP.LEFT]:  () => props.moveFigure(MOVE_DIRECTION.LEFT),\n            [KEY_MAP.RIGHT]: () => props.moveFigure(MOVE_DIRECTION.RIGHT),\n            [KEY_MAP.SPACE]: () => props.moveFigureDown(),\n        };\n        this.pressingFunc = pressingRule(this.key_map);\n    }\n\n    componentDidMount() {\n        const { storeActionData, moveFigureDown } = this.props;\n        storeActionData(moveFigureDown, this.key_map);\n        document.addEventListener('keydown', this.handleKeyPressDown);\n        document.addEventListener('keyup', this.handleKeyPressUp);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('keydown', this.handleKeyPressDown);\n        document.removeEventListener('keyup', this.handleKeyPressUp);\n    }\n\n    handleKeyPressDown = (e) => {\n        const { code } = e;\n        const { isKeyPressingAllowed } = this.props;\n        if(isKeyPressingAllowed) this.pressingFunc.onPressDown(code);\n    }\n\n    handleKeyPressUp = (e) => {\n        const { code } = e;\n        const { isKeyPressingAllowed } = this.props;\n        if(isKeyPressingAllowed) this.pressingFunc.onPressUp(code);\n    }\n\n    render() {\n        return null\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { isGameRunning, isPause, key_map } = store.tetris;\n        let isKeyPressingAllowed = !isPause && isGameRunning;\n        return {\n            key_map,\n            isKeyPressingAllowed,\n        }\n    },\n    dispatch => {\n        return {\n            moveFigure: direction => { dispatch(moveFigure(direction)) },\n            moveFigureDown: () => { dispatch(moveFigureDown()) },\n            rotateFigure: getRotation => { dispatch(rotateFigure(getRotation)) },\n            storeActionData: (moveFunc, key_map) => { dispatch(storeActionData(moveFunc, key_map)) },\n        }\n    }\n)(Engine);","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { Results } from '../../components';\nimport { closeResults } from '../../actions/tetris';\nimport { Arena } from './';\n\nclass SinglePlayer extends PureComponent {\n\n    render() {\n        const { results, closeResults } = this.props;\n        return (\n            <Fragment>\n               <Arena isOpponent={false} />\n                {\n                    results ? <Results data={results} onClose={closeResults} /> : null\n                }\n            </Fragment>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { isResultModalOpen, score } = store.tetris;\n        return {\n            results: isResultModalOpen ? [{label: 'Your score', value: score}] : null,\n        }\n    },\n    dispatch => {\n        return {\n            closeResults: () => { dispatch(closeResults()) },\n        }\n    }\n)((SinglePlayer));\n","//export const SOCKET_SERVER = 'http://localhost:3005/';\n//export const SOCKET_SERVER = 'http://192.168.100.158:3005/';\n//export const SOCKET_SERVER = 'https://lawsaw-crocodile.herokuapp.com/';\nexport const SOCKET_SERVER = 'https://gamehub-server.herokuapp.com/';\n\nexport const SOCKET_CHANNEL = 'SOCKET_CHANNEL';\n\nexport const COMMON_ACTIONS = 'COMMON_ACTIONS';\nexport const GAME_TETRIS = 'GAME_TETRIS';\nexport const GAME_CROCODILE = 'GAME_CROCODILE';\n\nexport const META_SOCKET_EMIT = 'META_SOCKET_EMIT';\n\nexport const HEADER_HEIGHT = {\n    'MIN': 50,\n    'MAX': 60,\n};\n\n","import { COMMON_ACTIONS, META_SOCKET_EMIT } from '../helpers/constants';\n\nconst ACTION_INIT = {\n    type: COMMON_ACTIONS,\n    meta: { remote: META_SOCKET_EMIT },\n};\n\nexport const UPDATE_USER = 'UPDATE_USER';\nexport function socketUpdateUser(data) {\n    return {\n        action: UPDATE_USER,\n        ...data,\n        ...ACTION_INIT,\n    };\n}","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { Nickname, TypeSelecting, Connection } from './';\nimport { socketUpdateUser } from \"../../../socket/helper\";\nimport { GAME_TETRIS } from \"../../../helpers/constants\";\nimport { LOBBY_STEP_NICKNAME, LOBBY_STEP_TYPE_SELECTING, LOBBY_STEP_CONNECTION } from \"../helpers/constants\";\n\nconst styles = () => ({\n    lobby: {\n        position: 'relative',\n    },\n});\n\nclass Lobby extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.steps = {\n            [LOBBY_STEP_NICKNAME]: <Nickname />,\n            [LOBBY_STEP_TYPE_SELECTING]: <TypeSelecting />,\n            [LOBBY_STEP_CONNECTION]: <Connection />,\n        };\n    }\n\n    componentDidMount() {\n        const { socketUpdateUser } = this.props;\n        socketUpdateUser({\n           game: GAME_TETRIS,\n        });\n    }\n\n    render() {\n        const { classes, step } = this.props;\n        return (\n            <Box\n                className={classes.lobby}\n            >\n                {\n                    step in this.steps ? this.steps[step] : step\n                }\n            </Box>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            step: store.tetris.config.step,\n        }\n    },\n    dispatch => {\n      return {\n          socketUpdateUser: data => dispatch( socketUpdateUser(data) ),\n      }\n    }\n)(withStyles(styles)(Lobby));","import { SOCKET_CHANNEL, META_SOCKET_EMIT } from './constants';\n\nexport function getHeightFromWidth(widthNew, width, height) {\n    return ( widthNew * height ) / width;\n}\n\nexport function getWidthFromHeight(heightNew, width, height) {\n    return ( heightNew * width ) / height;\n}\n\nexport function preventMultipleSubmit() {\n    let isLocked = false;\n    function func(callback) {\n        if(!isLocked) {\n            isLocked = true;\n            callback();\n            setTimeout(() => {\n                isLocked = false;\n            }, 750);\n        }\n    }\n    return func;\n}\n\nexport function socketRequest(socket, request) {\n    socket.emit();\n}\n\nexport function socketCrocodileRequest(socket, action, request) {\n    socket.emit();\n}\n\n\nexport function createSocketEmitMiddleware(socket, channelName=SOCKET_CHANNEL) {\n    // return store => {\n    //     return next => {\n    //         return action => {\n    //             if(action.meta && action.meta.remote === META_SOCKET_EMIT) {\n    //                 // console.log({\n    //                 //     emit: action\n    //                 // });\n    //                 socket.emit(channelName, action);\n    //             }\n    //             return next(action);\n    //         };\n    //     };\n    // };\n}\n\nexport function apiRequest(socket, channelName=SOCKET_CHANNEL) {\n    return store => {\n        return next => {\n            return action => {\n                if(action.meta && action.meta.remote === META_SOCKET_EMIT) {\n                    return new Promise((resolve, reject) => {\n                        socket.emit(channelName, action, response => {\n                            resolve(response);\n                            // if(!response.error) resolve(response);\n                            // else reject(response.error);\n                        });\n                    });\n                }\n                return next(action);\n            };\n        };\n    };\n}\n\nexport function isTouchDevice() {\n    try {\n        document.createEvent(\"TouchEvent\");\n        return true;\n    } catch (e) {\n        return false;\n    }\n}","import { GAME_TETRIS, META_SOCKET_EMIT } from '../helpers/constants';\nimport { stopGame, resetConfig } from \"../actions/tetris\";\n\nconst ACTION_INIT = {\n    type: GAME_TETRIS,\n    meta: { remote: META_SOCKET_EMIT },\n};\n\nexport const MAKE_CONNECTION = 'MAKE_CONNECTION';\nexport function socketMakeConnection(server_id) {\n    return {\n        action: MAKE_CONNECTION,\n        server_id,\n        ...ACTION_INIT,\n    };\n}\n\nexport const SEND_MOVE = 'SEND_MOVE';\nexport function socketSendMove(data) {\n    return {\n        action: SEND_MOVE,\n        ...data,\n        ...ACTION_INIT,\n    };\n}\n\nexport const VALIDATE_NICKNAME = 'VALIDATE_NICKNAME';\nexport function socketValidateNickname(nickname) {\n    return {\n        action: VALIDATE_NICKNAME,\n        nickname,\n        ...ACTION_INIT\n    };\n}\n\nexport const SEND_BUTTON_ACTION = 'SEND_BUTTON_ACTION';\nexport function socketSendButtonAction(button_action) {\n    return {\n        action: SEND_BUTTON_ACTION,\n        button_action,\n        ...ACTION_INIT\n    };\n}\n\nexport const DISCONNECT = 'DISCONNECT';\nexport function socketDisconnect() {\n    return {\n        action: DISCONNECT,\n        ...ACTION_INIT\n    };\n}\n\nexport const GAME_FINISH = 'GAME_FINISH';\nexport function socketGameFinish() {\n    return {\n        action: GAME_FINISH,\n        ...ACTION_INIT\n    };\n}\n\nexport const GAME_RESET = 'GAME_RESET';\nexport function socketGameReset() {\n    return dispatch => {\n        dispatch( stopGame() );\n        dispatch( socketMakeConnection() );\n    };\n}\n\nexport const GAME_DISCONNECT = 'GAME_DISCONNECT';\nexport function socketGameDisconnect() {\n    return dispatch => {\n        dispatch( stopGame() );\n        dispatch( resetConfig() );\n    };\n}\n","import { createContext } from 'react';\n\nconst ResponseContext = createContext();\n\nexport default ResponseContext;","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { TextInput } from '../../../components';\nimport { preventMultipleSubmit } from '../../../helpers/etc';\nimport { socketValidateNickname} from '../../../socket/tetris';\nimport { updateConfig } from \"../../../actions/tetris\";\nimport ResponseContext from '../../../helpers/ResponseContext';\n\nclass Nickname extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.handleNicknameSubmitDecorator = preventMultipleSubmit();\n    }\n\n    handleNicknameChange = (e) => {\n        const { value } = e.target;\n        const { updateConfig } = this.props;\n        updateConfig({\n            nickname: value,\n        });\n    }\n\n    submitNickname = async () => {\n        const validateResponse = this.context;\n        const { nickname, updateConfig, socketValidateNickname } = this.props;\n        let response = await socketValidateNickname(nickname);\n        validateResponse(response, data => {\n            updateConfig(data);\n        });\n    }\n\n    handleNicknameSubmit = () => {\n        this.handleNicknameSubmitDecorator(this.submitNickname);\n    }\n\n    render() {\n        const { nickname } = this.props;\n        return (\n            <TextInput\n                onChange={this.handleNicknameChange}\n                onSubmit={this.handleNicknameSubmit}\n                placeholder=\"Enter your nickname\"\n                value={nickname}\n            />\n        )\n    }\n}\n\nNickname.contextType = ResponseContext;\n\nexport default connect(\n    store => {\n        return {\n            nickname: store.tetris.config.nickname,\n        }\n    },\n    dispatch => {\n        return {\n            updateConfig: config => dispatch( updateConfig(config) ),\n            socketValidateNickname: nickname => dispatch( socketValidateNickname(nickname) ),\n        }\n    }\n)(Nickname);","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box, Radio, RadioGroup, FormControlLabel } from '@material-ui/core';\nimport { updateConfig } from \"../../../actions/tetris\";\nimport { Stepper } from \"../../../components\";\nimport { LOBBY_STEP_NICKNAME, LOBBY_STEP_CONNECTION } from \"../helpers/constants\";\n\nconst styles = theme => ({\n    form: {\n        margin: theme.spacing(2),\n        width: 200,\n    },\n});\n\nconst TYPE_CLIENT = 'TYPE_CLIENT';\nconst TYPE_SERVER = 'TYPE_SERVER';\n\nclass TypeSelecting extends PureComponent {\n\n    handleType = (e) => {\n        const { value } = e.target;\n        const { updateConfig } = this.props;\n        updateConfig({\n            type: value,\n        });\n    }\n\n    handleBack = () => {\n        const { updateConfig } = this.props;\n        updateConfig({\n            step: LOBBY_STEP_NICKNAME,\n        })\n    }\n\n    handleNext = () => {\n        const { updateConfig } = this.props;\n        updateConfig({\n            step: LOBBY_STEP_CONNECTION,\n        })\n    }\n\n    render() {\n        const { classes, type } = this.props;\n        return (\n            <Box className={classes.form}>\n                <RadioGroup value={type} onChange={this.handleType}>\n                    <FormControlLabel value={TYPE_CLIENT} control={<Radio />} label=\"Client\" />\n                    <FormControlLabel value={TYPE_SERVER} control={<Radio />} label=\"Server\" />\n                </RadioGroup>\n                <Stepper\n                    onBack={this.handleBack}\n                    onNext={this.handleNext}\n                />\n            </Box>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            type: store.tetris.config.type,\n        }\n    },\n    dispatch => {\n        return {\n            updateConfig: config => dispatch( updateConfig(config) ),\n        }\n    }\n)(withStyles(styles)(TypeSelecting));","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box, Typography } from '@material-ui/core';\nimport SocketContext from '../../../helpers/SocketContext';\nimport { updateConfig } from \"../../../actions/tetris\";\nimport { TextInput, Stepper } from \"../../../components\";\nimport { preventMultipleSubmit } from \"../../../helpers/etc\";\nimport { socketMakeConnection } from '../../../socket/tetris';\nimport ResponseContext from '../../../helpers/ResponseContext';\nimport { LOBBY_STEP_TYPE_SELECTING } from \"../helpers/constants\";\n\nconst styles = theme => ({\n    form: {\n        margin: theme.spacing(2),\n        width: 200,\n    },\n});\n\nconst TYPE_CLIENT = 'TYPE_CLIENT';\nconst TYPE_SERVER = 'TYPE_SERVER';\n\nclass Connection extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.handleNicknameSubmitDecorator = preventMultipleSubmit();\n        this.step_type_map = {\n            [TYPE_CLIENT]: this.renderStepTypeClient,\n            [TYPE_SERVER]: this.renderStepTypeServer,\n        };\n        this.state = {\n            server_id: '',\n        }\n    }\n\n    renderStepTypeClient = () => {\n        const { server_id } = this.state;\n        return (\n            <Fragment>\n                <Typography>\n                    Your friend is ought to be server. Ask him to provide you his ID\n                </Typography>\n                <TextInput\n                    onChange={this.handleClientChange}\n                    onSubmit={this.handleClientSubmit}\n                    placeholder=\"Enter your friend's id\"\n                    value={server_id}\n                />\n            </Fragment>\n        )\n    }\n\n    renderStepTypeServer = () => {\n        return (\n            <SocketContext.Consumer>\n                {\n                    socket => (\n                        <Fragment>\n                            <Typography>\n                                Share your ID with your friend\n                            </Typography>\n                            <Typography>\n                                <code>\n                                    {socket.id}\n                                </code>\n                            </Typography>\n                        </Fragment>\n                    )\n                }\n            </SocketContext.Consumer>\n        )\n    }\n\n    handleClientChange = (e) => {\n        const { value } = e.target;\n        this.setState(() => ({\n            server_id: value,\n        }));\n    }\n\n    submitClient = async () => {\n        const validateResponse = this.context;\n        const { server_id } = this.state;\n        const { socketMakeConnection } = this.props;\n        let response = await socketMakeConnection(server_id);\n        validateResponse(response);\n    }\n\n    handleClientSubmit = () => {\n        this.handleNicknameSubmitDecorator(this.submitClient);\n    }\n\n    handleBack = () => {\n        const { updateConfig } = this.props;\n        updateConfig({\n            step: LOBBY_STEP_TYPE_SELECTING,\n        })\n    }\n\n    render() {\n        const { classes, type } = this.props;\n        return (\n            <Box className={classes.form}>\n                {\n                    this.step_type_map[type]()\n                }\n                <Stepper\n                    onBack={this.handleBack}\n                    onNext={this.submitClient}\n                    isNext={false}\n                />\n            </Box>\n        )\n    }\n}\n\nConnection.contextType = ResponseContext;\n\nexport default connect(\n    store => {\n        return {\n            type: store.tetris.config.type,\n        }\n    },\n    dispatch => {\n        return {\n            updateConfig: config => dispatch( updateConfig(config) ),\n            socketMakeConnection: server_id => dispatch( socketMakeConnection(server_id) ),\n        }\n    }\n)(withStyles(styles)(Connection));","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { Results } from '../../components';\nimport { Arena } from './';\nimport { Lobby } from './lobby';\nimport { resetConfig, stopGame, closeResults } from '../../actions/tetris';\nimport { socketDisconnect, socketGameFinish } from \"../../socket/tetris\";\n\nclass MultiPlayer extends PureComponent {\n\n    componentWillUnmount() {\n        const { resetConfig, is_lobby, socketDisconnect, stopGame } = this.props;\n        if(!is_lobby) {\n            console.log('make disconnect');\n            stopGame();\n            socketDisconnect();\n        }\n        resetConfig();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { results_data, socketGameFinish } = this.props;\n        if(results_data !== null) {\n            socketGameFinish();\n        }\n    }\n\n    render() {\n        const { isConnected, is_lobby, results_data, closeResults } = this.props;\n        return isConnected ? (\n            <Fragment>\n                {\n                    is_lobby ? <Lobby /> : <Arena />\n                }\n                {\n                    results_data ? <Results data={results_data.data} title={results_data.title} onClose={closeResults} /> : null\n                }\n            </Fragment>\n        ) : (\n            <Fragment>\n                no connected\n            </Fragment>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { isResultModalOpen, opponent, score, config } = store.tetris;\n        return {\n            isConnected: store.socket.isConnected,\n            is_lobby: opponent === null,\n            results_data: isResultModalOpen ? {\n                title: score > opponent.score ? 'You won!' : score < opponent.score ? 'You lost!' : 'Победила дружба!',\n                data: [{\n                    label: `You (${config.nickname}):`,\n                    value: score,\n                },{\n                    label: `Opponent (${opponent.nickname}):`,\n                    value: opponent.score,\n                }],\n            } : null,\n        }\n    },\n    dispatch => {\n        return {\n            resetConfig: () => dispatch( resetConfig() ),\n            stopGame: () => dispatch( stopGame() ),\n            socketDisconnect: () => dispatch( socketDisconnect() ),\n            socketGameFinish: () => dispatch( socketGameFinish() ),\n            closeResults: () => dispatch( closeResults() ),\n        }\n    }\n)(MultiPlayer);\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Typography, Box } from \"@material-ui/core\";\n\nconst styles = theme => ({\n    item: {\n        lineHeight: 1,\n        '&:not(:first-child)': {\n            marginTop: theme.spacing(0.5),\n        },\n    },\n});\n\nconst DATA = [\n    {\n        value: 'score',\n        label: 'Score',\n    },\n    {\n        value: 'speed',\n        label: 'Speed',\n    }\n];\n\nclass Score extends PureComponent {\n\n    render() {\n        const { classes, className } = this.props;\n        return (\n            <Box>\n                {\n                    DATA.map(({ value, label }, index) => (\n                        <Typography\n                            key={index}\n                            variant='h6'\n                            className={cx(classes.item, className)}\n                        >\n                            {label}: {this.props[value]}\n                        </Typography>\n                    ))\n                }\n            </Box>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Score);\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { connect } from 'react-redux';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { Toolbar as ToolbarComponent } from '../../../components';\n\nconst styles = theme => ({\n    toolbar: {\n        flexWrap: 'wrap',\n        flexDirection: 'column',\n        alignItems: 'stretch',\n        height: '100%',\n    },\n    item: {\n        display: 'flex',\n        alignItems: 'flex-start',\n    },\n    item_with_opponent: {\n        '&:not(:first-child)': {\n            [theme.breakpoints.up('sm')]: {\n                marginTop: theme.spacing(1),\n            },\n            [theme.breakpoints.down('xs')]: {\n                marginTop: theme.spacing(0.5),\n            },\n        },\n    },\n    item_without_opponent: {\n        '&:not(:first-child)': {\n            marginTop: theme.spacing(2),\n        },\n    },\n    score: {\n        //flexGrow: 1,\n    },\n});\n\nclass Toolbar extends PureComponent {\n\n    render() {\n        const { classes, data, isOpponent, className } = this.props;\n        return (\n            <ToolbarComponent\n                className={cx(classes.toolbar, className)}\n            >\n                {\n                    data.map((children, index) => children ? (\n                        <Box\n                            key={index}\n                            className={cx(classes.item, isOpponent ? classes.item_with_opponent : classes.item_without_opponent)}\n                        >\n                            {children}\n                        </Box>\n                    ) : null)\n                }\n            </ToolbarComponent>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { opponent } = store.tetris;\n        return {\n            isOpponent: opponent !== null,\n        }\n    },\n)(withStyles(styles)(Toolbar));\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles } from \"@material-ui/core\";\nimport { Grid } from './';\n\nconst styles = () => ({\n    preview: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n});\n\nclass Preview extends PureComponent {\n\n    render() {\n        const { preview, className, classes, ...props } = this.props;\n        return (\n            <Grid\n                grid={preview}\n                className={cx(classes.preview, className)}\n                isPreview={true}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Preview);\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Box } from \"@material-ui/core\";\n//import { fade } from '@material-ui/core/styles/colorManipulator';\nimport { ROWS_HIDDEN, ROWS, COLS, COL_SIZE } from '../helpers/constants';\n\nconst styles = () => ({\n    field: {\n        position: 'relative',\n        height:  props => ((ROWS - ROWS_HIDDEN) * props.size - (ROWS - ROWS_HIDDEN - 1)),\n        width: props => (COLS * props.size - COLS + 1),\n        overflow: 'hidden',\n        // '&$fieldPreview': {\n        //     height: props => (ROWS_HIDDEN * props.size),\n        //     width: props => (ROWS_HIDDEN * props.size),\n        // },\n    },\n    fieldPreview: {\n        height: props => (ROWS_HIDDEN * props.size),\n        width: props => (ROWS_HIDDEN * props.size),\n    },\n    fieldInner: {\n        position: 'absolute',\n        bottom: 0,\n        left: 0,\n        right: 0,\n        '$fieldPreview &': {\n            position: 'relative',\n        }\n    },\n    row: {\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'flex-start',\n        justifyContent: 'flex-start',\n        flexWrap: 'nowrap',\n        '&:not(:first-child)': {\n            marginTop: -1,\n        }\n    },\n    col: {\n        width: props => props.size,\n        height: props => props.size,\n        flexShrink: 0,\n        margin: 0,\n        //border: `1px solid ${fade('#999', 0.5)}`,\n        border: '1px solid #5a5a5a',\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexWrap: 'nowrap',\n        '&:not(:first-child)': {\n            marginLeft: -1,\n        },\n        '&$colPreview': {\n            borderColor: 'transparent',\n            '&$square': {\n                //borderColor: fade('#999', 0.5),\n                borderColor: '#5a5a5a',\n            },\n        },\n    },\n    square: {\n        backgroundColor: '#4050b5',\n    },\n    hidden: {\n        opacity: 0,\n        pointerEvents: 'none',\n    },\n    colPreview: {},\n});\n\nclass Grid extends PureComponent {\n\n    static defaultProps = {\n        size: COL_SIZE,\n    };\n\n    render() {\n        const { classes, grid, isField, isPreview, className } = this.props;\n        return (\n            <Box\n                className={cx(classes.field, isPreview && classes.fieldPreview, className)}\n            >\n                <Box\n                    className={classes.fieldInner}\n                >\n                    {\n                        grid ? grid.map((row, rowIndex) => (\n                            <Box\n                                key={rowIndex}\n                                className={cx(classes.row, isField && (rowIndex < ROWS_HIDDEN) && classes.hidden)}\n                            >\n                                {\n                                    row.map((col, colIndex) => (\n                                        <Box\n                                            key={colIndex}\n                                            className={cx(classes.col, col===1 && classes.square, isPreview && classes.colPreview)}\n                                        />\n                                    ))\n                                }\n                            </Box>\n                        )) : null\n                    }\n                </Box>\n            </Box>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Grid);\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Fab as FabMaterial } from \"@material-ui/core\";\n\nconst styles = () => ({\n    button: {},\n    typograpy: {\n        lineHeight: 1,\n    },\n});\n\nclass Fab extends PureComponent {\n\n    static defaultProps = {\n        icon: 'Add',\n    }\n\n    render() {\n        const { classes, className, icon, ...props } = this.props;\n        //let iconComponent = require(`@material-ui/icons/${icon}`);\n        return (\n            <FabMaterial\n                className={cx(classes.button, className)}\n                {...props}\n            >\n                {icon}\n            </FabMaterial>\n        )\n    }\n\n}\n\nexport default withStyles(styles)((Fab));\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Box, Typography } from \"@material-ui/core\";\n\nconst styles = () => ({\n    nickname: {\n        position: 'relative',\n        display: 'flex',\n        width: '100%',\n        alignItems: 'stretch',\n        justifyContent: 'stretch',\n    },\n    value: {\n        lineHeight: 1.1,\n        width: 0,\n        flexGrow: 1,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n    },\n});\n\nclass Nickname extends PureComponent {\n\n    render() {\n        const { classes, name, className } = this.props;\n        return (\n            <Box\n                className={classes.nickname}\n            >\n                <Typography\n                    variant='h6'\n                    className={cx(classes.value, className)}\n                >\n                    {name}\n                </Typography>\n            </Box>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Nickname);\n","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Box } from \"@material-ui/core\";\n\nconst styles = () => ({\n    playerInterface: {\n        display: 'flex',\n        alignItems: 'stretch',\n        justifyContent: 'center',\n    },\n    toolbar: {},\n});\n\nclass PlayerInterface extends PureComponent {\n\n    render() {\n        const { classes, className, toolbarClassName, field, toolbar } = this.props;\n        return (\n            <Box\n                className={cx(classes.playerInterface, className)}\n            >\n                {field}\n                <Box\n                    className={cx(classes.toolbar, toolbarClassName)}\n                >\n                    {toolbar}\n                </Box>\n            </Box>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(PlayerInterface);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Score as ScoreComponent } from '../components';\n\nclass Score extends PureComponent {\n\n    render() {\n        const { score, speed, ...props } = this.props;\n        return (\n            <ScoreComponent\n                score={score}\n                speed={speed}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            score: store.tetris.score,\n            speed: store.tetris.speed,\n        }\n    },\n)(Score);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Preview as PreviewComponent } from '../components';\n\nclass Preview extends PureComponent {\n\n    render() {\n        const { preview, ...props } = this.props;\n        return (\n            <PreviewComponent\n                preview={preview}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            preview: store.tetris.isGameRunning && store.tetris.figureNext[store.tetris.rotationNext],\n        }\n    },\n)(Preview);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Grid } from '../components';\n\nclass Field extends PureComponent {\n\n    render() {\n        const { grid, ...props } = this.props;\n        return (\n            <Grid\n                grid={grid}\n                isField={true}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { opponent } = store.tetris;\n        return {\n            grid: opponent.field && opponent.field.length ? opponent.field : store.tetris.table,\n        }\n    }\n)(Field);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Score as ScoreComponent } from '../components';\n\nclass Score extends PureComponent {\n\n    render() {\n        const { score, speed, ...props } = this.props;\n        return (\n            <ScoreComponent\n                score={score}\n                speed={speed}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            score: store.tetris.opponent.score,\n            speed: store.tetris.opponent.speed,\n        }\n    },\n)(Score);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from \"@material-ui/core\";\nimport { Toolbar as ToolbarComponent } from '../components';\nimport { Score } from './';\nimport { Nickname } from '../components';\n\nconst styles = () => ({\n\n});\n\nclass Toolbar extends PureComponent {\n\n    render() {\n        const { speed, nickname, previewComponent, classes, labelClassName, ...props } = this.props;\n        return (\n            <ToolbarComponent\n                data={[\n\n                    <Nickname\n                        name={nickname}\n                        className={labelClassName}\n                    />,\n\n                    <Score\n                        className={labelClassName}\n                    />,\n\n                    previewComponent,\n\n                ]}\n                {...props}\n            />\n\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { nickname } = store.tetris.opponent;\n        return {\n            nickname,\n        }\n    }\n)(withStyles(styles)(Toolbar));\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { Preview as PreviewComponent } from '../components';\n\nclass Preview extends PureComponent {\n\n    render() {\n        const { preview, ...props } = this.props;\n        return (\n            <PreviewComponent\n                preview={preview}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            preview: store.tetris.isGameRunning && store.tetris.opponent.preview,\n        }\n    },\n)(Preview);\n","import React, { PureComponent } from 'react';\nimport { withStyles } from \"@material-ui/core\";\nimport { PlayerInterface } from '../components';\nimport { Field, Toolbar, Preview } from './';\n\nconst styles = theme => ({\n    opponent: {\n        [theme.breakpoints.down('sm')]: {\n            position: 'absolute',\n            bottom: 0,\n        },\n    },\n});\n\nclass Opponent extends PureComponent {\n\n    render() {\n        const { classes, size, labelClassName, toolbarClassName } = this.props;\n        return (\n            <PlayerInterface\n                className={classes.opponent}\n                field={<Field size={size} />}\n                toolbar={(\n                    <Toolbar\n                        className={toolbarClassName}\n                        labelClassName={labelClassName}\n                        previewComponent={<Preview size={size} />}\n                    />\n                )}\n            />\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Opponent);\n","import React, { PureComponent, Fragment } from 'react';\nimport { withStyles } from \"@material-ui/core\";\nimport { connect } from 'react-redux';\nimport PlayArrow from '@material-ui/icons/PlayArrow';\nimport Stop from '@material-ui/icons/Stop';\nimport Pause from '@material-ui/icons/Pause';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\nimport { Toolbar as ToolbarComponent, Fab, Nickname } from '../components';\nimport { Score } from './';\nimport { startMoving, startNewGame, stopGame, stopMoving, startNewGameAndMove } from \"../../../actions/tetris\";\nimport { Opponent } from '../opponent';\nimport { ROWS, ROWS_HIDDEN } from \"../helpers/constants\";\nimport { setApp } from \"../../../actions/app\";\nimport { socketSendButtonAction, socketGameReset } from \"../../../socket/tetris\";\nimport ResponseContext from '../../../helpers/ResponseContext';\n\nconst OPPONENT_COL_SIZE = {\n    'MIN': 10,\n    'MAX': 17,\n};\n\nconst styles = theme => ({\n    button: {\n        '&:not(:first-child)': {\n            marginLeft: theme.spacing(1),\n        }\n    },\n    label: {\n        [theme.breakpoints.down('xs')]: {\n            fontSize: '0.7rem',\n        },\n    },\n    labelOpponent: {\n        [theme.breakpoints.down('sm')]: {\n            fontSize: '0.7rem',\n        },\n    },\n    labelSingle: {\n        [theme.breakpoints.down('xs')]: {\n            fontSize: '0.8rem',\n        }\n    },\n    toolbarOpponent: {\n        [theme.breakpoints.down('xs')]: {\n            position: 'absolute',\n            bottom: (ROWS - ROWS_HIDDEN) * OPPONENT_COL_SIZE.MIN - (ROWS - ROWS_HIDDEN - 2),\n            left: 0,\n            padding: 0,\n            height: 'auto',\n        },\n    }\n});\n\nclass Toolbar extends PureComponent {\n\n    componentDidMount() {\n        const { setApp } = this.props;\n        setApp({\n            topComponent: this.renderPlayPauseButtons(),\n        })\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { setApp, isGameRunning, isPlayButton, isPauseButton } = this.props;\n        if(isGameRunning !== prevProps.isGameRunning || isPlayButton !== prevProps.isPlayButton || isPauseButton !== prevProps.isPauseButton) {\n            setApp({\n                topComponent: this.renderPlayPauseButtons(),\n            })\n        }\n    }\n\n    componentWillUnmount() {\n        const { setApp } = this.props;\n        setApp({\n            topComponent: null,\n        })\n    }\n\n    handleAction = async (action) => {\n        const validateResponse = this.context;\n        const { isOpponent, socketSendButtonAction } = this.props;\n        let doAction = () => action in this.props && this.props[action]();\n        if(!isOpponent) doAction();\n        else {\n            let response = await socketSendButtonAction(action);\n            validateResponse(response, doAction);\n        }\n    }\n\n    handleStart = (e) => {\n        e.currentTarget.blur();\n        this.handleAction('startNewGameAndMove');\n    }\n\n    handleStartMoving = () => {\n        this.handleAction('startMoving');\n    }\n\n    handleStopMoving = () => {\n        this.handleAction('stopMoving');\n    }\n\n    handleStopGame = () => {\n        const action = this.props.isOpponent ? 'socketGameReset' : 'stopGame';\n        this.handleAction(action);\n    }\n\n    renderPlayPauseButtons = () => {\n        const { classes, isGameRunning, isPlayButton, isPauseButton } = this.props;\n        let button_size = 'small';\n        return (\n            <Fragment>\n                {\n                    isGameRunning ? (\n                        <Fragment>\n                            <Fab\n                                icon={<Stop />}\n                                size={button_size}\n                                onClick={this.handleStopGame}\n                                className={classes.button}\n                            />\n                            {\n                                isPlayButton && (\n                                    <Fab\n                                        icon={<PlayArrow />}\n                                        size={button_size}\n                                        onClick={this.handleStartMoving}\n                                        className={classes.button}\n                                    />\n                                )\n                            }\n                            {\n                                isPauseButton && (\n                                    <Fab\n                                        icon={<Pause />}\n                                        size={button_size}\n                                        onClick={this.handleStopMoving}\n                                        className={classes.button}\n                                    />\n                                )\n                            }\n                        </Fragment>\n                    ) : (\n                        <Fab\n                            icon={<PlayArrow />}\n                            size={button_size}\n                            onClick={this.handleStart}\n                        />\n                    )\n                }\n            </Fragment>\n        )\n    }\n\n    render() {\n        const { classes, nickname, previewComponent, isOpponent, width } = this.props;\n        let is_tablet = isWidthDown('sm', width);\n        let is_mobile = isWidthDown('xs', width);\n        let col_size_opponent = is_mobile ? OPPONENT_COL_SIZE.MIN : OPPONENT_COL_SIZE.MAX;\n        return (\n            <ToolbarComponent\n                data={[\n\n                    nickname && (\n                        <Nickname\n                            name={nickname}\n                            className={isOpponent ? classes.label : classes.labelSingle}\n                        />\n                    ),\n\n                    <Score\n                        className={isOpponent ? classes.label : classes.labelSingle}\n                    />,\n\n                    previewComponent,\n\n                    isOpponent && is_tablet && (\n                        <Opponent size={col_size_opponent} labelClassName={classes.labelOpponent} toolbarClassName={classes.toolbarOpponent} />\n                    )\n\n                ]}\n            />\n\n        )\n    }\n\n}\n\nToolbar.contextType = ResponseContext;\n\nexport default connect(\n    store => {\n        const { isGameRunning, isPause, opponent, config } = store.tetris;\n        return {\n            isGameRunning,\n            isPlayButton:  isGameRunning && isPause,\n            isPauseButton:  isGameRunning && !isPause,\n            nickname: opponent !== null && config.nickname,\n            isOpponent: opponent !== null,\n        }\n    },\n    dispatch => {\n        return {\n            startNewGame: () => { dispatch(startNewGame()) },\n            stopGame: () => { dispatch(stopGame()) },\n            startMoving: () => { dispatch(startMoving()) },\n            stopMoving: () => { dispatch(stopMoving()) },\n            startNewGameAndMove: () => { dispatch(startNewGameAndMove()) },\n            setApp: options => dispatch( setApp(options) ),\n            socketSendButtonAction: button_action => dispatch( socketSendButtonAction(button_action) ),\n            socketGameReset: () => dispatch( socketGameReset() ),\n        }\n    }\n)(withWidth()(withStyles(styles)(Toolbar)));\n","import React, { PureComponent } from 'react';\nimport { isEqual } from 'lodash';\nimport { connect } from 'react-redux';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\nimport { merge } from '../helpers/etc';\nimport { Grid } from '../components';\nimport { socketSendMove } from '../../../socket/tetris';\nimport { COL_SIZE, COL_SIZE_MOBILE } from \"../helpers/constants\";\n\nclass Field extends PureComponent {\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { isOpponent } = this.props;\n        if(isOpponent && !isEqual(this.props.field, prevProps.field)) {\n            const { socketSendMove, field, preview, speed, score } = this.props;\n            socketSendMove({\n                field,\n                preview,\n                speed,\n                score,\n            });\n        }\n    }\n\n    render() {\n        const { field, width, ...props } = this.props;\n        return (\n            <Grid\n                size={isWidthUp('sm', width) ? COL_SIZE : COL_SIZE_MOBILE}\n                grid={field}\n                isField={true}\n                {...props}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { opponent, isGameRunning, figureNext, rotationNext, figure, rotation, position, table, speed, score } = store.tetris;\n        return {\n            isOpponent: opponent !== null,\n            preview: isGameRunning && figureNext[rotationNext],\n            speed,\n            score,\n            field: figure\n                ? merge(figure[rotation], position, table)\n                : table,\n        }\n    },\n    dispatch => {\n        return {\n            socketSendMove: data => dispatch( socketSendMove(data) ),\n        }\n    }\n)(withWidth()(Field));\n","import React, { createRef, PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport cx from 'classnames';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowDown from '@material-ui/icons/KeyboardArrowDown';\nimport RotateLeft from '@material-ui/icons/RotateLeft';\nimport { connect } from 'react-redux';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { KEY_MAP } from '../helpers/constants';\nimport { Fab } from '../components';\nimport { pressingRule } from \"../helpers/etc\";\nimport { isTouchDevice } from \"../../../helpers/etc\";\n\nconst ARROW_SIZE = 60;\n\nconst styles = () => ({\n    mobileBar: {\n        position: 'relative',\n        display: 'flex',\n        flexWrap: 'nowrap',\n        flexDirection: 'row',\n        alignItems: 'flex-end',\n        justifyContent: 'space-between',\n        zIndex: 1,\n        height: ARROW_SIZE*2,\n    },\n    item: {\n        '&:first-child': {\n            marginLeft: ARROW_SIZE,\n        },\n        '&:last-child': {\n            marginRight: ARROW_SIZE,\n        },\n    },\n    arrows: {\n        position: 'relative',\n        width: ARROW_SIZE,\n        height: ARROW_SIZE,\n        marginTop: -ARROW_SIZE,\n        marginBottom: ARROW_SIZE,\n    },\n    touchButton: {\n        width: ARROW_SIZE,\n        height: ARROW_SIZE,\n        padding: 0,\n        minWidth: 'auto',\n    },\n    arrow: {\n        position: 'absolute',\n        borderRadius: '100%',\n    },\n    arrow_left: {\n        top: 0,\n        left: '-100%',\n    },\n    arrow_right: {\n        top: 0,\n        right: '-100%',\n    },\n    arrow_down: {\n        bottom: '-100%',\n    },\n    arrow_center: {\n        top: 0,\n        left: 0,\n    },\n    arrow_rightCenter: {\n        top: '50%',\n        right: '-100%',\n    },\n});\n\nconst ARROWS_MAP = [\n    {\n        icon: <KeyboardArrowLeft />,\n        action: KEY_MAP.LEFT,\n        position: 'left',\n    },{\n        icon: <KeyboardArrowRight />,\n        action: KEY_MAP.RIGHT,\n        position: 'right',\n    },{\n        icon: <KeyboardArrowDown />,\n        action: KEY_MAP.SPACE,\n        position: 'down',\n    }\n];\n\nclass MobileBar extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.ref_map = {\n            [KEY_MAP.LEFT]: createRef(),\n            [KEY_MAP.RIGHT]: createRef(),\n            [KEY_MAP.SPACE]: createRef(),\n            [KEY_MAP.UP]: createRef(),\n        }\n        this.listener_map = {};\n        this.pressingFunc = null;\n        this.is_loaded = false;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(!this.is_loaded && this.props.key_map !== null) {\n            this.init();\n            this.is_loaded = true;\n        }\n    }\n\n    componentWillUnmount() {\n        for(let code in this.ref_map) {\n            let button = ReactDOM.findDOMNode(this.ref_map[code].current);\n            button.removeEventListener('mousedown', this.listener_map[code].onDown, false);\n            button.removeEventListener('touchstart', this.listener_map[code].onDown, false);\n            button.removeEventListener('mouseup', this.listener_map[code].onUp, false);\n            button.removeEventListener('touchend', this.listener_map[code].onUp, false);\n            button.removeEventListener('touchcancel', this.listener_map[code].onUp, false);\n            button.removeEventListener('contextmenu', this.handleContextMenu, false);\n        }\n    }\n\n    init = () => {\n        const { key_map } = this.props;\n        for(let code in this.ref_map) {\n            let button = ReactDOM.findDOMNode(this.ref_map[code].current);\n            this.listener_map[code] = {\n                pressingFunc: pressingRule(key_map),\n                onDown: this.setRuleDecorator(this.handleMouseDown(code)),\n                onUp: this.setRuleDecorator(this.handleMouseUp(code)),\n            };\n            if(isTouchDevice()) {\n                button.addEventListener('touchstart', this.listener_map[code].onDown, false);\n                button.addEventListener('touchend', this.listener_map[code].onUp, false);\n            } else {\n                button.addEventListener('mousedown', this.listener_map[code].onDown, false);\n                button.addEventListener('mouseup', this.listener_map[code].onUp, false);\n            }\n            button.addEventListener('contextmenu', this.handleContextMenu, false);\n        }\n    }\n\n    setRuleDecorator = (func) => {\n        return () => {\n            const { isKeyPressingAllowed } = this.props;\n            return isKeyPressingAllowed ? func() : false;\n        }\n    }\n\n    handleContextMenu = (e) => {\n        e.preventDefault();\n    }\n\n    handleMouseDown = code => {\n        return () => this.listener_map[code].pressingFunc.onTouchDown(code);\n    }\n\n    handleMouseUp = code => {\n        return () => this.listener_map[code].pressingFunc.onTouchUp(code);\n    }\n\n    render() {\n        const { classes, key_map } = this.props;\n        return key_map && (\n            <Box\n                className={classes.mobileBar}\n            >\n                <Box\n                    className={classes.item}\n                >\n                    <Box\n                        className={classes.arrows}\n                    >\n                        {\n                            ARROWS_MAP.map(({ icon, action, position }, index) => (\n                                <Fab\n                                    key={index}\n                                    icon={icon}\n                                    //onClick={key_map[action]}\n                                    className={cx(classes.touchButton, classes[`arrow`], classes[`arrow_${position}`])}\n                                    ref={this.ref_map[action]}\n                                />\n                            ))\n                        }\n                    </Box>\n                </Box>\n                <Box\n                    className={classes.item}\n                >\n                    <Box\n                        className={classes.arrows}\n                    >\n                        <Fab\n                            icon={<RotateLeft />}\n                            //onClick={key_map[KEY_MAP.UP]}\n                            className={cx(classes.touchButton, classes.arrow, classes.arrow_rightCenter)}\n                            ref={this.ref_map[KEY_MAP.UP]}\n                        />\n                    </Box>\n                </Box>\n            </Box>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { isGameRunning, isPause, key_map } = store.tetris;\n        let isKeyPressingAllowed = !isPause && isGameRunning;\n        return {\n            key_map,\n            isKeyPressingAllowed,\n        }\n    },\n    null\n)(withStyles(styles)(MobileBar));\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from \"@material-ui/core\";\nimport { PlayerInterface } from '../components';\nimport { Field, Toolbar, Preview } from './';\nimport { COL_SIZE } from \"../helpers/constants\";\nimport { HEADER_HEIGHT } from \"../../../helpers/constants\";\n\nconst styles = theme => ({\n    toolbar: {\n        [theme.breakpoints.up('sm')]: {\n            marginLeft: COL_SIZE,\n        },\n    },\n    preview: {\n        [theme.breakpoints.down('xs')]: {\n            position: 'fixed',\n            top: HEADER_HEIGHT.MIN,\n            right: 0,\n            opacity: 0.25,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n        },\n    },\n});\n\nclass Single extends PureComponent {\n\n    render() {\n        const { classes, size, isOpponent } = this.props;\n        return (\n            <PlayerInterface\n                field={<Field size={size} />}\n                toolbar={(\n                    <Toolbar\n                        previewComponent={<Preview size={size} className={isOpponent ? classes.preview : ''} />}\n                    />\n                )}\n                toolbarClassName={!isOpponent && classes.toolbar}\n            />\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { opponent } = store.tetris;\n        return {\n            isOpponent: opponent !== null,\n        }\n    },\n)(withStyles(styles)(Single));\n","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport {withStyles, Box } from \"@material-ui/core\";\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\nimport { Engine } from './';\nimport { MobileBar, Single } from './single';\nimport { Opponent } from './opponent';\nimport { closeResults } from \"../../actions/tetris\";\n\nconst styles = () => ({\n    layout: {\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'stretch',\n    },\n    body: {\n        flexGrow: 1,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'row',\n    },\n    mobileBar: {\n        //flexBasis: 50,\n        alignSelf: 'stretch',\n    },\n});\n\nclass Arena extends PureComponent {\n\n    render() {\n        const { classes, width, isOpponent } = this.props;\n\n        let is_mobile = isWidthDown('xs', width);\n        let is_tablet = isWidthDown('sm', width);\n        let col_size = is_mobile ? 20 : 30;\n\n        return (\n            <Fragment>\n                <Engine />\n                <Box\n                    className={classes.layout}\n                >\n                    <Box\n                        className={classes.body}\n                    >\n                        <Single\n                            size={col_size}\n                        />\n                        {\n                            isOpponent && !is_tablet ? (\n                                <Opponent\n                                    size={col_size}\n                                />\n                            ) : null\n                        }\n                    </Box>\n                    {\n                        is_mobile ? (\n                            <Box\n                                className={classes.mobileBar}\n                            >\n                                <MobileBar />\n                            </Box>\n                        ) : null\n                    }\n                </Box>\n            </Fragment>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            isOpponent: store.tetris.opponent !== null,\n        }\n    },\n    dispatch => {\n        return {\n            closeResults: () => { dispatch(closeResults()) },\n        }\n    }\n)(withRouter(withWidth()(withStyles(styles)(Arena))));\n","import React, { PureComponent, forwardRef } from 'react';\nimport { withStyles, Container, Grid, Card, CardActionArea, CardContent, Typography } from \"@material-ui/core\";\nimport { RouteLink } from '../components';\nimport { GAMES } from '../helpers/routes';\n\nconst styles = () => ({\n    home: {},\n    card: {\n        height: '100%',\n    },\n    actionArea: {\n        height: '100%',\n    },\n});\n\nclass Home extends PureComponent {\n\n    render() {\n        const { classes } = this.props;\n        return (\n            <Container>\n                <Grid\n                    container\n                    direction=\"row\"\n                    justify=\"center\"\n                    alignItems=\"stretch\"\n                    spacing={1}\n                >\n                    {\n                        GAMES.map(({ name, description, link }) => {\n                            let LinkCustom = forwardRef((props, ref) => (\n                                <RouteLink\n                                    to={link}\n                                    label={\n                                        <CardContent>\n                                            <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                                                {name}\n                                            </Typography>\n                                            <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                                                {description}\n                                            </Typography>\n                                        </CardContent>\n                                    }\n                                    {...props}\n                                />\n                            ));\n                            let cardActionArea = props => (\n                                <CardActionArea\n                                    className={classes.actionArea}\n                                    {...props}\n                                />\n                            );\n                            return (\n                                <Grid\n                                    key={link}\n                                    item\n                                    zeroMinWidth\n                                    xs={6}\n                                    md={4}\n                                    lg={3}\n                                >\n                                    <Card\n                                        className={classes.card}\n                                    >\n                                        <LinkCustom\n                                            component={cardActionArea}\n                                        />\n                                    </Card>\n                                </Grid>\n                            )\n                        })\n                    }\n                </Grid>\n            </Container>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Home);\n","export const LOBBY_STEP_NICKNAME = 'LOBBY_STEP_NICKNAME';\nexport const LOBBY_STEP_ROOM_SELECTION = 'LOBBY_STEP_ROOM_SELECTION';\n\nexport const SOCKET_ON_LOBBY_STEP_CHANGE = 'SOCKET_ON_LOBBY_STEP_CHANGE';\n//export const SOCKET_ON_NICKNAME_VALIDATE = 'SOCKET_ON_NICKNAME_VALIDATE';\nexport const SOCKET_ON_ROOM_LIST = 'SOCKET_ON_ROOM_LIST';\nexport const SOCKET_ON_ROOM_ADD = 'SOCKET_ON_ROOM_ADD';\nexport const SOCKET_ON_ROOM_JOIN = 'SOCKET_ON_ROOM_JOIN';\nexport const SOCKET_ON_ROOM_LEAVE = 'SOCKET_ON_ROOM_LEAVE';\nexport const SOCKET_ON_ROOM = 'SOCKET_ON_ROOM';\nexport const SOCKET_ON_CHAT = 'SOCKET_ON_CHAT';\nexport const SOCKET_ON_WORD_SELECT = 'SOCKET_ON_WORD_SELECT';\nexport const SOCKET_ON_PAINT = 'SOCKET_ON_PAINT';\nexport const SOCKET_ON_MESSAGE_LIKE = 'SOCKET_ON_MESSAGE_LIKE';\n\nexport const ROOM_STATUS_WAITING = 'ROOM_STATUS_WAITING';\nexport const ROOM_STATUS_PAINTER_SELECTING = 'ROOM_STATUS_PAINTER_SELECTING';\nexport const ROOM_STATUS_WORD_SELECTING = 'ROOM_STATUS_WORD_SELECTING';\nexport const ROOM_STATUS_DRAWING = 'ROOM_STATUS_DRAWING';\nexport const ROOM_STATUS_GAME_FINISHED = 'ROOM_STATUS_GAME_FINISHED';\n\nexport const THUMB_STATUS_LIKE = 'THUMB_STATUS_LIKE';\nexport const THUMB_STATUS_DISLIKE = 'THUMB_STATUS_DISLIKE';\n\nexport const STATUS_MAP = {\n    [ROOM_STATUS_WAITING]: () => `We need more players (2 minimum)`,\n    [ROOM_STATUS_PAINTER_SELECTING]: ({ countdown }) => `Painter is being selected in ${countdown} (random)`,\n    [ROOM_STATUS_WORD_SELECTING]: ({ painter }) => `Painter ${painter.nickname} is selecting a word`,\n    [ROOM_STATUS_DRAWING]: ({ painter }) => `${painter.nickname} is drawing`,\n    [ROOM_STATUS_GAME_FINISHED]: ({ winner }) => `The game is over. ${winner.nickname} wins`,\n};\n\nexport const DESK_WIDTH = 600;\nexport const DESK_HEIGHT = 500;","export const UPDATE_ROOM = 'UPDATE_ROOM';\nexport function updateRoom(room) {\n    return {\n        type: UPDATE_ROOM,\n        payload: {\n            room\n        },\n    };\n}\n\nexport const CLEAN_ROOM = 'CLEAN_ROOM';\nexport function cleanRoom() {\n    return {\n        type: CLEAN_ROOM,\n    };\n}\n\nexport const UPDATE_CONFIG = 'UPDATE_CONFIG';\nexport function updateConfig(config) {\n    return {\n        type: UPDATE_CONFIG,\n        payload: {\n            config,\n        },\n    };\n}\n\nexport const RESET_CONFIG = 'RESET_CONFIG';\nexport function resetConfig() {\n    return {\n        type: RESET_CONFIG,\n    };\n}\n\nexport const UPDATE_ROOM_LIST = 'UPDATE_ROOM_LIST';\nexport function updateRoomList(rooms) {\n    console.log(rooms);\n    return {\n        type: UPDATE_ROOM_LIST,\n        payload: {\n            rooms\n        },\n    };\n}","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { Nickname, RoomSelection } from './';\nimport { LOBBY_STEP_NICKNAME, LOBBY_STEP_ROOM_SELECTION } from '../helpers/constants';\nimport { updateConfig } from \"../../../actions/crocodile\";\nimport { socketUpdateUser } from \"../../../socket/helper\";\nimport { GAME_CROCODILE } from \"../../../helpers/constants\";\n\nconst styles = () => ({\n    lobby: {\n        position: 'relative',\n    },\n    lobbyContent: {\n        position: 'relative',\n    },\n});\n\nclass Lobby extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.steps = {\n            [LOBBY_STEP_NICKNAME]: <Nickname />,\n            [LOBBY_STEP_ROOM_SELECTION]: <RoomSelection onBackToNickname={this.handleBackToNickname} />,\n        };\n    }\n\n    componentDidMount() {\n        const { socketUpdateUser } = this.props;\n        socketUpdateUser({\n            room: 'LOBBY_CROCODILE',\n            game: GAME_CROCODILE,\n        });\n    }\n\n    handleBackToNickname = () => {\n        const { updateConfig } = this.props;\n        updateConfig({\n            step: LOBBY_STEP_NICKNAME\n        })\n    }\n\n    render() {\n        const { classes, step } = this.props;\n        return (\n            <Box\n                className={classes.lobby}\n            >\n                {\n                    step in this.steps ? this.steps[step] : step\n                }\n            </Box>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            step: store.crocodile.config.step,\n        }\n    },\n    dispatch => {\n        return {\n            updateConfig: config => dispatch( updateConfig(config) ),\n            socketUpdateUser: data => dispatch( socketUpdateUser(data) ),\n        }\n    }\n)(withStyles(styles)(Lobby));","import { GAME_CROCODILE, META_SOCKET_EMIT } from '../helpers/constants';\n\nconst ACTION_INIT = {\n    type: GAME_CROCODILE,\n    meta: { remote: META_SOCKET_EMIT },\n};\n\nexport const VALIDATE_NICKNAME = 'VALIDATE_NICKNAME';\nexport function socketValidateNickname(nickname) {\n    return {\n        action: VALIDATE_NICKNAME,\n        nickname,\n        ...ACTION_INIT\n    };\n}\n\nexport const JOIN_ROOM = 'JOIN_ROOM';\nexport function socketJoinRoom(room) {\n    return {\n        action: JOIN_ROOM,\n        room,\n        ...ACTION_INIT\n    };\n}\n\nexport const LEAVE_ROOM = 'LEAVE_ROOM';\nexport function socketLeaveRoom() {\n    return {\n        action: LEAVE_ROOM,\n        ...ACTION_INIT\n    };\n}\n\nexport const WORD_SELECT = 'WORD_SELECT';\nexport function socketWordSelect(word) {\n    return {\n        action: WORD_SELECT,\n        word,\n        ...ACTION_INIT\n    };\n}\n\nexport const PAINT = 'PAINT';\nexport function socketPaint(image) {\n    return {\n        action: PAINT,\n        image,\n        ...ACTION_INIT\n    };\n}\n\nexport const CHAT = 'CHAT';\nexport function socketChat(message) {\n    return {\n        action: CHAT,\n        message,\n        ...ACTION_INIT\n    };\n}\n\nexport const MESSAGE_MARK = 'MESSAGE_MARK';\nexport function socketMessageMark(id, value) {\n    return {\n        action: MESSAGE_MARK,\n        id,\n        value,\n        ...ACTION_INIT\n    };\n}\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { TextInput } from '../../../components';\nimport { preventMultipleSubmit } from '../helpers/etc';\nimport { updateConfig, updateRoomList } from \"../../../actions/crocodile\";\nimport { socketValidateNickname } from \"../../../socket/crocodile\";\nimport ResponseContext from '../../../helpers/ResponseContext';\n\nclass Nickname extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.handleNicknameSubmitDecorator = preventMultipleSubmit();\n        this.state = {\n            nickname: '',\n        }\n    }\n\n    handleNicknameChange = (e) => {\n        const { value } = e.target;\n        const { updateConfig } = this.props;\n        updateConfig({\n            nickname: value,\n        });\n    }\n\n    submitNickname = async () => {\n        const validateResponse = this.context;\n        const { nickname, updateConfig, socketValidateNickname, updateRoomList } = this.props;\n        let response = await socketValidateNickname(nickname);\n        validateResponse(response, ({ config, rooms }) => {\n            updateConfig(config);\n            updateRoomList(rooms);\n        });\n    }\n\n    handleNicknameSubmit = () => {\n        this.handleNicknameSubmitDecorator(this.submitNickname);\n    }\n\n    render() {\n        const { nickname } = this.props;\n        return (\n            <TextInput\n                onChange={this.handleNicknameChange}\n                onSubmit={this.handleNicknameSubmit}\n                placeholder=\"Enter your nickname\"\n                value={nickname}\n            />\n        )\n    }\n}\n\nNickname.contextType = ResponseContext;\n\nexport default connect(\n    store => {\n        return {\n            nickname: store.crocodile.config.nickname,\n        }\n    },\n    dispatch => {\n        return {\n            updateConfig: config => dispatch( updateConfig(config) ),\n            updateRoomList: rooms => dispatch( updateRoomList(rooms) ),\n            socketValidateNickname: nickname => dispatch( socketValidateNickname(nickname) ),\n        }\n    }\n)(Nickname);","export function getHeightFromWidth(widthNew, width, height) {\n    return ( widthNew * height ) / width;\n}\n\nexport function getWidthFromHeight(heightNew, width, height) {\n    return ( heightNew * width ) / height;\n}\n\nexport function preventMultipleSubmit() {\n    let isLocked = false;\n    function func(callback) {\n        if(!isLocked) {\n            isLocked = true;\n            callback();\n            setTimeout(() => {\n                isLocked = false;\n            }, 750);\n        }\n    }\n    return func;\n}","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Paper, IconButton, Box, List, ListItem, ListItemText, Divider, Grid, Typography, Container } from \"@material-ui/core\";\nimport { Add, ArrowBack } from '@material-ui/icons';\nimport { socketJoinRoom } from '../../../socket/crocodile';\n\nconst styles = theme => ({\n    root: {\n\n    },\n    input: {\n        marginLeft: theme.spacing(2),\n        flex: 1,\n    },\n    iconButton: {\n        padding: 20,\n    },\n    divider: {\n        height: 28,\n        margin: 4,\n    },\n    stepTitle: {\n        //fontSize: theme.typography.pxToRem(30),\n        margin: '20px 0',\n    },\n    list: {\n        maxWidth: 350,\n        width: '100%',\n    },\n    listArea: {\n        flexGrow: 1,\n    },\n    listItemText: {\n        marginRight: theme.spacing(2),\n    },\n});\nclass RoomSelection extends PureComponent {\n\n    handleNewRoomModalOpen = () => {\n        this.setState(() => ({\n            isNewRoomModal: true,\n        }));\n    }\n\n    handleJoinRoom = (room_name) => {\n        const { socketJoinRoom } = this.props;\n        socketJoinRoom(room_name);\n    }\n    \n    render() {\n        const { classes, rooms, onBackToNickname } = this.props;\n        return (\n            <Container>\n                <Typography\n                    className={classes.stepTitle}\n                    variant=\"h6\"\n                >\n                    Select room or create new one:\n                </Typography>\n                <Grid\n                    container\n                >\n                    <Grid\n                        item\n                    >\n                        <IconButton\n                            className={classes.iconButton}\n                            onClick={onBackToNickname}\n                        >\n                            <ArrowBack />\n                        </IconButton>\n                        <IconButton\n                            className={classes.iconButton}\n                            onClick={this.handleNewRoomModalOpen}\n                            disabled\n                        >\n                            <Add />\n                        </IconButton>\n                    </Grid>\n                    <Grid\n                        item\n                        className={classes.listArea}\n                    >\n                        <Paper\n                            square={true}\n                        >\n                            <List component=\"nav\" className={classes.list}>\n                                {\n                                    rooms && rooms.length ? rooms.map(({ room, players }, index) => {\n                                        return (\n                                            <Fragment\n                                                key={room}\n                                            >\n                                                <ListItem\n                                                    button\n                                                    onClick={() => this.handleJoinRoom(room)}\n                                                >\n                                                    <ListItemText\n                                                        primary={room}\n                                                        className={classes.listItemText}\n                                                    />\n                                                    <Box>({players})</Box>\n                                                </ListItem>\n                                                {\n                                                    index !== (rooms.length - 1) ? <Divider /> : null\n                                                }\n                                            </Fragment>\n                                        )\n                                    }) : 'No rooms found'\n                                }\n                            </List>\n                        </Paper>\n                    </Grid>\n                </Grid>\n            </Container>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            rooms: store.crocodile.rooms,\n        }\n    },\n    dispatch => {\n        return {\n            socketJoinRoom: room => dispatch( socketJoinRoom(room) ),\n        }\n    }\n)(withStyles(styles)(RoomSelection));","import React, { PureComponent, Fragment } from 'react';\nimport { withStyles, Grid, Box } from \"@material-ui/core\";\nimport { Chat, PlayersBar, RoomInfoBar, Winner } from \"./\";\n\nconst styles = (theme) => ({\n    crocodile: {\n        alignItems: 'stretch',\n        justifyContent: 'stretch',\n        height: '100%',\n        flexDirection: 'column',\n        [theme.breakpoints.up('md')]: {\n            flexDirection: 'row',\n        }\n    },\n    paint: {\n        position: 'relative',\n        flexGrow: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        alignItems: 'stretch',\n    },\n    paintHeader: {},\n    paintWork: {\n        position: 'relative',\n        flexGrow: 1,\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        paddingTop: theme.spacing(1),\n        paddingBottom: theme.spacing(1),\n    },\n    chat: {\n        flexBasis: props => (props.isPainter ? 130 : 200),\n        flexShrink: 0,\n        paddingTop: 0,\n        paddingBottom: theme.spacing(1),\n        paddingRight: theme.spacing(1),\n        paddingLeft: theme.spacing(1),\n        [theme.breakpoints.up('md')]: {\n            flexBasis: '250px !important',\n            paddingTop: theme.spacing(1),\n            paddingBottom: theme.spacing(1),\n            paddingRight: theme.spacing(1),\n            paddingLeft: 0,\n        }\n    },\n    players: {\n        display: 'flex',\n        justifyContent: 'center',\n        flexWrap: 'wrap',\n        '& > *': {\n            margin: theme.spacing(0.5),\n        },\n    },\n});\n\nclass Game extends PureComponent {\n\n    render() {\n        const { classes, task, isPainter, children } = this.props;\n        return (\n            <Fragment>\n                <Grid\n                    container\n                    spacing={0}\n                    wrap=\"nowrap\"\n                    className={classes.crocodile}\n                >\n                    <Grid\n                        item\n                        className={classes.paint}\n                    >\n                        <Box\n                            className={classes.paintWork}\n                        >\n                            {children}\n                        </Box>\n                        <Box\n                            className={classes.paintHeader}\n                        >\n                            <RoomInfoBar\n                                data={[\n                                    {...task},\n                                    {\n                                        label: 'Players',\n                                        value:  <PlayersBar />\n                                    },\n                                ]}\n                            />\n                        </Box>\n                    </Grid>\n                    <Grid\n                        item\n                        className={classes.chat}\n                    >\n                        <Chat\n                            painterMode={isPainter}\n                        />\n                    </Grid>\n                </Grid>\n                <Winner />\n            </Fragment>\n        )\n    }\n}\n\nexport default withStyles(styles)(Game);","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { GamePainter, GameWatcher } from \"./\";\nimport { cleanRoom } from '../../../actions/crocodile';\nimport { setApp } from '../../../actions/app';\nimport { socketLeaveRoom } from '../../../socket/crocodile';\n\nconst styles = () => ({\n    interface: {\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n    },\n});\n\nconst Interface = ({ classes, ...props }) => {\n    return props.isPainter ? <GamePainter {...props} /> : <GameWatcher {...props} />\n};\n\nclass GameInterface extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.is_left = false;\n    }\n\n    componentDidMount() {\n        const { setApp, roomName } = this.props;\n        setApp({\n            sub_header: roomName,\n            topAction: this.handleLeaveRoom,\n        });\n    }\n\n    componentWillUnmount() {\n        this.handleLeaveRoom();\n    }\n\n    handleLeaveRoom = () => {\n        if(this.is_left) return false;\n        const { setApp, cleanRoom, socketLeaveRoom } = this.props;\n        socketLeaveRoom();\n        cleanRoom();\n        setApp({\n            sub_header: null,\n            topAction: null,\n        });\n        this.is_left = true;\n    }\n\n    render() {\n        const { classes, isPainter } = this.props;\n        return (\n            <Box className={classes.interface}>\n                <Interface\n                    isPainter={isPainter}\n                    {...this.props}\n                />\n            </Box>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            sub_header: store.app.sub_header,\n            isPainter: (store.crocodile.room.painter || {}).id === store.socket.id,\n            roomName: store.crocodile.room.roomName,\n        }\n    },\n    dispatch => {\n        return {\n            cleanRoom: () => { dispatch(cleanRoom()) },\n            setApp: options => { dispatch(setApp(options)) },\n            socketLeaveRoom: () => { dispatch(socketLeaveRoom()) },\n        }\n    }\n)(withStyles(styles)(GameInterface));","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles } from \"@material-ui/core\";\nimport { Game, Screen } from \"./\";\n\nconst styles = () => ({\n\n});\n\nclass GameWatcher extends PureComponent {\n\n    getTask = () => {\n        const { word, painter_name } = this.props;\n        return word ? {\n            label: 'Your task',\n            value: `Try to guess the word that ${painter_name} is drawing`,\n        } : {};\n    }\n\n    render() {\n        let task = this.getTask();\n        return (\n            <Game\n                task={task}\n                {...this.props}\n            >\n                <Screen />\n            </Game>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            word: store.crocodile.room.word,\n            painter_name: (store.crocodile.room.painter || {}).nickname,\n        }\n    },\n)(withStyles(styles)(GameWatcher));","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box, Button, Dialog } from \"@material-ui/core\";\nimport { Paint, Game } from \"./\";\nimport { socketWordSelect, socketPaint } from \"../../../socket/crocodile\";\n\nconst styles = theme => ({\n    wordList: {\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        padding: theme.spacing(2),\n    },\n    wordButton: {\n        width: '100%',\n        '&:not(:first-child)': {\n            marginTop: theme.spacing(1),\n        }\n    },\n});\n\nclass GamePainter extends PureComponent {\n\n    handleWordSelect = (e, word) => {\n        const { socketWordSelect } = this.props;\n        socketWordSelect(word);\n    }\n\n    handleConvertToImage = (canvas) => {\n        if(!canvas) return false;\n        const { socketPaint } = this.props;\n        let image = canvas.current.toDataURL();\n        socketPaint(image);\n    }\n\n    getTask = () => {\n        const { word } = this.props;\n        return word ? {\n            label: 'Your task',\n            value: `Try to draw word \"${word}\"`,\n        } : {};\n    }\n\n    render() {\n        const { classes, onWordSelect, word, words, ...props } = this.props;\n        return (\n            <Fragment>\n                <Game\n                    task={this.getTask()}\n                    {...props}\n                >\n                    <Paint onConvertToImage={this.handleConvertToImage} />\n                </Game>\n                <Dialog\n                    open={!word}\n                >\n                    <Box\n                        className={classes.wordList}\n                    >\n                        {\n                            words.map((word, index) => (\n                                <Button\n                                    key={index}\n                                    className={classes.wordButton}\n                                    variant=\"outlined\"\n                                    onClick={e => this.handleWordSelect(e, word)}\n                                >\n                                    {word}\n                                </Button>\n                            ))\n                        }\n                    </Box>\n                </Dialog>\n            </Fragment>\n\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            word: store.crocodile.room.word,\n            words: store.crocodile.room.words,\n        }\n    },\n    dispatch => {\n        return {\n            socketWordSelect: word => dispatch( socketWordSelect(word) ),\n            socketPaint: image => dispatch( socketPaint(image) ),\n        }\n    }\n)(withStyles(styles)(GamePainter));","import React, {PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box, Chip } from \"@material-ui/core\";\n\nconst styles = (theme) => ({\n    players: {\n       alignSelf: 'flex-start',\n       display: 'flex',\n       justifyContent: 'center',\n       flexWrap: 'wrap',\n       '& > *': {\n           margin: theme.spacing(0.5),\n       },\n   },\n});\n\nclass PlayersBar extends PureComponent {\n\n    handleClick = playerId => (e) => {\n        //console.log({playerId, e});\n    }\n\n    render() {\n        const { classes, players, painterId } = this.props;\n        const arrayOfPlayers = Object.keys(players);\n        return (\n            <Box\n                className={classes.players}\n            >\n                {\n                    players && arrayOfPlayers.length ? arrayOfPlayers.map((playerId, index) => (\n                        <Chip\n                            key={index}\n                            size=\"small\"\n                            label={players[playerId].nickname}\n                            color={painterId === playerId ? 'primary' : 'default'}\n                            //onClick={this.handleClick(playerId)}\n                        />\n                    )) : 'There is no players in this room'\n                }\n            </Box>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            players: store.crocodile.room.players,\n            painterId: (store.crocodile.room.painter || {}).id,\n        }\n    },\n)(withStyles(styles)(PlayersBar));","import React, {PureComponent } from 'react';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { Toolbar } from '../../../components';\n\nconst styles = (theme) => ({\n    roomInfoBar: {\n        position: 'relative',\n        alignSelf: 'flex-start',\n        width: '100%',\n        marginBottom: theme.spacing(1),\n    },\n    item: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'flex-start',\n        flexWrap: 'wrap',\n        flexDirection: 'row',\n    },\n    label: {\n        flexBasis: 70,\n    },\n    value: {\n        marginLeft: theme.spacing(2),\n    },\n});\n\nclass RoomInfoBar extends PureComponent {\n\n    render() {\n        const { classes, data } = this.props;\n\n        return (\n            <Toolbar>\n                <Box\n                    className={classes.roomInfoBar}\n                >\n                    {\n                        data.map(({ label, value }, index) => (label && value) ? (\n                            <Box\n                                key={index}\n                                className={classes.item}\n                            >\n                                <Box\n                                    className={classes.label}\n                                    fontWeight=\"fontWeightMedium\"\n                                >\n                                    {label}:\n                                </Box>\n                                <Box\n                                    className={classes.value}\n                                >\n                                    {value}\n                                </Box>\n                            </Box>\n                        ) : null)\n                    }\n                </Box>\n            </Toolbar>\n        )\n    }\n}\n\nexport default withStyles(styles)(RoomInfoBar);","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Box, Dialog, DialogTitle, Table, TableHead, TableCell, TableRow } from \"@material-ui/core\";\n\nconst styles = () => ({\n    table: {\n        maxWidth: 300,\n    },\n});\n\nclass Winner extends PureComponent {\n\n    render() {\n        const { classes, winner_name, word } = this.props;\n        return winner_name ? (\n            <Dialog\n                open={true}\n            >\n                <DialogTitle>\n                    <Box>\n                        <Box component=\"h4\">\n                           The game is over!\n                        </Box>\n                        <Table className={classes.table}>\n                            <TableHead>\n                                <TableRow>\n                                    <TableCell>Winner: </TableCell>\n                                    <TableCell align=\"right\">{winner_name}</TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell>Right word: </TableCell>\n                                    <TableCell align=\"right\">{word}</TableCell>\n                                </TableRow>\n                            </TableHead>\n                        </Table>\n                    </Box>\n                </DialogTitle>\n            </Dialog>\n        ) : null;\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            winner_name: (store.crocodile.room.winner || {}).nickname,\n            word: store.crocodile.room.word,\n        }\n    },\n)(withStyles(styles)(Winner));","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Grid } from \"@material-ui/core\";\nimport { TextInput } from '../../../components';\nimport { ChatWindow } from './';\nimport { preventMultipleSubmit } from '../../../helpers/etc';\nimport { socketChat, socketMessageMark } from \"../../../socket/crocodile\";\n\nconst styles = (theme) => ({\n    chat: {\n        flexGrow: 1,\n    },\n    wrapChat: {\n        position: 'relative',\n        height: '100%',\n        margin: 0,\n    },\n    wrapMessages: {\n        position: 'relative',\n        flexGrow: 1,\n        padding: '0 !important',\n    },\n    wrapSubmit: {\n        flexShrink: 0,\n        padding: `${theme.spacing(1)}px 0 0 0 !important`,\n\n    },\n    textField: {\n        width: '100%',\n        padding: '2px 4px',\n        display: 'flex',\n        alignItems: 'center',\n    },\n    input: {\n        flex: 1,\n    },\n});\n\nclass Chat extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.lockFuncChat = preventMultipleSubmit();\n        this.state = {\n            message: '',\n        }\n    }\n\n    onChat = (message) => {\n        const { socketChat } = this.props;\n        socketChat(message);\n    }\n\n    handleChat = () => {\n        const { message } = this.state;\n        if(message.length > 0) {\n            this.setState(() => ({\n                message: '',\n            }));\n            this.lockFuncChat(() => this.onChat(message));\n        }\n    }\n\n    handleMessageChange = (e) => {\n        const { value } = e.target;\n        this.setState(() => ({\n            message: value,\n        }));\n    }\n\n    handleLikeMessage = id => value => {\n        const { socketMessageMark } = this.props;\n        socketMessageMark(id, value);\n    }\n\n    render() {\n        const { classes, painterMode } = this.props;\n        const { message } = this.state;\n        return (\n            <Grid\n                container\n                spacing={0}\n                direction=\"column\"\n                className={classes.wrapChat}\n            >\n                <Grid\n                    item\n                    className={classes.wrapMessages}\n                >\n                    <ChatWindow\n                        painterMode={painterMode}\n                        onLikeMessage={this.handleLikeMessage}\n                    />\n                </Grid>\n                {\n                    !painterMode ? (\n                        <Grid\n                            item\n                            className={classes.wrapSubmit}\n                        >\n                            <TextInput\n                                onChange={this.handleMessageChange}\n                                onSubmit={this.handleChat}\n                                placeholder=\"Message\"\n                                value={message}\n                                className={classes.textField}\n                                elevation={5}\n                            />\n                        </Grid>\n                    ) : null\n                }\n            </Grid>\n        )\n    }\n}\n\nexport default connect(\n    null,\n    dispatch => {\n        return {\n            socketChat: message => dispatch( socketChat(message) ),\n            socketMessageMark: (id, value) => dispatch( socketMessageMark(id, value) ),\n        }\n    }\n)(withStyles(styles)(Chat));","import React, { PureComponent, Fragment, createRef } from 'react';\nimport { connect } from 'react-redux';\nimport cx from 'classnames';\nimport { withStyles, Paper, Box } from \"@material-ui/core\";\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { ThumbClicker } from './';\nimport { THUMB_STATUS_LIKE, THUMB_STATUS_DISLIKE } from '../helpers/constants';\n\nconst styles = (theme) => ({\n    window: {\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n    },\n    windowInner: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        overflowX: 'hidden',\n        overflowY: 'scroll',\n    },\n    card: {\n        position: 'relative',\n        padding: theme.spacing(1),\n        '&:nth-child(2n)': {\n            backgroundColor: fade(theme.palette.grey[400], 0.1),\n        },\n        [theme.breakpoints.down('sm')]: {\n            padding: theme.spacing(0.5),\n        }\n    },\n    cardActive: {\n        cursor: 'pointer',\n        display: 'block',\n        '&:hover': {\n            backgroundColor: fade(theme.palette.primary.light, 0.2),\n        },\n    },\n    name: {\n        textAlign: 'left',\n        fontSize: theme.typography.pxToRem(13),\n        paddingBottom: theme.spacing(1),\n        [theme.breakpoints.down('sm')]: {\n            paddingBottom: theme.spacing(0.5),\n        }\n    },\n    message: {\n        textAlign: 'right',\n        color: '#fff',\n        fontSize: theme.typography.pxToRem(12),\n    },\n    messageServer: {\n        textAlign: 'right',\n        fontSize: theme.typography.pxToRem(10),\n    },\n    thumb: {\n        fontSize: theme.typography.pxToRem(14),\n        verticalAlign: 'middle',\n        marginRight: theme.spacing(1),\n        color: theme.palette.primary.main,\n    },\n    thumbUp: {\n        color: 'green',\n    },\n    thumbDown: {\n        color: 'red',\n    },\n    thumbClicker: {\n        position: 'absolute',\n        top: 0,\n        right: 0,\n        width: 'auto',\n        transition: 'opacity 0.3s ease 0s',\n        opacity: 0,\n        '$card:hover &': {\n            opacity: 0.75,\n        },\n    },\n});\n\nconst THUMB_MAP = {\n    [THUMB_STATUS_LIKE]: classes => <ThumbUpIcon className={cx(classes.thumb, classes.thumbUp)} />,\n    [THUMB_STATUS_DISLIKE]: classes => <ThumbDownIcon className={cx(classes.thumb, classes.thumbDown)} />,\n}\n\nconst MessageClient = ({ classes, sender, message, onLikeMessage, likeStatus }) => {\n    return (\n        <Box\n            className={classes.card}\n        >\n            {\n                onLikeMessage ? (\n                    <ThumbClicker\n                        className={classes.thumbClicker}\n                        onClick={onLikeMessage}\n                    />\n                ) : null\n            }\n            <Box fontWeight=\"fontWeightBold\" className={classes.name}>\n                {\n                    likeStatus && THUMB_MAP[likeStatus](classes)\n                }\n                {sender}\n            </Box>\n            <Box className={classes.message}>\n                {message}\n            </Box>\n        </Box>\n    );\n};\n\nconst MessageServer = ({ classes, message }) => {\n    return (\n        <Box\n            className={classes.card}\n        >\n            <Box fontWeight=\"fontWeightLight\" className={classes.messageServer}>{message}</Box>\n        </Box>\n    );\n};\n\nclass ChatWindow extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.windowRef = createRef();\n    }\n\n    componentDidMount() {\n        this.scrollWindowToBottom();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        this.scrollWindowToBottom();\n    }\n\n    scrollWindowToBottom = () => {\n        if(this.windowRef && this.windowRef.current) {\n            const { scrollHeight, clientHeight } = this.windowRef.current;\n            this.windowRef.current.scrollTop = scrollHeight - clientHeight;\n        }\n    }\n\n    render() {\n        const { classes, chat, painterMode, onLikeMessage } = this.props;\n        let lenta = chat && chat.length ? chat : [{\n            player: { nickname: 'SERVER' },\n            message: 'This chat is currently empty',\n        }];\n        return (\n            <Paper\n                elevation={5}\n                square={true}\n                className={classes.window}\n            >\n                <Box\n                    className={classes.windowInner}\n                    ref={this.windowRef}\n                >\n                    {\n                        lenta.map(({ player, message, id, likeStatus }, index) => {\n                            let { nickname } = player;\n                            let likeHandler = painterMode ? {\n                                onLikeMessage: onLikeMessage(id),\n                            } : null;\n                            return (\n                                <Fragment\n                                    key={index}\n                                >\n                                    {\n                                        nickname === 'SERVER' ? (\n                                            <MessageServer\n                                                classes={classes}\n                                                message={message}\n                                            />\n                                        ) : (\n                                            <MessageClient\n                                                classes={classes}\n                                                message={message}\n                                                sender={nickname}\n                                                likeStatus={likeStatus}\n                                                {...likeHandler}\n                                            />\n                                        )\n                                    }\n                                </Fragment>\n                            )\n                        })\n                    }\n                </Box>\n            </Paper>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            chat: store.crocodile.room.chat,\n        }\n    },\n)(withStyles(styles)(ChatWindow));","import React, { createRef, PureComponent } from 'react';\nimport UndoCanvas from 'undo-canvas';\nimport { withStyles, Grid } from \"@material-ui/core\";\nimport { Desk, DeskToolbar } from './';\nimport { DESK_WIDTH, DESK_HEIGHT } from '../helpers/constants';\nimport { Resizer } from '../../../components';\n\nconst MOUSE_MAIN_BUTTON = 0;\n\nlet context = null;\n\nconst styles = () => ({\n    desk: {\n        position: 'relative',\n        width: '100%',\n        height: '100%'\n    },\n    canvas: {\n\n    },\n    paint: {\n        width: '100%',\n        height: '100%',\n        flexDirection: 'column',\n    },\n    toolbar: {\n\n    },\n    screen: {\n        position: 'relative',\n        flexGrow: 1,\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n});\n\nclass Paint extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.canvas = createRef();\n        this.isDrawing = false;\n        this.doUpdateSize = null;\n        this.savedSize = {};\n    }\n\n    state = {\n        lineOptions: {\n            lineWidth: 2,\n            lineJoin: 'round',\n            lineCap: 'round',\n            strokeStyle: '#ffffff',\n        },\n    }\n\n    componentDidMount() {\n        //this.handleInit();\n    }\n\n    componentWillUnmount() {\n        this.removeListeners();\n    }\n\n    handlerColorSelect = (color) => {\n        this.setState(state => ({\n            lineOptions: {\n                ...state.lineOptions,\n                strokeStyle: color,\n            }\n        }));\n    }\n\n    getCoords = (e) => {\n        const { target, changedTouches } = e;\n        const { left, top } = target.getBoundingClientRect();\n        const { clientX, clientY } = changedTouches ? changedTouches[0] : e;\n        // console.log({\n        //     target,\n        //     left, top,\n        //     clientX, clientY,\n        //     e\n        // });\n        return {\n            x: clientX - left,\n            y: clientY - top,\n        };\n    }\n\n    updateLine = () => {\n        const { lineOptions } = this.state;\n        for(let option in lineOptions) context[option] = lineOptions[option];\n    }\n\n    makeStep = (e) => {\n        const { onConvertToImage } = this.props;\n        const { x, y } = this.getCoords(e);\n        context.lineTo(x, y);\n        context.stroke();\n        onConvertToImage(this.canvas);\n        return {x, y};\n    }\n\n    init = (width, height) => {\n        console.log(width, height);\n        //let dpr = window.devicePixelRatio || 1;\n        //let rect = canvas.getBoundingClientRect();\n        this.canvas.current.width = width;\n        this.canvas.current.height = height;\n        context = this.canvas.current.getContext(\"2d\");\n        //context.scale(dpr, dpr);\n        UndoCanvas.enableUndo(context);\n        this.setListeners();\n    }\n\n    saveUpdateSizeFunc = (f) => {\n        this.doUpdateSize = f;\n    }\n\n    updateSize = (width, height) => {\n        UndoCanvas.disableUndo(context);\n        let temp = context.getImageData(0, 0, width, height);\n        //let dpr = window.devicePixelRatio || 1;\n        this.canvas.current.width = width;\n        this.canvas.current.height = height;\n        context.putImageData(temp, 0, 0);\n        this.savedSize.width = width;\n        this.savedSize.height = height;\n        UndoCanvas.enableUndo(context);\n    }\n\n    setListeners = () => {\n        this.canvas.current.addEventListener('mousedown', this.handleMouseDown, false);\n        this.canvas.current.addEventListener('mouseup', this.handleMouseUp, false);\n        this.canvas.current.addEventListener('mousemove', this.handleMouseMove, false);\n        this.canvas.current.addEventListener('touchstart', this.handleTouchStart, false);\n        this.canvas.current.addEventListener('touchend', this.handleTouchEnd, false);\n        this.canvas.current.addEventListener('touchmove', this.handleTouchMove, false);\n    }\n\n    removeListeners = () => {\n        this.canvas.current.removeEventListener('mousedown', this.handleMouseDown, false);\n        this.canvas.current.removeEventListener('mouseup', this.handleMouseUp, false);\n        this.canvas.current.removeEventListener('mousemove', this.handleMouseMove, false);\n        this.canvas.current.removeEventListener('touchstart', this.handleTouchStart, false);\n        this.canvas.current.removeEventListener('touchend', this.handleTouchEnd, false);\n        this.canvas.current.removeEventListener('touchmove', this.handleTouchMove, false);\n    }\n\n    handleTouchStart = (e) => {\n        this.pointStart(e);\n    }\n\n    handleTouchEnd = (e) => {\n        this.pointEnd(e);\n    }\n\n    handleTouchMove = (e) => {\n        this.handleMouseMove(e);\n    }\n\n    pointStart = (e) => {\n        this.isDrawing = true;\n        const { onConvertToImage } = this.props;\n        context.putTag();\n        this.updateLine();\n        context.beginPath();\n        const { x, y } = this.getCoords(e);\n        context.moveTo(x, y);\n        onConvertToImage(this.canvas);\n    }\n\n    pointEnd = (e) => {\n        this.isDrawing = false;\n        this.makeStep(e);\n        context.putTag();\n    }\n\n    pointMove = (e) => {\n        if(this.isDrawing) this.makeStep(e);\n    }\n\n    handleMouseDown = (e) => {\n        const { button } = e;\n        if(button === MOUSE_MAIN_BUTTON) {\n            this.pointStart(e);\n        }\n    }\n\n    handleMouseUp = (e) => {\n        const { button } = e;\n        if(button === MOUSE_MAIN_BUTTON) {\n            this.pointEnd(e);\n        }\n    }\n\n    handleMouseMove = (e) => {\n        if(this.isDrawing) this.makeStep(e);\n    }\n\n    handleUndo = () => {\n        const { onConvertToImage } = this.props;\n        //console.log(this.savedSize);\n        let reg = /^(?!.*(width|height|size|fillRect))/;\n        console.log(this.savedSize);\n        context.undoTag(reg, 1);\n        //this.updateSize(this.savedSize.width, this.savedSize.height);\n        //context.undoTag(reg, 1);\n        onConvertToImage(this.canvas);\n    }\n\n    handleRedo = () => {\n        const { onConvertToImage } = this.props;\n        context.redoTag();\n        onConvertToImage(this.canvas);\n    }\n\n    handleClear = () => {\n        const { onConvertToImage } = this.props;\n        context.clearRect(0, 0, this.canvas.current.width, this.canvas.current.height);\n        onConvertToImage(this.canvas);\n    }\n\n    handleSizeChange = (e, lineWidth) => {\n        this.setState(state => ({\n            lineOptions: {\n                ...state.lineOptions,\n                lineWidth,\n            },\n        }));\n    }\n\n    render() {\n        const { classes } = this.props;\n        const { lineOptions: { lineWidth } } = this.state;\n        return (\n            <Grid\n                container\n                className={classes.paint}\n            >\n                <Grid\n                    item\n                    className={classes.toolbar}\n                >\n                    <DeskToolbar\n                        onColorSelect={this.handlerColorSelect}\n                        onUndo={this.handleUndo}\n                        onRedo={this.handleRedo}\n                        onClear={this.handleClear}\n                        onSizeChange={this.handleSizeChange}\n                        lineWidth={lineWidth}\n                    />\n                </Grid>\n                <Grid\n                    item\n                    className={classes.screen}\n                >\n                    <Resizer\n                        k={DESK_HEIGHT/DESK_WIDTH}\n                    >\n                        <Desk\n                            innerRef={this.canvas}\n                            init={this.init}\n                            updateSize={this.updateSize}\n                            saveUpdateSizeFunc={this.saveUpdateSizeFunc}\n                        />\n                    </Resizer>\n                </Grid>\n            </Grid>\n        )\n    }\n}\n\nexport default withStyles(styles)(Paint);","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withStyles, Paper, Box } from \"@material-ui/core\";\nimport { DESK_WIDTH, DESK_HEIGHT } from '../helpers/constants';\nimport { Resizer } from '../../../components';\n\nconst DEFAULT_IMAGE = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAYAAAByNR6YAAAT1ElEQVR4Xu3WMREAAAgDMerfNCZ+DAI65Bh+5wgQIECAAAECBFKBpWvGCBAgQIAAAQIETmB5AgIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQeJDfAZGJuGy/AAAAAElFTkSuQmCC';\n\nconst styles = () => ({\n    screen: {\n        position: 'relative',\n        margin: '0 auto',\n        width: '100%',\n        height: '100%'\n    },\n    image: {\n        display: 'block',\n        width: '100%',\n        height: '100%',\n    },\n    note: {\n        width: '100%',\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexWrap: 'wrap',\n    }\n});\n\nclass Screen extends PureComponent {\n\n    render() {\n        const { classes, image } = this.props;\n        return (\n            <Resizer\n                k={DESK_HEIGHT/DESK_WIDTH}\n            >\n                <Paper\n                    elevation={5}\n                    square={true}\n                    className={classes.screen}\n                >\n                    {\n                        image && image.length ? <img\n                                src={image || DEFAULT_IMAGE}\n                                className={classes.image}\n                                alt=\"gamehub\"\n                            /> :\n                            (\n                                <Box\n                                    className={classes.note}\n                                >\n                                    The game is going to start\n                                </Box>\n                            )\n                    }\n                </Paper>\n            </Resizer>\n        )\n    }\n}\n\nexport default connect(\n    store => {\n        return {\n            image: store.crocodile.room.image,\n        }\n    },\n)(withStyles(styles)(Screen));","import React, { PureComponent, forwardRef } from 'react';\nimport { withStyles, Paper } from \"@material-ui/core\";\n\nconst TIME_NEED_FOR_LAYOUT_BUILD = 100;\n\nconst styles = () => ({\n    desk: {\n        position: 'relative',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n    },\n    canvas: {\n        // width: props => props.resizer.width,\n        // height: props => props.resizer.height,\n    }\n});\n\nclass Desk extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.isInited = false;\n    }\n\n    componentDidMount() {\n        this.props.saveUpdateSizeFunc(this.updateSize);\n        setTimeout(() => {\n            this.setInit();\n        }, TIME_NEED_FOR_LAYOUT_BUILD);\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if(this.isInited && (prevProps.resizer.width !== this.props.resizer.width || prevProps.resizer.height !== this.props.resizer.height)) {\n            this.updateSize();\n        }\n    }\n\n    updateSize = () => {\n        const { updateSize, resizer: { width, height } } = this.props;\n        updateSize(width, height);\n    }\n\n    setInit = () => {\n        const { init, resizer: { width, height } } = this.props;\n        init(width, height);\n        this.isInited = true;\n    }\n\n    render() {\n        const { classes, innerRef } = this.props;\n        return (\n            <Paper\n                elevation={5}\n                square={true}\n                className={classes.desk}\n            >\n                <canvas\n                    ref={innerRef}\n                    className={classes.canvas}\n                />\n            </Paper>\n        )\n    }\n}\n\nexport default withStyles(styles)(\n        forwardRef((props, ref) => <Desk\n            innerRef={ref} {...props}\n        />\n    )\n);\n\n","import React, { PureComponent } from 'react';\nimport { withStyles, Box, IconButton, Slider as SliderMaterial } from \"@material-ui/core\";\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\nimport Undo from '@material-ui/icons/Undo';\nimport Redo from '@material-ui/icons/Redo';\nimport Delete from '@material-ui/icons/Delete';\nimport { ColorPicker } from './';\nimport { Toolbar } from '../../../components';\n\nconst styles = theme => ({\n    toolbar: {\n        flexWrap: 'wrap',\n    },\n    colorPicker: {\n        position: 'relative',\n        [theme.breakpoints.down('xs')]: {\n            flexGrow: 1,\n        }\n    },\n    sizeSlider: {\n        flexGrow: 1,\n        [theme.breakpoints.down('xs')]: {\n            order: 1,\n        },\n        [theme.breakpoints.up('sm')]: {\n            width: 'auto',\n            marginLeft: theme.spacing(2),\n        }\n    },\n    iconButtons: {},\n    iconButton: {\n        [theme.breakpoints.down('xs')]: {\n            '&:not(:first-child)': {\n                marginLeft: theme.spacing(1),\n            },\n        },\n    },\n});\n\nconst BUTTON_MAP = [\n    {\n        id: 'undo',\n        icon: <Undo />,\n        action: 'onUndo',\n    },{\n        id: 'redo',\n        icon: <Redo />,\n        action: 'onRedo',\n    },{\n        id: 'clear',\n        icon: <Delete />,\n        action: 'onClear',\n    }\n];\n\nclass DeskToolbar extends PureComponent {\n\n    renderButton = () => {\n        const { classes, width } = this.props;\n        let size = isWidthDown('xs', width) ? 'small' : 'medium';\n        return (\n            <Box\n                className={classes.iconButtons}\n            >\n                {\n                    BUTTON_MAP.map(({ id, icon, action }) => (\n                        <IconButton\n                            key={id}\n                            onClick={this.props[action]}\n                            size={size}\n                            className={classes.iconButton}\n                        >\n                            {icon}\n                        </IconButton>\n                    ))\n                }\n            </Box>\n        )\n    }\n\n    render() {\n        const { classes, onColorSelect, onSizeChange, lineWidth } = this.props;\n        return (\n            <Toolbar\n                variant=\"dense\"\n                className={classes.toolbar}\n            >\n                <ColorPicker\n                    onColorSelect={onColorSelect}\n                    className={classes.colorPicker}\n                />\n                <SliderMaterial\n                    value={lineWidth}\n                    onChange={onSizeChange}\n                    aria-labelledby=\"discrete-slider\"\n                    valueLabelDisplay=\"auto\"\n                    step={1}\n                    marks\n                    min={1}\n                    max={100}\n                    className={classes.sizeSlider}\n                />\n                {\n                    this.renderButton()\n                }\n            </Toolbar>\n        )\n    }\n}\n\nexport default withWidth()(withStyles(styles)(DeskToolbar));","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Box } from \"@material-ui/core\";\nimport { GithubPicker } from 'react-color';\n\nconst COLORS = [\n    '#ffffff',\n    '#000075',\n    '#ffe119',\n    '#3cb44b',\n    '#4363d8',\n    '#f032e6',\n    '#42d4f4',\n    '#f58231',\n    '#e6beff',\n    '#e6194B',\n    '#fabebe',\n    '#000000',\n];\n\nconst styles = () => ({\n    color: {},\n    picker: {\n        background: 'transparent !important',\n        border: 'none !important',\n        boxShadow: 'none !important',\n        padding: '0 !important',\n    },\n});\n\nclass ColorPicker extends PureComponent {\n\n    handleChange = (color, e) => {\n        const { onColorSelect } = this.props;\n        if(onColorSelect) onColorSelect(color.hex);\n    }\n\n    render() {\n        const { classes, className } = this.props;\n        return (\n            <Box\n                className={cx(classes.color, className)}\n            >\n                <GithubPicker\n                    width={150}\n                    color={COLORS[0]}\n                    onChange={this.handleChange}\n                    triangle=\"hide\"\n                    colors={COLORS}\n                    className={classes.picker}\n                />\n            </Box>\n        )\n    }\n}\n\nexport default withStyles(styles)(ColorPicker);","import React, { PureComponent } from 'react';\nimport cx from 'classnames';\nimport { withStyles, Grid } from \"@material-ui/core\";\nimport ThumbUpIcon from '@material-ui/icons/ThumbUp';\nimport ThumbDownIcon from '@material-ui/icons/ThumbDown';\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\nimport { THUMB_STATUS_LIKE, THUMB_STATUS_DISLIKE } from '../helpers/constants';\n\nconst styles = () => ({\n    thumbClicker: {\n\n    },\n});\n\nclass ThumbClicker extends PureComponent {\n\n    state = {\n        value: null,\n    }\n\n    handleChange = (e, value) => {\n        const { onClick } = this.props;\n        this.setState(() => ({\n            value,\n        }));\n        onClick(value);\n    }\n\n    render() {\n        const { classes, className } = this.props;\n        const { value } = this.state;\n        return (\n            <Grid\n                container\n                className={cx(classes.thumbClicker, className)}\n            >\n                <ToggleButtonGroup size=\"small\" value={value} exclusive onChange={this.handleChange}>\n                    <ToggleButton key={1} value={THUMB_STATUS_LIKE}>\n                        <ThumbUpIcon />\n                    </ToggleButton>\n                    <ToggleButton key={2} value={THUMB_STATUS_DISLIKE}>\n                        <ThumbDownIcon />\n                    </ToggleButton>\n                </ToggleButtonGroup>\n            </Grid>\n        )\n    }\n}\n\nexport default withStyles(styles)(ThumbClicker);\n\n","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { Lobby } from './lobby';\nimport { GameInterface } from './game';\nimport { resetConfig } from \"../../actions/crocodile\";\n\nclass Root extends PureComponent {\n\n    componentWillUnmount() {\n        const { resetConfig } = this.props;\n        resetConfig();\n    }\n\n    render() {\n        const { isConnected, isRoomDefined } = this.props;\n        return isConnected ? (\n            <Fragment>\n                {\n                    !isRoomDefined ? <Lobby /> : <GameInterface />\n                }\n            </Fragment>\n        ) : (\n            <Fragment>\n                no connect\n            </Fragment>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            isConnected: store.socket.isConnected,\n            isRoomDefined: store.crocodile.room.status,\n        }\n    },\n    dispatch => {\n        return {\n            resetConfig: () => dispatch( resetConfig() ),\n        }\n    }\n)(Root);","import React, { PureComponent } from 'react';\nimport { Tetris as TetrisRoot } from '../games';\n\nclass Tetris extends PureComponent {\n\n    render() {\n        return (\n            <TetrisRoot />\n        )\n    }\n\n}\n\nexport default Tetris;\n\n","import React, { PureComponent } from 'react';\nimport { Crocodile as CrocodileRoot } from '../games';\n\nclass Crocodile extends PureComponent {\n\n    render() {\n        return (\n            <CrocodileRoot />\n        )\n    }\n\n}\n\nexport default Crocodile;\n","import React, { PureComponent } from 'react';\nimport Typography from '@material-ui/core/Typography';\n\nclass Page404 extends PureComponent {\n\n    render() {\n        console.log(this.props);\n        return (\n            <Typography\n                variant=\"h3\"\n            >\n                404\n            </Typography>\n        )\n    }\n\n}\n\nexport default Page404;\n\n","import React from 'react';\nimport { Page } from '../components';\nimport { SinglePlayer, MultiPlayer } from '../games/tetris';\n\nimport {\n    Home,\n    Tetris,\n    Crocodile,\n} from '../pages';\n\nexport const HOME = {\n    link: '/',\n    label: 'Home',\n    page: props => <Home {...props} />\n};\n\nexport const TETRIS = {\n    link: '/tetris',\n    label: 'Tetris',\n    name: 'Tetris',\n    description: 'Classic tetris, that you can play single or with friend.',\n    page: props => <Page\n        header={'Tetris'}\n        component={<Tetris {...props} />}\n    />\n};\n\nexport const CROCODILE = {\n    link: '/crocodile',\n    label: 'Crocodile',\n    name: 'Crocodile',\n    description: 'You can guess the word that painter draws or you can be painter.',\n    page: props => <Page\n        header={'Crocodile'}\n        component={<Crocodile {...props} />}\n    />\n};\n\nexport const TETRIS_SINGLE = {\n    link: '/tetris/singleplayer',\n    label: 'Singleplayer',\n    description: 'Play with your own',\n    page: props => <Page\n        header={'Tetris/singleplayer'}\n        component={<SinglePlayer {...props} />}\n    />\n};\n\nexport const TETRIS_ONLINE = {\n    link: '/tetris/multiplayer',\n    label: 'Multiplayer',\n    description: 'Play vs your friend',\n    page: props => <Page\n        header={'Tetris/multiplayer'}\n        component={<MultiPlayer {...props} />}\n    />\n};\n\n\nexport const ROUTES = [HOME, TETRIS, CROCODILE, TETRIS_SINGLE, TETRIS_ONLINE];\nexport const GAMES = [TETRIS, CROCODILE];\nexport const TETRIS_ROUTES = [TETRIS_SINGLE, TETRIS_ONLINE];","import React, { PureComponent } from 'react';\nimport { connect } from \"react-redux\";\nimport { Link } from 'react-router-dom';\nimport { withStyles, AppBar, Toolbar, IconButton, Typography, Button } from \"@material-ui/core\";\nimport HomeIcon from '@material-ui/icons/Home';\nimport { HOME } from '../helpers/routes';\nimport { HEADER_HEIGHT } from \"../helpers/constants\";\n\nconst styles = theme => ({\n    appBar: {},\n    title: {\n        flexGrow: 1,\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        display: 'block',\n        width: 0,\n    },\n    toolbar: {\n        [theme.breakpoints.down('sm')]: {\n            minHeight: 'auto',\n        },\n        [theme.breakpoints.up('sm')]: {\n            minHeight: HEADER_HEIGHT.MAX,\n        },\n    }\n});\n\nclass Header extends PureComponent {\n\n    render() {\n        const { classes, location: { pathname }, header, sub_header, topAction, topComponent } = this.props;\n        return (\n            <AppBar\n                position=\"static\"\n                color=\"primary\"\n                className={classes.appBar}\n            >\n                <Toolbar\n                    className={classes.toolbar}\n                >\n                    {\n                        pathname !== HOME.link && (\n                            <IconButton\n                                component={Link}\n                                to={HOME.link}\n                                onClick={topAction}\n                            >\n                                <HomeIcon />\n                            </IconButton>\n                        )\n                    }\n                    <Typography variant=\"h6\" className={classes.title}>\n                        {\n                            header && `${header}`\n                        }\n                        {\n                            sub_header && `/${sub_header}`\n                        }\n                    </Typography>\n                    {\n                        topAction && (\n                            <Button\n                                variant=\"contained\"\n                                color=\"secondary\"\n                                size=\"small\"\n                                onClick={topAction}\n                            >\n                                Leave\n                            </Button>\n                        )\n                    }\n                    {\n                        topComponent && topComponent\n                    }\n                </Toolbar>\n            </AppBar>\n        )\n    }\n\n}\n\nexport default connect(\n    store => {\n        const { header, sub_header, topAction, topComponent } = store.app;\n        return {\n            header,\n            sub_header,\n            topAction,\n            topComponent,\n        }\n    }\n)(withStyles(styles)(Header));\n","import React, { PureComponent } from 'react';\nimport { connect } from \"react-redux\";\nimport { withStyles } from \"@material-ui/core\";\nimport { Toolbar } from '../components';\n\nconst styles = theme => ({\n    footerToolbar: {\n        textAlign: 'center',\n        paddingTop: theme.spacing(0.5),\n        paddingBottom: theme.spacing(0.5),\n        justifyContent: 'center',\n    }\n});\n\nclass Footer extends PureComponent {\n\n    render() {\n        const { classes, status } = this.props;\n        return status ? (\n            <Toolbar\n                className={classes.footerToolbar}\n            >\n                {status}\n            </Toolbar>\n        ) : null\n    }\n\n}\n\nexport default connect(\n    store => {\n        return {\n            status: (store.crocodile.room || {}).appStatusText,\n        }\n    }\n)(withStyles(styles)(Footer));\n","import { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport { withSnackbar } from 'notistack';\nimport { socketConnect, socketDisconnect } from './actions/socket';\nimport SocketContext from './helpers/SocketContext';\nimport { updateOpponent, startNewGame, startMoving, stopMoving, stopGame, resetConfig, showResults, startNewGameAndMove } from \"./actions/tetris\";\nimport { updateConfig as updateConfigCrocodile, updateRoomList, updateRoom } from \"./actions/crocodile\";\nimport { SOCKET_CHANNEL, COMMON_ACTIONS, GAME_TETRIS, GAME_CROCODILE } from \"./helpers/constants\";\nimport { socketGameReset, socketGameDisconnect } from \"./socket/tetris\";\n\nclass Root extends PureComponent {\n\n    constructor(props) {\n        super(props);\n        this.listen_map = {\n            [COMMON_ACTIONS]: {\n                'SOCKET_MESSAGE': this.socketOnMessage,\n            },\n            [GAME_TETRIS]: {\n                'ON_GAME': props.updateOpponent,\n                'DO_BUTTON_ACTION': this.doTetrisActionButton,\n                'DO_GAME_DISCONNECT': props.socketGameDisconnect,\n                'DO_GAME_FINISH': this.doGameFinish,\n            },\n            [GAME_CROCODILE]: {\n                'LOBBY_UPDATE_CONFIG': props.updateConfigCrocodile,\n                'UPDATE_ROOM_LIST': props.updateRoomList,\n                'UPDATE_ROOM': props.updateRoom,\n            },\n        };\n    }\n\n    doGameFinish = () => {\n        const { isResultModalOpen, showResults } = this.props;\n        if(!isResultModalOpen) showResults();\n    }\n\n    doTetrisActionButton = ({ button_action }) => {\n        if(button_action && (button_action in this.props)) this.props[button_action]();\n    }\n\n    componentDidMount() {\n        const IO = this.context;\n        IO.on('connect', this.socketOnConnect);\n        IO.on('disconnect', this.socketOnDisconnect);\n        IO.on(SOCKET_CHANNEL, this.handleSocket);\n    }\n\n    componentWillUnmount() {\n        const IO = this.context;\n        IO.off('connect', this.socketOnConnect);\n        IO.off('disconnect', this.socketOnDisconnect);\n        IO.off(SOCKET_CHANNEL, this.handleSocket);\n    }\n\n    handleSocket = (props) => {\n        // console.log({\n        //     socketReceive: props,\n        // });\n        const { target, action, args } = props;\n        if(target in this.listen_map && action in this.listen_map[target]) {\n            //console.log(`${target} - ${action}`);\n            this.listen_map[target][action](args);\n        }\n    }\n\n    socketOnConnect = () => {\n        const socket = this.context;\n        const { socketConnect } = this.props;\n        socketConnect(socket.id);\n    }\n\n    socketOnDisconnect = () => {\n        const socket = this.context;\n        const { socketDisconnect } = this.props;\n        socketDisconnect(socket.id);\n    }\n\n    socketOnMessage = ({ message_type, message }) => {\n        const { enqueueSnackbar } = this.props;\n        enqueueSnackbar(message, {\n            variant: message_type,\n            autoHideDuration: 1500,\n        });\n    }\n\n    render() {\n        return null;\n    }\n\n}\n\nRoot.contextType = SocketContext;\n\nexport default connect(\n    store => {\n        return {\n            isResultModalOpen: store.tetris.isResultModalOpen,\n        }\n    },\n    dispatch => {\n        return {\n            //Store socket connection\n            socketConnect: id => dispatch( socketConnect(id) ),\n            socketDisconnect: id => dispatch( socketDisconnect(id) ),\n\n            //Tetris\n            updateOpponent: opponent => dispatch( updateOpponent(opponent) ),\n            resetConfig: () => dispatch( resetConfig() ),\n            showResults: () => dispatch( showResults() ),\n            socketGameReset: () => dispatch( socketGameReset() ),\n            socketGameDisconnect: () => dispatch( socketGameDisconnect() ),\n                //button_actions\n                startNewGame: () => dispatch( startNewGame() ),\n                startMoving: () => dispatch( startMoving() ),\n                stopMoving: () => dispatch( stopMoving() ),\n                stopGame: () => dispatch( stopGame() ),\n                startNewGameAndMove: () => dispatch( startNewGameAndMove() ),\n\n            //Crocodile\n            updateConfigCrocodile: config => dispatch( updateConfigCrocodile(config) ),\n            updateRoomList: rooms => dispatch( updateRoomList(rooms) ),\n            updateRoom: room => dispatch( updateRoom(room) ),\n        }\n    }\n)(withSnackbar(Root));\n","export const CONNECT = 'CONNECT';\nexport function socketConnect(id) {\n    return {\n        type: CONNECT,\n        payload: {\n            id,\n        },\n    };\n}\n\nexport const DISCONNECT = 'DISCONNECT';\nexport function socketDisconnect(id) {\n    return {\n        type: DISCONNECT,\n        payload: {\n            id,\n        },\n    };\n}","import React, { PureComponent } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport { withStyles, Grid } from \"@material-ui/core\";\nimport { Header, Footer } from './containers';\nimport { ROUTES } from './helpers/routes';\nimport IO from './IO';\nimport { Page404 } from './pages';\n\nconst styles = () => ({\n    layout: {\n        backgroundColor: '#191922',\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n    },\n    header: {\n        backgroundColor: '#121216',\n    },\n    body: {\n        position: 'relative',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexGrow: 1,\n    },\n    footer: {\n        backgroundColor: '#121216',\n        //height: 25,\n    },\n});\n\nclass Root extends PureComponent {\n\n    render() {\n        const { classes } = this.props;\n        return (\n            <Router>\n                <IO />\n                <Grid\n                    container\n                    direction=\"column\"\n                    alignItems=\"stretch\"\n                    justify=\"space-between\"\n                    className={classes.layout}\n                >\n                    <Grid\n                        item\n                        className={classes.header}\n                    >\n                        <Route\n                            component={props => <Header {...props} />}\n                        />\n                    </Grid>\n                    <Grid\n                        item\n                        className={classes.body}\n                    >\n                        <Switch>\n                            {\n                                ROUTES.map(({ link, label, page }, index) => (\n                                    <Route\n                                        key={index}\n                                        exact\n                                        path={link}\n                                        component={page}\n                                    />\n                                ))\n                            }\n                            <Route\n                                path=\"/:errorPage\"\n                                component={props => <Page404 {...props} />}\n                            />\n                        </Switch>\n                    </Grid>\n                    <Grid\n                        item\n                        className={classes.footer}\n                    >\n                        <Footer />\n                    </Grid>\n                </Grid>\n            </Router>\n        )\n    }\n\n}\n\nexport default withStyles(styles)(Root);\n","import { createContext } from 'react';\n\nconst SnackbarContext = createContext();\n\nexport default SnackbarContext;","import React, { PureComponent } from 'react';\nimport { withSnackbar } from 'notistack';\nimport Root from './Root';\nimport SnackbarContext from \"./helpers/SnackbarContext\";\nimport ResponseContext from \"./helpers/ResponseContext\";\n\nclass App extends PureComponent {\n\n    showSnackbar = (message, type=\"default\") => {//TODO: type: 'default' | 'success' | 'error' | 'info\n        const { enqueueSnackbar } = this.props;\n        enqueueSnackbar(message, {\n            variant: type,\n            autoHideDuration: 2500,\n        });\n    }\n\n    validateResponse = (response, callback) => {\n        if(response && response.error) {\n            this.showSnackbar(response.error, 'error');\n        } else {\n            if(callback && typeof callback === 'function') callback(response);\n        }\n    }\n\n    render() {\n        return (\n            <SnackbarContext.Provider value={this.showSnackbar}>\n                <ResponseContext.Provider value={this.validateResponse}>\n                    <Root />\n                </ResponseContext.Provider>\n            </SnackbarContext.Provider>\n        )\n    }\n\n}\n\nexport default withSnackbar(App);\n","import { SET_APP, CLEAN_APP } from \"../actions/app\";\n\nlet initialState = {\n    header: null,\n    sub_header: null,\n    topAction: null,\n    topComponent: null,\n};\n\nexport default function room(state = initialState, action) {\n\n    let newState;\n\n    switch(action.type) {\n\n        case SET_APP:\n            newState = {\n                ...state,\n                ...action.payload\n            };\n            //console.log(newState);\n            return newState;\n\n        case CLEAN_APP:\n            return initialState;\n\n        default:\n            return state;\n\n    }\n\n}","import { CONNECT, DISCONNECT } from \"../actions/socket\";\n\nlet initialState = {\n    isConnected: false,\n    id: null,\n};\n\nexport default function room(state = initialState, action) {\n\n    let newState;\n\n    switch(action.type) {\n\n        case CONNECT:\n            newState = JSON.parse(JSON.stringify(state));\n            newState.isConnected = true;\n            newState.id = action.payload.id;\n            //console.log(`${action.payload.id} connected`);\n            return newState;\n\n        case DISCONNECT:\n            //console.log(`${action.payload.id} disconnected`);\n            return initialState;\n\n        default:\n            return state;\n\n    }\n\n}","import { UPDATE_ROOM, CLEAN_ROOM, UPDATE_CONFIG, RESET_CONFIG, UPDATE_ROOM_LIST } from \"../actions/crocodile\";\nimport { cloneDeep } from \"lodash\";\nimport { STATUS_MAP } from '../games/crocodile/helpers/constants';\n\nlet initialConfig = {\n    nickname: '',\n    step: 'LOBBY_STEP_NICKNAME',\n};\n\nlet initialState = {\n    room: {},\n    rooms: [],\n    config: {\n        ...initialConfig,\n    },\n    // app: {\n    //     appStatusText: null,\n    //     appHeader: null,\n    //     appTopAction: null,\n    // }\n};\n\nexport default function room(state = initialState, action) {\n\n    let newState;\n\n    switch(action.type) {\n\n        case UPDATE_ROOM:\n            newState = cloneDeep(state);\n            let room = action.payload.room;\n            newState.room = {\n                ...newState.room,\n                ...room,\n                appStatusText: room.status ? STATUS_MAP[room.status](room) : null,\n            };\n            // newState.app = {\n            //     ...newState.app,\n            //     appStatusText: STATUS_MAP[room.status](room),\n            // };\n            // console.log(newState);\n            return newState;\n\n        case CLEAN_ROOM:\n            return {\n                ...initialState,\n                config: {\n                    ...state.config,\n                    step: 'LOBBY_STEP_ROOM_SELECTION',\n                }\n            };\n\n        case UPDATE_CONFIG:\n            return {\n                ...state,\n                config: {\n                    ...state.config,\n                    ...action.payload.config\n                }\n            }\n\n        case RESET_CONFIG:\n            return {\n                ...state,\n                config: {\n                    ...initialConfig,\n                    nickname: state.config.nickname,\n                }\n            }\n\n        case UPDATE_ROOM_LIST:\n            return {\n                ...state,\n                rooms: action.payload.rooms\n            }\n\n        default:\n            return state;\n\n    }\n\n}","import { SET_SPEED, MOVE_FIGURE, START_NEW_GAME, STOP_GAME, START_MOVING, STOP_MOVING, MOVE_FIGURE_DOWN, ROTATE_FIGURE, STORE_ACTION_DATA, CLOSE_RESULTS, UPDATE_OPPONENT, UPDATE_CONFIG, RESET_CONFIG, SHOW_RESULTS } from \"../actions/tetris\";\nimport { COLS, ROWS, POSITION, SPEED, MOVE_STEP_MAP, ROWS_HIDDEN, MOVE_DIRECTION } from \"../games/tetris/helpers/constants\";\nimport {\n    generateGrid,\n    renderDemoHouse,\n    getRandomRotation,\n    getRandomFigure,\n    merge,\n    getAllFullRowsIndexes,\n    cleanTableFromFullRows,\n    getScoreOptimalSpeed,\n    getFigureMap,\n    hasTablesConflict\n} from \"../games/tetris/helpers/etc\";\n\nlet hasFigureRightToMove = (position, store) => {\n    const { table, figure, rotation } = store;\n    if(!isPositionInArea(position, rotation, store)) return false;\n    let figureMap = getFigureMap(figure[rotation], position);\n    return hasTablesConflict(table, figureMap);\n};\n\nlet isPositionInArea = (position, rotation, store) => {\n    let [row, col] = position;\n    const { figure } = store;\n    let rowLimit = row + figure[rotation].length;\n    let colLimit = col + figure[rotation][0].length;\n    return rowLimit <= ROWS && colLimit <= COLS;\n};\n\nlet isEndGame = (store) => {\n    const { table } = store;\n    let checkedRow = table[ROWS_HIDDEN - 1];\n    return checkedRow.find(col => col === 1);\n};\n\nlet isFigureCloseToRight = (store) => {\n    const { position, rotation, table, figure } = store;\n    let colPosition = position[1];\n    return colPosition < (table[0].length - figure[rotation][0].length);\n};\n\nlet isFigureCloseToLeft = (store) => {\n    const { position } = store;\n    let colPosition = position[1];\n    return colPosition - 1 >= 0;\n};\n\n\n\n\nlet getFigureRotatePosition = (rotation, store) => {\n    const { position } = store;\n    let [rowPosition, colPosition] = position;\n    let figureOutsideSpace = getFigureOutsideSpace(rotation, store);\n    return figureOutsideSpace < 0 ? [rowPosition, colPosition+figureOutsideSpace] : [rowPosition, colPosition];\n};\n\nlet getFigureOutsideSpace = (rotation, store) => {\n    const { position, table, figure } = store;\n    let colPosition = position[1];\n    let tableRowLength = table[0].length;\n    let currentFigureLength = figure[rotation][0].length;\n    return tableRowLength - (colPosition + currentFigureLength);\n};\n\nlet hasFigureRightToRotate = (position, rotation, store) => {\n    const { table } = store;\n    if(!isPositionInArea(position, rotation, store)) return false;\n    let figureMap = getFigureFullGrid(store);\n    return hasTablesConflict(table, figureMap);\n};\n\nlet getFigureFullGrid = (store) => {\n    const { figure, position, rotation } = store;\n    let rows = figure[rotation].length;\n    let cols = figure[rotation][0].length;\n    let size = rows > cols ? rows : cols;\n    let figureSquare = Array.from({ length: size }, () => Array.from({ length: size }, () => 1));\n    return getFigureMap(figureSquare, position);\n};\n\nlet initialConfig = {\n    nickname: '',\n    type: 'TYPE_CLIENT',\n    step: 'LOBBY_STEP_NICKNAME',\n};\n\nlet initialState = {\n    table: renderDemoHouse(generateGrid(COLS, ROWS)),\n    rotation: getRandomRotation(),\n    rotationNext: getRandomRotation(),\n    figure: getRandomFigure(),\n    figureNext: getRandomFigure(),\n    position: POSITION,\n    speed: SPEED,\n    score: 0,\n    isPause: true,\n    isGameRunning: false,\n    isResultModalOpen: false,\n    moveAction: null,\n    key_map: null,\n    opponent: null,\n    config: {\n        ...initialConfig,\n    },\n};\n\nconst MOVE_RULE = {\n    [MOVE_DIRECTION.LEFT]: store => isFigureCloseToLeft(store),\n    [MOVE_DIRECTION.RIGHT]: store => isFigureCloseToRight(store),\n};\n\nlet timer = null;\n\nlet setTimer = (speed, store) => {\n    clearInterval(timer);\n    timer = setInterval(() => {\n        store.moveAction();\n    }, speed);\n};\n\nexport default function room(state = initialState, action) {\n\n    //let newState;\n\n    switch(action.type) {\n\n        case SET_SPEED:\n            return {\n                ...state,\n                speed: action.payload.speed,\n            };\n\n        case MOVE_FIGURE:\n            let direction = action.payload.direction;\n            let positionNext = MOVE_STEP_MAP[direction](state.position);\n            if(direction in MOVE_RULE && !MOVE_RULE[direction](state, action.payload.rotation)) return state;\n            return hasFigureRightToMove(positionNext, state) ? {\n                ...state,\n                position: positionNext,\n            } : state;\n\n        case START_NEW_GAME:\n            clearInterval(timer);\n            return {\n                ...state,\n                isResultModalOpen: false,\n                table: generateGrid(COLS, ROWS),\n                figure: getRandomFigure(),\n                figureNext: getRandomFigure(),\n                position: POSITION,\n                rotation: getRandomRotation(),\n                rotationNext: getRandomRotation(),\n                score: 0,\n                isPause: false,\n                isGameRunning: true,\n                speed: SPEED,\n            };\n\n        case STOP_GAME:\n            clearInterval(timer);\n            return {\n                ...initialState,\n                moveAction: state.moveAction,\n                key_map: state.key_map,\n                config: state.config,\n                opponent: state.opponent,\n            };\n\n        case START_MOVING:\n            setTimer(state.speed, state);\n            return {\n                ...state,\n                isPause: false,\n            };\n\n        case STOP_MOVING:\n            clearInterval(timer);\n            return {\n                ...state,\n                isPause: true,\n            };\n\n        case MOVE_FIGURE_DOWN:\n            let positionNext2 = MOVE_STEP_MAP[MOVE_DIRECTION.DOWN](state.position);\n            if(hasFigureRightToMove(positionNext2, state)) {\n                return {\n                    ...state,\n                    position: positionNext2,\n                };\n            } else {\n                if(!isEndGame(state)) {\n                    let tableWithFigure = merge(state.figure[state.rotation], state.position, state.table);\n                    let fullRows = getAllFullRowsIndexes(tableWithFigure);\n                    let scoreNew = state.score + fullRows.length;\n                    let speedNew = state.speed;\n                    if(fullRows.length) {\n                        tableWithFigure = cleanTableFromFullRows(tableWithFigure, fullRows);\n                        speedNew = getScoreOptimalSpeed(scoreNew, state.speed);\n                    }\n                    setTimer(speedNew, state);\n                    return {\n                        ...state,\n                        table: tableWithFigure,\n                        score: scoreNew,\n                        speed: speedNew,\n                        figure: state.figureNext,\n                        figureNext: getRandomFigure(),\n                        position: POSITION,\n                        rotation: state.rotationNext,\n                        rotationNext: getRandomRotation(),\n                    };\n                } else {\n                    clearInterval(timer);\n                    return {\n                        ...state,\n                        isResultModalOpen: true,\n                        isGameRunning: false,\n                        speed: SPEED,\n                    }\n                }\n            }\n\n        case ROTATE_FIGURE:\n            let rotationNew = action.payload.getRotation(state.rotation);\n            let positionNew = getFigureRotatePosition(rotationNew, state);\n            return hasFigureRightToRotate(positionNew, rotationNew, state) ? {\n                ...state,\n                position: positionNew,\n                rotation: rotationNew,\n            } : state;\n\n        case STORE_ACTION_DATA:\n            return {\n                ...state,\n                moveAction: action.payload.moveFunc,\n                key_map: action.payload.key_map,\n            };\n\n        case CLOSE_RESULTS:\n            return {\n                ...state,\n                isResultModalOpen: false,\n            };\n\n        case UPDATE_OPPONENT:\n            return {\n                ...state,\n                opponent: {\n                    ...state.opponent,\n                    ...action.payload.opponent,\n                },\n            };\n\n        case UPDATE_CONFIG:\n            return {\n                ...state,\n                config: {\n                    ...state.config,\n                    ...action.payload.config\n                }\n            }\n\n        case RESET_CONFIG:\n            return {\n                ...state,\n                opponent: null,\n                config: {\n                    ...initialConfig,\n                    nickname: state.config.nickname,\n                }\n            }\n\n        case SHOW_RESULTS:\n            clearInterval(timer);\n            return {\n                ...state,\n                isResultModalOpen: true,\n                isGameRunning: false,\n            }\n\n        default:\n            return state;\n\n    }\n\n}","import { combineReducers } from 'redux';\n\nimport app from './app';\nimport socket from './socket';\nimport crocodile from './crocodile';\nimport tetris from './tetris';\n\nconst mainReducer = combineReducers({\n    app,\n    socket,\n    crocodile,\n    tetris,\n});\n\nexport default mainReducer;","import React, { PureComponent } from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter as Router, Route } from 'react-router-dom';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport { SnackbarProvider } from 'notistack';\nimport SocketContext from './helpers/SocketContext';\nimport thunk from 'redux-thunk';\nimport socketIOClient from 'socket.io-client';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport theme from './helpers/theme';\nimport App from './App';\nimport mainReducer from './reducers';\nimport { SOCKET_SERVER } from \"./helpers/constants\";\nimport { apiRequest } from './helpers/etc';\n\nconst IO = socketIOClient(SOCKET_SERVER);\n\nconst store = createStore(\n    mainReducer,\n    applyMiddleware(\n        thunk,\n        apiRequest(IO),\n    )\n);\n\n// const Component = () => {\n//     return (\n//         <Router>\n//             <Provider\n//                 store={store}\n//             >\n//                 <MuiThemeProvider theme={theme}>\n//                     <SnackbarProvider maxSnack={3} anchorOrigin={{\n//                         vertical: 'top',\n//                         horizontal: 'center',\n//                     }}>\n//                         <CssBaseline />\n//                         <SocketContext.Provider value={IO}>\n//                             <Route component={App} />\n//                         </SocketContext.Provider>\n//                     </SnackbarProvider>\n//                 </MuiThemeProvider>\n//             </Provider>\n//         </Router>\n//     )\n// };\n\nclass Comp extends PureComponent {\n    render() {\n        return (\n            <Router>\n                <Provider\n                    store={store}\n                >\n                    <MuiThemeProvider theme={theme}>\n                        <SnackbarProvider maxSnack={3} anchorOrigin={{\n                            vertical: 'top',\n                            horizontal: 'center',\n                        }}>\n                            <CssBaseline />\n                            <SocketContext.Provider value={IO}>\n                                <Route component={App} />\n                            </SocketContext.Provider>\n                        </SnackbarProvider>\n                    </MuiThemeProvider>\n                </Provider>\n            </Router>\n        )\n    }\n}\n\nReactDOM.render(<Comp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}