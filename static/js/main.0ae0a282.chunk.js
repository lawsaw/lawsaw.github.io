(this.webpackJsonpgamehub=this.webpackJsonpgamehub||[]).push([[0],{228:function(e,t,n){e.exports=n(445)},233:function(e,t,n){},273:function(e,t){},445:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o),c=(n(233),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function s(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var l=n(48),u=n(57),A=n(503),p=n(477),m=n(71),g=Object(a.createContext)(),E=n(201),f=n(202),h=n.n(f),d=n(12),b=n(61),C=n(101),B=Object(C.a)({palette:{type:"dark"}}),O=n(5),j=n(3),I=n(6),v=n(7),Q=n(8),w=n(490),y=n(11),k=n(4),N=n(502),S=n(481),T=n(479),_=n(76),R=n(478),x=n(218),M=n.n(x),G=function(e){var t=e.label,n=e.to,a=e.component;return r.a.createElement(u.a,{path:n,exact:!0,children:function(e){var o=e.match;return r.a.createElement(a||R.a,{to:n,disabled:Boolean(o),component:l.b,children:t})}})},P=n(18),Y=n.n(P),L=n(504),H=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).setSizeForce=function(){var e=n.getSize();n.setSize(e),setTimeout((function(){var e=n.getSize();n.setSize(e)}),200)},n.listener=function(){n.getting||clearTimeout(n.timer),n.getting=!1,n.timer=setTimeout((function(){n.getting=!0;var e=n.getSize();n.setSize(e)}),250)},n.setType1=function(e){var t=n.props.k,a=e-n.spacing;return{width:a,height:a*t}},n.setType2=function(e){var t=n.props.k,a=e-n.spacing;return{width:a/t,height:a}},n.getSize=function(){if(!n.ref.current)return!1;var e,t=n.ref.current.parentElement,a=t.offsetWidth,r=t.offsetHeight;return a<r?(e=n.setType1(a)).height>r&&(e=n.setType2(r)):a>r?(e=n.setType2(r)).width>a&&(e=n.setType1(a)):console.log("type 3"),e},n.setSize=function(e){if(!e)return!1;var t=e.width,a=e.height;n.setState((function(){return{width:t,height:a}}))},n.updateChildren=function(){var e=n.props.children,t=n.state,r=t.width,o=t.height;return Object(a.cloneElement)(e,{resizer:{width:r,height:o}})},n.ref=Object(a.createRef)(),n.getting=!0,n.spacing=e.theme.spacing(2),n.state={width:"100%",height:"100%"},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.setSizeForce(),window.addEventListener("resize",this.listener,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.listener,!1)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=this.state,o=a.width,i=a.height;return r.a.createElement(L.a,{className:Y()(t.resizer,n),ref:this.ref,style:{width:"".concat(o,"px"),height:"".concat(i,"px")}},this.updateChildren())}}]),t}(a.PureComponent),D=Object(y.a)((function(){return{resizer:{position:"absolute",minWidth:50,minHeight:50,transition:"all 0.3s ease 0s"}}}),{withTheme:!0})(H),U=n(2),z=n(145),W=n(507),K=n(480),F=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){var t=n.props.onSubmit;e.preventDefault(),t(e)},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onChange,a=e.placeholder,o=e.value,i=e.className,c=Object(U.a)(e,["classes","onChange","placeholder","value","className"]);return r.a.createElement(z.a,Object.assign({className:Y()(t.root,i),square:!0},c),r.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},r.a.createElement(W.a,{className:t.input,placeholder:a,value:o,onChange:n,autoFocus:!0}),r.a.createElement(T.a,{className:t.iconButton,onClick:this.handleSubmit},r.a.createElement(K.a,null))))}}]),t}(a.PureComponent),J=Object(y.a)((function(e){return{root:{position:"relative"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{},form:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"}}}))(F);function V(e){return{type:"SET_APP",payload:e}}var q,$,X,Z,ee,te,ne,ae,re=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setApp)({header:e.header})}},{key:"componentWillUnmount",value:function(){(0,this.props.setApp)({header:null})}},{key:"render",value:function(){return this.props.component}}]),t}(a.PureComponent),oe=Object(d.b)(null,(function(e){return{setApp:function(t){return e(V(t))}}}))(re),ie=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.children,o=Object(U.a)(e,["classes","className","children"]);return r.a.createElement(S.a,Object.assign({className:Y()(t.toolbar,n)},o),a)}}]),t}(a.PureComponent),ce=Object(y.a)((function(e){return{toolbar:{paddingTop:0,paddingBottom:0,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),minHeight:"auto"}}}))(ie),se=n(482),le=n(483),ue=n(484),Ae=n(485),pe=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.onClose,o=e.title,i=void 0===o?"Game results":o;return n&&n.length?r.a.createElement(Oe,{open:!0,title:i,isCancel:!0,onClose:a},r.a.createElement(se.a,{className:t.table},r.a.createElement(le.a,null,n.map((function(e,n){var a=e.label,o=e.value;return r.a.createElement(ue.a,{key:n,className:t.row},r.a.createElement(Ae.a,null,a,": "),r.a.createElement(Ae.a,{align:"right"},o))}))))):null}}]),t}(a.PureComponent),me=Object(y.a)((function(){return{table:{},row:{"&:only-child":{"& > *":{border:"none"}}}}}))(pe),ge=n(207),Ee=n.n(ge),fe=n(505),he=n(486),de=n(487),be=n(488),Ce=Object(y.a)((function(){return{paper:{width:"100%"}}}))(fe.a),Be=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){(0,n.props.onClose)()},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,a=e.title,o=e.isCancel,i=e.buttons,c=e.children;return r.a.createElement(Ce,{open:n,onClose:this.handleClose,maxWidth:"xs"},r.a.createElement(he.a,{disableTypography:!0,className:t.title},r.a.createElement(_.a,{variant:"h6",className:t.titleLabel},a),o?r.a.createElement(T.a,{onClick:this.handleClose},r.a.createElement(Ee.a,null)):null),r.a.createElement(de.a,{dividers:!0,className:t.content},c),r.a.createElement(be.a,{className:t.actions},i?i.map((function(e,t){var n=e.label,a=Object(U.a)(e,["label"]);return r.a.createElement(R.a,Object.assign({key:t},a),n)})):null,o?r.a.createElement(R.a,{variant:"contained",onClick:this.handleClose,color:"secondary"},"Cancel"):null))}}]),t}(a.PureComponent),Oe=Object(y.a)((function(e){return{title:{display:"flex",alignItems:"center",padding:e.spacing(2)},titleLabel:{flexGrow:1},content:{padding:e.spacing(2)},actions:{padding:e.spacing(2)}}}))(Be),je=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.isBack,o=void 0===a||a,i=e.isNext,c=void 0===i||i,s=e.onBack,l=e.onNext,u=Object(U.a)(e,["classes","className","isBack","isNext","onBack","onNext"]);return r.a.createElement(L.a,Object.assign({className:Y()(t.stepper,n)},u),o?r.a.createElement(R.a,{variant:"contained",onClick:s,className:t.button},"Back"):null,c?r.a.createElement(R.a,{variant:"contained",onClick:l,className:t.button},"Next"):null)}}]),t}(a.PureComponent),Ie=Object(y.a)((function(e){return{stepper:{marginTop:e.spacing(3),width:250},button:{margin:e.spacing(1)}}}))(je),ve=n(489),Qe=n(491),we=n(492),ye=n(493),ke=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ve.a,null,r.a.createElement(w.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:1},hr.map((function(t){var n=t.label,o=t.link,i=t.description,c=Object(a.forwardRef)((function(e,t){return r.a.createElement(G,Object.assign({to:o,label:r.a.createElement(Qe.a,null,r.a.createElement(_.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},i))},e))}));return r.a.createElement(w.a,{key:o,item:!0,zeroMinWidth:!0,xs:6,md:4,lg:3},r.a.createElement(ye.a,{className:e.card},r.a.createElement(c,{component:function(t){return r.a.createElement(we.a,Object.assign({className:e.actionArea},t))}})))}))))}}]),t}(a.PureComponent),Ne=Object(y.a)((function(){return{}}))(ke),Se=n(43),Te=[0,4],_e="MOVE_DIRECTION_LEFT",Re="MOVE_DIRECTION_RIGHT",xe="MOVE_DIRECTION_UP",Me="MOVE_DIRECTION_DOWN",Ge=[xe,Re,Me,_e],Pe=(q={},Object(k.a)(q,Me,(function(e){var t=Object(Se.a)(e,2);return[t[0]+1,t[1]]})),Object(k.a)(q,_e,(function(e){var t=Object(Se.a)(e,2);return[t[0],t[1]-1]})),Object(k.a)(q,Re,(function(e){var t=Object(Se.a)(e,2);return[t[0],t[1]+1]})),q),Ye="ArrowLeft",Le="ArrowRight",He="ArrowUp",De="ArrowDown",Ue="Space",ze={T:($={},Object(k.a)($,xe,[[0,1,0],[1,1,1]]),Object(k.a)($,Me,[[1,1,1],[0,1,0]]),Object(k.a)($,_e,[[0,1],[1,1],[0,1]]),Object(k.a)($,Re,[[1,0],[1,1],[1,0]]),$),Z:(X={},Object(k.a)(X,xe,[[0,1],[1,1],[1,0]]),Object(k.a)(X,Me,[[0,1],[1,1],[1,0]]),Object(k.a)(X,_e,[[1,1,0],[0,1,1]]),Object(k.a)(X,Re,[[1,1,0],[0,1,1]]),X),S:(Z={},Object(k.a)(Z,xe,[[1,0],[1,1],[0,1]]),Object(k.a)(Z,Me,[[1,0],[1,1],[0,1]]),Object(k.a)(Z,_e,[[0,1,1],[1,1,0]]),Object(k.a)(Z,Re,[[0,1,1],[1,1,0]]),Z),Q:(ee={},Object(k.a)(ee,xe,[[1,1],[1,1]]),Object(k.a)(ee,Me,[[1,1],[1,1]]),Object(k.a)(ee,_e,[[1,1],[1,1]]),Object(k.a)(ee,Re,[[1,1],[1,1]]),ee),J:(te={},Object(k.a)(te,xe,[[1,1],[1,0],[1,0]]),Object(k.a)(te,Me,[[0,1],[0,1],[1,1]]),Object(k.a)(te,_e,[[1,0,0],[1,1,1]]),Object(k.a)(te,Re,[[1,1,1],[0,0,1]]),te),L:(ne={},Object(k.a)(ne,xe,[[1,1],[0,1],[0,1]]),Object(k.a)(ne,Me,[[1,0],[1,0],[1,1]]),Object(k.a)(ne,_e,[[1,1,1],[1,0,0]]),Object(k.a)(ne,Re,[[0,0,1],[1,1,1]]),ne),I:(ae={},Object(k.a)(ae,xe,[[1],[1],[1],[1]]),Object(k.a)(ae,Me,[[1],[1],[1],[1]]),Object(k.a)(ae,_e,[[1,1,1,1]]),Object(k.a)(ae,Re,[[1,1,1,1]]),ae)};function We(){return function(e){e({type:"START_NEW_GAME"}),e(Ke())}}function Ke(){return{type:"START_MOVING"}}function Fe(e){return{type:"UPDATE_CONFIG",payload:{config:e}}}var Je=n(24),Ve=n(62);function qe(e,t){return Array.from({length:t},(function(){return Array.from({length:e},(function(){return 0}))}))}function $e(e,t,n){var a=Object(Se.a)(t,2),r=a[0],o=a[1],i=Object(Ve.cloneDeep)(n);return i.map((function(t,n){return n===r&&e.forEach((function(e,t){var a;(a=i[n+t]).splice.apply(a,[o,e.length].concat(Object(Je.a)(e))).forEach((function(e,a){0!==e&&(i[n+t][o+a]=1)}))})),t.map((function(e){return e}))}))}function Xe(){var e=Math.ceil(Math.random()*(Ge.length-1));return Ge[e]}function Ze(){var e=Object.keys(ze),t=Math.floor(Math.random()*e.length);return ze[e[t]]}function et(e){var t=Ge.length,n=Ge.indexOf(e);return 0===n?Ge[t-1]:Ge[n-1]}function tt(e){var t=Ge.length,n=Ge.indexOf(e);return n===t-1?Ge[0]:Ge[n+1]}function nt(e,t){return!e.find((function(e,n){return e.find((function(e,a){return e===t[n][a]&&1===e}))}))}function at(e){return e.reduce((function(e,t,n){return 10===t.reduce((function(e,t){return e+t}))&&e.push(n),e}),[])}function rt(e,t){var n=Array.from({length:10},(function(){return 0})),a=Object(Ve.cloneDeep)(e);return t.forEach((function(e,t,r){var o=a.slice(0,e),i=a.slice(r[t]+1,a.length);a=[n].concat(Object(Je.a)(o),Object(Je.a)(i))})),a}function ot(e,t){return $e(e,t,qe(10,24))}function it(e,t){for(var n=1;n<t;n++)e>=1*n&&e<1*n+1&&t!==150-10*n&&(t-=10);return t}var ct=function(e){function t(e){var n,a;return Object(O.a)(this,t),(a=Object(I.a)(this,Object(v.a)(t).call(this,e))).handleKeyPress=function(e){var t=e.code,n=a.props.key_map;t in n&&n[t]()},a.key_map=(n={},Object(k.a)(n,He,(function(){return e.rotateFigure(et)})),Object(k.a)(n,De,(function(){return e.rotateFigure(tt)})),Object(k.a)(n,Ye,(function(){return e.moveFigure(_e)})),Object(k.a)(n,Le,(function(){return e.moveFigure(Re)})),Object(k.a)(n,Ue,(function(){return e.moveFigureDown()})),n),a}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.storeActionData)(e.moveFigureDown,this.key_map),document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){return null}}]),t}(a.PureComponent),st=Object(d.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.key_map;return{key_map:!a&&n?r:{}}}),(function(e){return{moveFigure:function(t){e(function(e){return{type:"MOVE_FIGURE",payload:{direction:e}}}(t))},moveFigureDown:function(){e({type:"MOVE_FIGURE_DOWN"})},rotateFigure:function(t){e(function(e){return{type:"ROTATE_FIGURE",payload:{getRotation:e}}}(t))},storeActionData:function(t,n){e(function(e,t){return{type:"STORE_ACTION_DATA",payload:{moveFunc:e,key_map:t}}}(t,n))}}}))(ct),lt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.results,n=e.closeResults;return r.a.createElement(a.Fragment,null,r.a.createElement(Yn,{isOpponent:!1}),t?r.a.createElement(me,{data:t,onClose:n}):null)}}]),t}(a.PureComponent),ut=Object(d.b)((function(e){var t=e.tetris,n=t.isResultModalOpen,a=t.score;return{results:n?[{label:"Your score",value:a}]:null}}),(function(e){return{closeResults:function(){e({type:"CLOSE_RESULTS"})}}}))(lt),At=function(e){function t(e){var n,a;return Object(O.a)(this,t),(a=Object(I.a)(this,Object(v.a)(t).call(this,e))).steps=(n={},Object(k.a)(n,"LOBBY_STEP_NICKNAME",r.a.createElement(It,null)),Object(k.a)(n,"LOBBY_STEP_TYPE_SELECTING",r.a.createElement(kt,null)),Object(k.a)(n,"LOBBY_STEP_CONNECTION",r.a.createElement(St,null)),n),a}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.step;return r.a.createElement(L.a,{className:t.lobby},n in this.steps?this.steps[n]:n)}}]),t}(a.PureComponent),pt=Object(d.b)((function(e){return{step:e.tetris.config.step}}))(Object(y.a)((function(){return{lobby:{position:"relative"}}}))(At)),mt=n(39),gt=n.n(mt),Et=50,ft=60;function ht(){var e=!1;return function(t){e||(e=!0,t(),setTimeout((function(){e=!1}),750))}}var dt=n(14),bt={type:"GAME_TETRIS",meta:{remote:"META_SOCKET_EMIT"}};function Ct(e){return Object(dt.a)({action:"MAKE_CONNECTION",server_id:e},bt)}function Bt(){return function(e){e({type:"STOP_GAME"}),e(Ct())}}var Ot=Object(a.createContext)(),jt=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).handleNicknameChange=function(e){var t=e.target.value;(0,n.props.updateConfig)({nickname:t})},n.submitNickname=function(){var e,t,a,r,o,i;return gt.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=n.context,t=n.props,a=t.nickname,r=t.updateConfig,o=t.socketValidateNickname,c.next=4,gt.a.awrap(o(a));case 4:i=c.sent,e(i,(function(e){r(e)}));case 6:case"end":return c.stop()}}))},n.handleNicknameSubmit=function(){n.handleNicknameSubmitDecorator(n.submitNickname)},n.handleNicknameSubmitDecorator=ht(),n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.nickname;return r.a.createElement(J,{onChange:this.handleNicknameChange,onSubmit:this.handleNicknameSubmit,placeholder:"Enter your nickname",value:e})}}]),t}(a.PureComponent);jt.contextType=Ot;var It=Object(d.b)((function(e){return{nickname:e.tetris.config.nickname}}),(function(e){return{updateConfig:function(t){return e(Fe(t))},socketValidateNickname:function(t){return e(function(e){return Object(dt.a)({action:"VALIDATE_NICKNAME",nickname:e},bt)}(t))}}}))(jt),vt=n(509),Qt=n(494),wt=n(506),yt=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleType=function(e){var t=e.target.value;(0,n.props.updateConfig)({type:t})},n.handleBack=function(){(0,n.props.updateConfig)({step:"LOBBY_STEP_NICKNAME"})},n.handleNext=function(){(0,n.props.updateConfig)({step:"LOBBY_STEP_CONNECTION"})},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.type;return r.a.createElement(L.a,{className:t.form},r.a.createElement(vt.a,{value:n,onChange:this.handleType},r.a.createElement(Qt.a,{value:"TYPE_CLIENT",control:r.a.createElement(wt.a,null),label:"Client"}),r.a.createElement(Qt.a,{value:"TYPE_SERVER",control:r.a.createElement(wt.a,null),label:"Server"})),r.a.createElement(Ie,{onBack:this.handleBack,onNext:this.handleNext}))}}]),t}(a.PureComponent),kt=Object(d.b)((function(e){return{type:e.tetris.config.type}}),(function(e){return{updateConfig:function(t){return e(Fe(t))}}}))(Object(y.a)((function(e){return{form:{margin:e.spacing(2),width:200}}}))(yt)),Nt=function(e){function t(e){var n,o;return Object(O.a)(this,t),(o=Object(I.a)(this,Object(v.a)(t).call(this,e))).renderStepTypeClient=function(){var e=o.state.server_id;return r.a.createElement(a.Fragment,null,r.a.createElement(_.a,null,"Your friend is ought to be server. Ask him to provide you his ID"),r.a.createElement(J,{onChange:o.handleClientChange,onSubmit:o.handleClientSubmit,placeholder:"Enter your friend's id",value:e}))},o.renderStepTypeServer=function(){return r.a.createElement(g.Consumer,null,(function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(_.a,null,"Share your ID with your friend"),r.a.createElement(_.a,null,r.a.createElement("code",null,e.id)))}))},o.handleClientChange=function(e){var t=e.target.value;o.setState((function(){return{server_id:t}}))},o.submitClient=function(){var e,t,n,a;return gt.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=o.context,t=o.state.server_id,n=o.props.socketMakeConnection,r.next=5,gt.a.awrap(n(t));case 5:a=r.sent,e(a);case 7:case"end":return r.stop()}}))},o.handleClientSubmit=function(){o.handleNicknameSubmitDecorator(o.submitClient)},o.handleBack=function(){(0,o.props.updateConfig)({step:"LOBBY_STEP_TYPE_SELECTING"})},o.handleNicknameSubmitDecorator=ht(),o.step_type_map=(n={},Object(k.a)(n,"TYPE_CLIENT",o.renderStepTypeClient),Object(k.a)(n,"TYPE_SERVER",o.renderStepTypeServer),n),o.state={server_id:""},o}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.type;return r.a.createElement(L.a,{className:t.form},this.step_type_map[n](),r.a.createElement(Ie,{onBack:this.handleBack,onNext:this.submitClient,isNext:!1}))}}]),t}(a.PureComponent);Nt.contextType=Ot;var St=Object(d.b)((function(e){return{type:e.tetris.config.type}}),(function(e){return{updateConfig:function(t){return e(Fe(t))},socketMakeConnection:function(t){return e(Ct(t))}}}))(Object(y.a)((function(e){return{form:{margin:e.spacing(2),width:200}}}))(Nt)),Tt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setApp)({})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.resetConfig,n=e.is_lobby,a=e.socketDisconnect,r=e.stopGame;n||(console.log("make disconnect"),r(),a()),t()}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.results_data,o=a.socketGameFinish;null!==r&&o()}},{key:"render",value:function(){var e=this.props,t=e.isConnected,n=e.is_lobby,o=e.results_data,i=e.closeResults;return t?r.a.createElement(a.Fragment,null,n?r.a.createElement(pt,null):r.a.createElement(Yn,null),o?r.a.createElement(me,{data:o.data,title:o.title,onClose:i}):null):r.a.createElement(a.Fragment,null,"no connected")}}]),t}(a.PureComponent),_t=Object(d.b)((function(e){var t=e.tetris,n=t.isResultModalOpen,a=t.opponent,r=t.score,o=t.config;return{isConnected:e.socket.isConnected,is_lobby:null===a,results_data:n?{title:r>a.score?"You won!":r<a.score?"You lost!":"\u041f\u043e\u0431\u0435\u0434\u0438\u043b\u0430 \u0434\u0440\u0443\u0436\u0431\u0430!",data:[{label:"You (".concat(o.nickname,"):"),value:r},{label:"Opponent (".concat(a.nickname,"):"),value:a.score}]}:null}}),(function(e){return{resetConfig:function(){return e({type:"RESET_CONFIG"})},setApp:function(t){return e(V(t))},stopGame:function(){return e({type:"STOP_GAME"})},socketDisconnect:function(){return e(Object(dt.a)({action:"DISCONNECT"},bt))},socketGameFinish:function(){return e(Object(dt.a)({action:"GAME_FINISH"},bt))},closeResults:function(){return e({type:"CLOSE_RESULTS"})}}}))(Tt),Rt=n(508),xt=[{value:"score",label:"Score"},{value:"speed",label:"Speed"}],Mt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.className;return r.a.createElement(L.a,null,xt.map((function(t,o){var i=t.value,c=t.label;return r.a.createElement(_.a,{key:o,variant:"h6",className:Y()(n.item,a)},c,": ",e.props[i])})))}}]),t}(a.PureComponent),Gt=Object(y.a)((function(e){return{item:{lineHeight:1,"&:not(:first-child)":{marginTop:e.spacing(.5)}}}}))(Mt),Pt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.isOpponent,o=e.className;return r.a.createElement(ce,{className:Y()(t.toolbar,o)},n.map((function(e,n){return e?r.a.createElement(L.a,{key:n,className:Y()(t.item,a?t.item_with_opponent:t.item_without_opponent)},e):null})))}}]),t}(a.PureComponent),Yt=Object(d.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}))(Object(y.a)((function(e){var t;return{toolbar:{flexWrap:"wrap",flexDirection:"column",alignItems:"stretch",height:"100%"},item:{display:"flex",alignItems:"flex-start"},item_with_opponent:{"&:not(:first-child)":(t={},Object(k.a)(t,e.breakpoints.up("sm"),{marginTop:e.spacing(1)}),Object(k.a)(t,e.breakpoints.down("xs"),{marginTop:e.spacing(.5)}),t)},item_without_opponent:{"&:not(:first-child)":{marginTop:e.spacing(2)}},score:{}}}))(Pt)),Lt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=e.className,a=e.classes,o=Object(U.a)(e,["preview","className","classes"]);return r.a.createElement(Ut,Object.assign({grid:t,className:Y()(a.preview,n),isPreview:!0},o))}}]),t}(a.PureComponent),Ht=Object(y.a)((function(){return{preview:{display:"flex",alignItems:"center"}}}))(Lt),Dt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.grid,a=e.isField,o=e.isPreview,i=e.className;return r.a.createElement(L.a,{className:Y()(t.field,o&&t.fieldPreview,i)},r.a.createElement(L.a,{className:t.fieldInner},n?n.map((function(e,n){return r.a.createElement(L.a,{key:n,className:Y()(t.row,a&&n<4&&t.hidden)},e.map((function(e,n){return r.a.createElement(L.a,{key:n,className:Y()(t.col,1===e&&t.square,o&&t.colPreview)})})))})):null))}}]),t}(a.PureComponent);Dt.defaultProps={size:30};var Ut=Object(y.a)((function(){return{field:{position:"relative",height:function(e){return 20*e.size-19},width:function(e){return 10*e.size-10+1},overflow:"hidden"},fieldPreview:{height:function(e){return 4*e.size},width:function(e){return 4*e.size}},fieldInner:{position:"absolute",bottom:0,left:0,right:0,"$fieldPreview &":{position:"relative"}},row:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",flexWrap:"nowrap","&:not(:first-child)":{marginTop:-1}},col:{width:function(e){return e.size},height:function(e){return e.size},flexShrink:0,margin:0,border:"1px solid #5a5a5a",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",flexWrap:"nowrap","&:not(:first-child)":{marginLeft:-1},"&$colPreview":{borderColor:"transparent","&$square":{borderColor:"#5a5a5a"}}},square:{backgroundColor:"#4050b5"},hidden:{opacity:0,pointerEvents:"none"},colPreview:{}}}))(Dt),zt=n(495),Wt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.icon,o=Object(U.a)(e,["classes","className","icon"]);return r.a.createElement(zt.a,Object.assign({className:Y()(t.button,n)},o),a)}}]),t}(a.PureComponent);Wt.defaultProps={icon:"Add"};var Kt=Object(y.a)((function(){return{button:{},typograpy:{lineHeight:1}}}))(Wt),Ft=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.name,a=e.className;return r.a.createElement(L.a,{className:t.nickname},r.a.createElement(_.a,{variant:"h6",className:Y()(t.value,a)},n))}}]),t}(a.PureComponent),Jt=Object(y.a)((function(){return{nickname:{position:"relative",display:"flex",width:"100%",alignItems:"stretch",justifyContent:"stretch"},value:{lineHeight:1.1,width:0,flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}))(Ft),Vt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.toolbarClassName,o=e.field,i=e.toolbar;return r.a.createElement(L.a,{className:Y()(t.playerInterface,n)},o,r.a.createElement(L.a,{className:Y()(t.toolbar,a)},i))}}]),t}(a.PureComponent),qt=Object(y.a)((function(){return{playerInterface:{display:"flex",alignItems:"stretch",justifyContent:"center"},toolbar:{}}}))(Vt),$t=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.speed,a=Object(U.a)(e,["score","speed"]);return r.a.createElement(Gt,Object.assign({score:t,speed:n},a))}}]),t}(a.PureComponent),Xt=Object(d.b)((function(e){return{score:e.tetris.score,speed:e.tetris.speed}}))($t),Zt=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=Object(U.a)(e,["preview"]);return r.a.createElement(Ht,Object.assign({preview:t},n))}}]),t}(a.PureComponent),en=Object(d.b)((function(e){return{preview:e.tetris.isGameRunning&&e.tetris.figureNext[e.tetris.rotationNext]}}))(Zt),tn=n(143),nn=n.n(tn),an=n(208),rn=n.n(an),on=n(209),cn=n.n(on),sn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grid,n=Object(U.a)(e,["grid"]);return r.a.createElement(Ut,Object.assign({grid:t,isField:!0},n))}}]),t}(a.PureComponent),ln=Object(d.b)((function(e){var t=e.tetris.opponent;return{grid:t.field&&t.field.length?t.field:e.tetris.table}}))(sn),un=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.speed,a=Object(U.a)(e,["score","speed"]);return r.a.createElement(Gt,Object.assign({score:t,speed:n},a))}}]),t}(a.PureComponent),An=Object(d.b)((function(e){return{score:e.tetris.opponent.score,speed:e.tetris.opponent.speed}}))(un),pn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.speed,e.nickname),n=e.previewComponent,a=(e.classes,e.labelClassName),o=Object(U.a)(e,["speed","nickname","previewComponent","classes","labelClassName"]);return r.a.createElement(Yt,Object.assign({data:[r.a.createElement(Jt,{name:t,className:a}),r.a.createElement(An,{className:a}),n]},o))}}]),t}(a.PureComponent),mn=Object(d.b)((function(e){return{nickname:e.tetris.opponent.nickname}}))(Object(y.a)((function(){return{}}))(pn)),gn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=Object(U.a)(e,["preview"]);return r.a.createElement(Ht,Object.assign({preview:t},n))}}]),t}(a.PureComponent),En=Object(d.b)((function(e){return{preview:e.tetris.isGameRunning&&e.tetris.opponent.preview}}))(gn),fn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.size,a=e.labelClassName,o=e.toolbarClassName;return r.a.createElement(qt,{className:t.opponent,field:r.a.createElement(ln,{size:n}),toolbar:r.a.createElement(mn,{className:o,labelClassName:a,previewComponent:r.a.createElement(En,{size:n})})})}}]),t}(a.PureComponent),hn=Object(y.a)((function(e){return{opponent:Object(k.a)({},e.breakpoints.down("sm"),{position:"absolute",bottom:0})}}))(fn),dn=10,bn=17,Cn=function(e){function t(){var e,n;Object(O.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(i)))).handleAction=function(e){var t,a,r,o,i,c;return gt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=n.context,a=n.props,r=a.isOpponent,o=a.socketSendButtonAction,i=function(){return e in n.props&&n.props[e]()},r){s.next=7;break}i(),s.next=11;break;case 7:return s.next=9,gt.a.awrap(o(e));case 9:c=s.sent,t(c,i);case 11:case"end":return s.stop()}}))},n.handleStart=function(e){e.currentTarget.blur(),n.handleAction("startNewGameAndMove")},n.handleStartMoving=function(){n.handleAction("startMoving")},n.handleStopMoving=function(){n.handleAction("stopMoving")},n.handleStopGame=function(){var e=n.props.isOpponent?"socketGameReset":"stopGame";n.handleAction(e)},n.renderPlayPauseButtons=function(){var e=n.props,t=e.classes,o=e.isGameRunning,i=e.isPlayButton,c=e.isPauseButton;return r.a.createElement(a.Fragment,null,o?r.a.createElement(a.Fragment,null,r.a.createElement(Kt,{icon:r.a.createElement(rn.a,null),size:"small",onClick:n.handleStopGame,className:t.button}),i&&r.a.createElement(Kt,{icon:r.a.createElement(nn.a,null),size:"small",onClick:n.handleStartMoving,className:t.button}),c&&r.a.createElement(Kt,{icon:r.a.createElement(cn.a,null),size:"small",onClick:n.handleStopMoving,className:t.button})):r.a.createElement(Kt,{icon:r.a.createElement(nn.a,null),size:"small",onClick:n.handleStart}))},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setApp)({topComponent:this.renderPlayPauseButtons()})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.setApp,o=a.isGameRunning,i=a.isPlayButton,c=a.isPauseButton;o===e.isGameRunning&&i===e.isPlayButton&&c===e.isPauseButton||r({topComponent:this.renderPlayPauseButtons()})}},{key:"componentWillUnmount",value:function(){(0,this.props.setApp)({topComponent:null})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.nickname,a=e.previewComponent,o=e.isOpponent,i=e.width,c=Object(Rt.b)("sm",i),s=Object(Rt.b)("xs",i)?dn:bn;return r.a.createElement(Yt,{data:[n&&r.a.createElement(Jt,{name:n,className:o?t.label:t.labelSingle}),r.a.createElement(Xt,{className:o?t.label:t.labelSingle}),a,o&&c&&r.a.createElement(hn,{size:s,labelClassName:t.labelOpponent,toolbarClassName:t.toolbarOpponent})]})}}]),t}(a.PureComponent);Cn.contextType=Ot;var Bn,On=Object(d.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.opponent,o=t.config;return{isGameRunning:n,isPlayButton:n&&a,isPauseButton:n&&!a,nickname:null!==r&&o.nickname,isOpponent:null!==r}}),(function(e){return{startNewGame:function(){e({type:"START_NEW_GAME"})},stopGame:function(){e({type:"STOP_GAME"})},startMoving:function(){e({type:"START_MOVING"})},stopMoving:function(){e({type:"STOP_MOVING"})},startNewGameAndMove:function(){e(We())},setApp:function(t){return e(V(t))},socketSendButtonAction:function(t){return e(function(e){return Object(dt.a)({action:"SEND_BUTTON_ACTION",button_action:e},bt)}(t))},socketGameReset:function(){return e(Bt())}}}))(Object(Rt.a)()(Object(y.a)((function(e){return{button:{"&:not(:first-child)":{marginLeft:e.spacing(1)}},label:Object(k.a)({},e.breakpoints.down("xs"),{fontSize:"0.7rem"}),labelOpponent:Object(k.a)({},e.breakpoints.down("sm"),{fontSize:"0.7rem"}),labelSingle:Object(k.a)({},e.breakpoints.down("xs"),{fontSize:"0.8rem"}),toolbarOpponent:Object(k.a)({},e.breakpoints.down("xs"),{position:"absolute",bottom:20*dn-18,left:0,padding:0,height:"auto"})}}))(Cn))),jn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.isOpponent&&!Object(Ve.isEqual)(this.props.field,e.field)){var a=this.props;(0,a.socketSendMove)({field:a.field,preview:a.preview,speed:a.speed,score:a.score})}}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.width,a=Object(U.a)(e,["field","width"]);return r.a.createElement(Ut,Object.assign({size:Object(Rt.c)("sm",n)?30:20,grid:t,isField:!0},a))}}]),t}(a.PureComponent),In=Object(d.b)((function(e){var t=e.tetris,n=t.opponent,a=t.isGameRunning,r=t.figureNext,o=t.rotationNext,i=t.figure,c=t.rotation,s=t.position,l=t.table,u=t.speed,A=t.score;return{isOpponent:null!==n,preview:a&&r[o],speed:u,score:A,field:i?$e(i[c],s,l):l}}),(function(e){return{socketSendMove:function(t){return e(function(e){return Object(dt.a)({action:"SEND_MOVE"},e,{},bt)}(t))}}}))(Object(Rt.a)()(jn)),vn=n(210),Qn=n.n(vn),wn=n(211),yn=n.n(wn),kn=n(212),Nn=n.n(kn),Sn=n(213),Tn=n.n(Sn),_n=[{icon:r.a.createElement(Qn.a,null),action:Ye,position:"left"},{icon:r.a.createElement(yn.a,null),action:Le,position:"right"},{icon:r.a.createElement(Nn.a,null),action:Ue,position:"down"}],Rn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.key_map;return r.a.createElement(L.a,{className:t.mobileBar},r.a.createElement(L.a,{className:t.item},r.a.createElement(L.a,{className:t.arrows},_n.map((function(e,a){var o=e.icon,i=e.action,c=e.position;return r.a.createElement(Kt,{key:a,icon:o,onClick:n[i],className:Y()(t.touchButton,t.arrow,t["arrow_".concat(c)])})})))),r.a.createElement(L.a,{className:t.item},r.a.createElement(L.a,{className:t.arrows},r.a.createElement(Kt,{icon:r.a.createElement(Tn.a,null),onClick:n[He],className:Y()(t.touchButton,t.arrow,t.arrow_rightCenter)}))))}}]),t}(a.PureComponent),xn=Object(d.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.key_map;return{key_map:!a&&n?r:{}}}),null)(Object(y.a)((function(){return{mobileBar:{position:"relative",display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",zIndex:1,height:120},item:{"&:first-child":{marginLeft:60},"&:last-child":{marginRight:60}},arrows:{position:"relative",width:60,height:60,marginTop:-60,marginBottom:60},touchButton:{width:60,height:60,padding:0,minWidth:"auto"},arrow:{position:"absolute",borderRadius:"100%"},arrow_left:{top:0,left:"-100%"},arrow_right:{top:0,right:"-100%"},arrow_down:{bottom:"-100%"},arrow_center:{top:0,left:0},arrow_rightCenter:{top:"50%",right:"-100%"}}}))(Rn)),Mn=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.size,a=e.isOpponent;return r.a.createElement(qt,{field:r.a.createElement(In,{size:n}),toolbar:r.a.createElement(On,{previewComponent:r.a.createElement(en,{size:n,className:a?t.preview:""})}),toolbarClassName:!a&&t.toolbar})}}]),t}(a.PureComponent),Gn=Object(d.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}))(Object(y.a)((function(e){return{toolbar:Object(k.a)({},e.breakpoints.up("sm"),{marginLeft:30}),preview:Object(k.a)({},e.breakpoints.down("xs"),{position:"fixed",top:Et,right:0,opacity:.25,display:"flex",alignItems:"center",justifyContent:"center"})}}))(Mn)),Pn=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleLeave=function(){var e=n.props.history;console.log(e),e.push(Ar.link)},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.width,o=e.isOpponent,i=Object(Rt.b)("xs",n),c=Object(Rt.b)("sm",n),s=i?17:30;return r.a.createElement(a.Fragment,null,r.a.createElement(st,null),r.a.createElement(L.a,{className:t.layout},r.a.createElement(L.a,{className:t.body},r.a.createElement(Gn,{size:s}),o&&!c?r.a.createElement(hn,{size:s}):null),i?r.a.createElement(L.a,{className:t.mobileBar},r.a.createElement(xn,null)):null))}}]),t}(a.PureComponent),Yn=Object(d.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}),(function(e){return{closeResults:function(){e({type:"CLOSE_RESULTS"})}}}))(Object(u.f)(Object(Rt.a)()(Object(y.a)((function(){return{layout:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"},body:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},mobileBar:{alignSelf:"stretch"}}}))(Pn)))),Ln=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ve.a,null,r.a.createElement(w.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:1},fr.map((function(t){var n=t.name,o=t.description,i=t.link,c=Object(a.forwardRef)((function(e,t){return r.a.createElement(G,Object.assign({to:i,label:r.a.createElement(Qe.a,null,r.a.createElement(_.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(_.a,{variant:"body2",color:"textSecondary",component:"p"},o))},e))}));return r.a.createElement(w.a,{key:i,item:!0,zeroMinWidth:!0,xs:6,md:4,lg:3},r.a.createElement(ye.a,{className:e.card},r.a.createElement(c,{component:function(t){return r.a.createElement(we.a,Object.assign({className:e.actionArea},t))}})))}))))}}]),t}(a.PureComponent),Hn=Object(y.a)((function(){return{home:{},card:{height:"100%"},actionArea:{height:"100%"}}}))(Ln),Dn=(Bn={},Object(k.a)(Bn,"ROOM_STATUS_WAITING",(function(){return"We need more players (2 minimum)"})),Object(k.a)(Bn,"ROOM_STATUS_PAINTER_SELECTING",(function(e){var t=e.countdown;return"Painter is being selected in ".concat(t," (random)")})),Object(k.a)(Bn,"ROOM_STATUS_WORD_SELECTING",(function(e){var t=e.painter;return"Painter ".concat(t.nickname," is selecting a word")})),Object(k.a)(Bn,"ROOM_STATUS_DRAWING",(function(e){var t=e.painter;return"".concat(t.nickname," is drawing")})),Object(k.a)(Bn,"ROOM_STATUS_GAME_FINISHED",(function(e){var t=e.winner;return"The game is over. ".concat(t.nickname," wins")})),Bn);function Un(e){return{type:"UPDATE_CONFIG",payload:{config:e}}}function zn(e){return{type:"UPDATE_ROOM_LIST",payload:{rooms:e}}}var Wn=function(e){function t(e){var n,a;return Object(O.a)(this,t),(a=Object(I.a)(this,Object(v.a)(t).call(this,e))).handleBackToNickname=function(){(0,a.props.updateConfig)({step:"LOBBY_STEP_NICKNAME"})},a.steps=(n={},Object(k.a)(n,"LOBBY_STEP_NICKNAME",r.a.createElement(qn,null)),Object(k.a)(n,"LOBBY_STEP_ROOM_SELECTION",r.a.createElement(ra,{onBackToNickname:a.handleBackToNickname})),n),a}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.step;return r.a.createElement(L.a,{className:t.lobby},n in this.steps?this.steps[n]:n)}}]),t}(a.PureComponent),Kn=Object(d.b)((function(e){return{step:e.crocodile.config.step}}),(function(e){return{updateConfig:function(t){return e(Un(t))}}}))(Object(y.a)((function(){return{lobby:{position:"relative"},lobbyContent:{position:"relative"}}}))(Wn));var Fn={type:"GAME_CROCODILE",meta:{remote:"META_SOCKET_EMIT"}};var Jn=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).handleNicknameChange=function(e){var t=e.target.value;(0,n.props.updateConfig)({nickname:t})},n.submitNickname=function(){var e,t,a,r,o,i,c;return gt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=n.context,t=n.props,a=t.nickname,r=t.updateConfig,o=t.socketValidateNickname,i=t.updateRoomList,s.next=4,gt.a.awrap(o(a));case 4:c=s.sent,e(c,(function(e){var t=e.config,n=e.rooms;r(t),i(n)}));case 6:case"end":return s.stop()}}))},n.handleNicknameSubmit=function(){n.handleNicknameSubmitDecorator(n.submitNickname)},n.handleNicknameSubmitDecorator=function(){var e=!1;return function(t){e||(e=!0,t(),setTimeout((function(){e=!1}),750))}}(),n.state={nickname:""},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.nickname;return r.a.createElement(J,{onChange:this.handleNicknameChange,onSubmit:this.handleNicknameSubmit,placeholder:"Enter your nickname",value:e})}}]),t}(a.PureComponent);Jn.contextType=Ot;var Vn,qn=Object(d.b)((function(e){return{nickname:e.crocodile.config.nickname}}),(function(e){return{updateConfig:function(t){return e(Un(t))},updateRoomList:function(t){return e(zn(t))},socketValidateNickname:function(t){return e(function(e){return Object(dt.a)({action:"VALIDATE_NICKNAME",nickname:e},Fn)}(t))}}}))(Jn),$n=n(498),Xn=n(510),Zn=n(499),ea=n(500),ta=n(496),na=n(497),aa=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleNewRoomModalOpen=function(){n.setState((function(){return{isNewRoomModal:!0}}))},n.handleJoinRoom=function(e){(0,n.props.socketJoinRoom)(e)},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.rooms,i=t.onBackToNickname;return r.a.createElement(ve.a,null,r.a.createElement(_.a,{className:n.stepTitle,variant:"h6"},"Select room or create new one:"),r.a.createElement(w.a,{container:!0},r.a.createElement(w.a,{item:!0},r.a.createElement(T.a,{className:n.iconButton,onClick:i},r.a.createElement(ta.a,null)),r.a.createElement(T.a,{className:n.iconButton,onClick:this.handleNewRoomModalOpen,disabled:!0},r.a.createElement(na.a,null))),r.a.createElement(w.a,{item:!0,className:n.listArea},r.a.createElement(z.a,{square:!0},r.a.createElement($n.a,{component:"nav",className:n.list},o&&o.length?o.map((function(t,i){var c=t.room,s=t.players;return r.a.createElement(a.Fragment,{key:c},r.a.createElement(Xn.a,{button:!0,onClick:function(){return e.handleJoinRoom(c)}},r.a.createElement(Zn.a,{primary:c,className:n.listItemText}),r.a.createElement(L.a,null,"(",s,")")),i!==o.length-1?r.a.createElement(ea.a,null):null)})):"No rooms found")))))}}]),t}(a.PureComponent),ra=Object(d.b)((function(e){return{rooms:e.crocodile.rooms}}),(function(e){return{socketJoinRoom:function(t){return e(function(e){return Object(dt.a)({action:"JOIN_ROOM",room:e},Fn)}(t))}}}))(Object(y.a)((function(e){return{root:{},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:20},divider:{height:28,margin:4},stepTitle:{margin:"20px 0"},list:{maxWidth:350,width:"100%"},listArea:{flexGrow:1},listItemText:{marginRight:e.spacing(2)}}}))(aa)),oa=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.task,o=e.isPainter,i=e.children;return r.a.createElement(a.Fragment,null,r.a.createElement(w.a,{container:!0,spacing:0,wrap:"nowrap",className:t.crocodile},r.a.createElement(w.a,{item:!0,className:t.paint},r.a.createElement(L.a,{className:t.paintWork},i),r.a.createElement(L.a,{className:t.paintHeader},r.a.createElement(da,{data:[Object(dt.a)({},n),{label:"Players",value:r.a.createElement(fa,null)}]}))),r.a.createElement(w.a,{item:!0,className:t.chat},r.a.createElement(Oa,{painterMode:o}))),r.a.createElement(Ca,null))}}]),t}(a.PureComponent),ia=Object(y.a)((function(e){return{crocodile:Object(k.a)({alignItems:"stretch",justifyContent:"stretch",height:"100%",flexDirection:"column"},e.breakpoints.up("md"),{flexDirection:"row"}),paint:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"},paintHeader:{},paintWork:{position:"relative",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},chat:Object(k.a)({flexBasis:function(e){return e.isPainter?130:200},flexShrink:0,paddingTop:0,paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},e.breakpoints.up("md"),{flexBasis:"250px !important",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:0}),players:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}))(oa),ca=function(e){e.classes;var t=Object(U.a)(e,["classes"]);return t.isPainter?r.a.createElement(ma,t):r.a.createElement(Aa,t)},sa=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).handleLeaveRoom=function(){if(n.is_left)return!1;var e=n.props,t=e.setApp,a=e.cleanRoom;(0,e.socketLeaveRoom)(),a(),t({sub_header:null,topAction:null}),n.is_left=!0},n.is_left=!1,n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setApp)({sub_header:e.roomName,topAction:this.handleLeaveRoom})}},{key:"componentWillUnmount",value:function(){this.handleLeaveRoom()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isPainter;return r.a.createElement(L.a,{className:t.interface},r.a.createElement(ca,Object.assign({isPainter:n},this.props)))}}]),t}(a.PureComponent),la=Object(d.b)((function(e){return{sub_header:e.app.sub_header,isPainter:(e.crocodile.room.painter||{}).id===e.socket.id,roomName:e.crocodile.room.roomName}}),(function(e){return{cleanRoom:function(){e({type:"CLEAN_ROOM"})},setApp:function(t){e(V(t))},socketLeaveRoom:function(){e(Object(dt.a)({action:"LEAVE_ROOM"},Fn))}}}))(Object(y.a)((function(){return{interface:{position:"relative",width:"100%",height:"100%"}}}))(sa)),ua=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).getTask=function(){var e=n.props,t=e.word,a=e.painter_name;return t?{label:"Your task",value:"Try to guess the word that ".concat(a," is drawing")}:{}},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.getTask();return r.a.createElement(ia,Object.assign({task:e},this.props),r.a.createElement(Ya,null))}}]),t}(a.PureComponent),Aa=Object(d.b)((function(e){return{word:e.crocodile.room.word,painter_name:(e.crocodile.room.painter||{}).nickname}}))(Object(y.a)((function(){return{}}))(ua)),pa=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleWordSelect=function(e,t){(0,n.props.socketWordSelect)(t)},n.handleConvertToImage=function(e){if(!e)return!1;(0,n.props.socketPaint)(e.current.toDataURL())},n.getTask=function(){var e=n.props.word;return e?{label:"Your task",value:'Try to draw word "'.concat(e,'"')}:{}},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=(t.onWordSelect,t.word),i=t.words,c=Object(U.a)(t,["classes","onWordSelect","word","words"]);return r.a.createElement(a.Fragment,null,r.a.createElement(ia,Object.assign({task:this.getTask()},c),r.a.createElement(Ga,{onConvertToImage:this.handleConvertToImage})),r.a.createElement(fe.a,{open:!o},r.a.createElement(L.a,{className:n.wordList},i.map((function(t,a){return r.a.createElement(R.a,{key:a,className:n.wordButton,variant:"outlined",onClick:function(n){return e.handleWordSelect(n,t)}},t)})))))}}]),t}(a.PureComponent),ma=Object(d.b)((function(e){return{word:e.crocodile.room.word,words:e.crocodile.room.words}}),(function(e){return{socketWordSelect:function(t){return e(function(e){return Object(dt.a)({action:"WORD_SELECT",word:e},Fn)}(t))},socketPaint:function(t){return e(function(e){return Object(dt.a)({action:"PAINT",image:e},Fn)}(t))}}}))(Object(y.a)((function(e){return{wordList:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(2)},wordButton:{width:"100%","&:not(:first-child)":{marginTop:e.spacing(1)}}}}))(pa)),ga=n(511),Ea=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){return function(e){}},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.players,a=e.painterId,o=Object.keys(n);return r.a.createElement(L.a,{className:t.players},n&&o.length?o.map((function(e,t){return r.a.createElement(ga.a,{key:t,size:"small",label:n[e].nickname,color:a===e?"primary":"default"})})):"There is no players in this room")}}]),t}(a.PureComponent),fa=Object(d.b)((function(e){return{players:e.crocodile.room.players,painterId:(e.crocodile.room.painter||{}).id}}))(Object(y.a)((function(e){return{players:{alignSelf:"flex-start",display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}))(Ea)),ha=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data;return r.a.createElement(ce,null,r.a.createElement(L.a,{className:t.roomInfoBar},n.map((function(e,n){var a=e.label,o=e.value;return a&&o?r.a.createElement(L.a,{key:n,className:t.item},r.a.createElement(L.a,{className:t.label,fontWeight:"fontWeightMedium"},a,":"),r.a.createElement(L.a,{className:t.value},o)):null}))))}}]),t}(a.PureComponent),da=Object(y.a)((function(e){return{roomInfoBar:{position:"relative",alignSelf:"flex-start",width:"100%",marginBottom:e.spacing(1)},item:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",flexDirection:"row"},label:{flexBasis:70},value:{marginLeft:e.spacing(2)}}}))(ha),ba=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.winner_name,a=e.word;return n?r.a.createElement(fe.a,{open:!0},r.a.createElement(he.a,null,r.a.createElement(L.a,null,r.a.createElement(L.a,{component:"h4"},"The game is over!"),r.a.createElement(se.a,{className:t.table},r.a.createElement(le.a,null,r.a.createElement(ue.a,null,r.a.createElement(Ae.a,null,"Winner: "),r.a.createElement(Ae.a,{align:"right"},n)),r.a.createElement(ue.a,null,r.a.createElement(Ae.a,null,"Right word: "),r.a.createElement(Ae.a,{align:"right"},a))))))):null}}]),t}(a.PureComponent),Ca=Object(d.b)((function(e){return{winner_name:(e.crocodile.room.winner||{}).nickname,word:e.crocodile.room.word}}))(Object(y.a)((function(){return{table:{maxWidth:300}}}))(ba)),Ba=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).onChat=function(e){(0,n.props.socketChat)(e)},n.handleChat=function(){var e=n.state.message;e.length>0&&(n.setState((function(){return{message:""}})),n.lockFuncChat((function(){return n.onChat(e)})))},n.handleMessageChange=function(e){var t=e.target.value;n.setState((function(){return{message:t}}))},n.handleLikeMessage=function(e){return function(t){(0,n.props.socketMessageMark)(e,t)}},n.lockFuncChat=ht(),n.state={message:""},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.painterMode,a=this.state.message;return r.a.createElement(w.a,{container:!0,spacing:0,direction:"column",className:t.wrapChat},r.a.createElement(w.a,{item:!0,className:t.wrapMessages},r.a.createElement(Ta,{painterMode:n,onLikeMessage:this.handleLikeMessage})),n?null:r.a.createElement(w.a,{item:!0,className:t.wrapSubmit},r.a.createElement(J,{onChange:this.handleMessageChange,onSubmit:this.handleChat,placeholder:"Message",value:a,className:t.textField,elevation:5})))}}]),t}(a.PureComponent),Oa=Object(d.b)(null,(function(e){return{socketChat:function(t){return e(function(e){return Object(dt.a)({action:"CHAT",message:e},Fn)}(t))},socketMessageMark:function(t,n){return e(function(e,t){return Object(dt.a)({action:"MESSAGE_MARK",id:e,value:t},Fn)}(t,n))}}}))(Object(y.a)((function(e){return{chat:{flexGrow:1},wrapChat:{position:"relative",height:"100%",margin:0},wrapMessages:{position:"relative",flexGrow:1,padding:"0 !important"},wrapSubmit:{flexShrink:0,padding:"".concat(e.spacing(1),"px 0 0 0 !important")},textField:{width:"100%",padding:"2px 4px",display:"flex",alignItems:"center"},input:{flex:1}}}))(Ba)),ja=n(110),Ia=n.n(ja),va=n(111),Qa=n.n(va),wa=n(144),ya=(Vn={},Object(k.a)(Vn,"THUMB_STATUS_LIKE",(function(e){return r.a.createElement(Ia.a,{className:Y()(e.thumb,e.thumbUp)})})),Object(k.a)(Vn,"THUMB_STATUS_DISLIKE",(function(e){return r.a.createElement(Qa.a,{className:Y()(e.thumb,e.thumbDown)})})),Vn),ka=function(e){var t=e.classes,n=e.sender,a=e.message,o=e.onLikeMessage,i=e.likeStatus;return r.a.createElement(L.a,{className:t.card},o?r.a.createElement(or,{className:t.thumbClicker,onClick:o}):null,r.a.createElement(L.a,{fontWeight:"fontWeightBold",className:t.name},i&&ya[i](t),n),r.a.createElement(L.a,{className:t.message},a))},Na=function(e){var t=e.classes,n=e.message;return r.a.createElement(L.a,{className:t.card},r.a.createElement(L.a,{fontWeight:"fontWeightLight",className:t.messageServer},n))},Sa=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).scrollWindowToBottom=function(){if(n.windowRef&&n.windowRef.current){var e=n.windowRef.current,t=e.scrollHeight,a=e.clientHeight;n.windowRef.current.scrollTop=t-a}},n.windowRef=Object(a.createRef)(),n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.scrollWindowToBottom()}},{key:"componentDidUpdate",value:function(e,t,n){this.scrollWindowToBottom()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.chat,o=e.painterMode,i=e.onLikeMessage,c=n&&n.length?n:[{player:{nickname:"SERVER"},message:"This chat is currently empty"}];return r.a.createElement(z.a,{elevation:5,square:!0,className:t.window},r.a.createElement(L.a,{className:t.windowInner,ref:this.windowRef},c.map((function(e,n){var c=e.player,s=e.message,l=e.id,u=e.likeStatus,A=c.nickname,p=o?{onLikeMessage:i(l)}:null;return r.a.createElement(a.Fragment,{key:n},"SERVER"===A?r.a.createElement(Na,{classes:t,message:s}):r.a.createElement(ka,Object.assign({classes:t,message:s,sender:A,likeStatus:u},p)))}))))}}]),t}(a.PureComponent),Ta=Object(d.b)((function(e){return{chat:e.crocodile.room.chat}}))(Object(y.a)((function(e){return{window:{position:"relative",width:"100%",height:"100%"},windowInner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowX:"hidden",overflowY:"scroll"},card:Object(k.a)({position:"relative",padding:e.spacing(1),"&:nth-child(2n)":{backgroundColor:Object(wa.fade)(e.palette.grey[400],.1)}},e.breakpoints.down("sm"),{padding:e.spacing(.5)}),cardActive:{cursor:"pointer",display:"block","&:hover":{backgroundColor:Object(wa.fade)(e.palette.primary.light,.2)}},name:Object(k.a)({textAlign:"left",fontSize:e.typography.pxToRem(13),paddingBottom:e.spacing(1)},e.breakpoints.down("sm"),{paddingBottom:e.spacing(.5)}),message:{textAlign:"right",color:"#fff",fontSize:e.typography.pxToRem(12)},messageServer:{textAlign:"right",fontSize:e.typography.pxToRem(10)},thumb:{fontSize:e.typography.pxToRem(14),verticalAlign:"middle",marginRight:e.spacing(1),color:e.palette.primary.main},thumbUp:{color:"green"},thumbDown:{color:"red"},thumbClicker:{position:"absolute",top:0,right:0,width:"auto",transition:"opacity 0.3s ease 0s",opacity:0,"$card:hover &":{opacity:.75}}}}))(Sa)),_a=n(112),Ra=n.n(_a),xa=null,Ma=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).state={lineOptions:{lineWidth:2,lineJoin:"round",lineCap:"round",strokeStyle:"#ffffff"}},n.handlerColorSelect=function(e){n.setState((function(t){return{lineOptions:Object(dt.a)({},t.lineOptions,{strokeStyle:e})}}))},n.getCoords=function(e){var t=e.target,n=e.changedTouches,a=t.getBoundingClientRect(),r=a.left,o=a.top,i=n?n[0]:e;return{x:i.clientX-r,y:i.clientY-o}},n.updateLine=function(){var e=n.state.lineOptions;for(var t in e)xa[t]=e[t]},n.makeStep=function(e){var t=n.props.onConvertToImage,a=n.getCoords(e),r=a.x,o=a.y;return xa.lineTo(r,o),xa.stroke(),t(n.canvas),{x:r,y:o}},n.init=function(e,t){console.log(e,t),n.canvas.current.width=e,n.canvas.current.height=t,xa=n.canvas.current.getContext("2d"),Ra.a.enableUndo(xa),n.setListeners()},n.saveUpdateSizeFunc=function(e){n.doUpdateSize=e},n.updateSize=function(e,t){Ra.a.disableUndo(xa);var a=xa.getImageData(0,0,e,t);n.canvas.current.width=e,n.canvas.current.height=t,xa.putImageData(a,0,0),n.savedSize.width=e,n.savedSize.height=t,Ra.a.enableUndo(xa)},n.setListeners=function(){n.canvas.current.addEventListener("mousedown",n.handleMouseDown,!1),n.canvas.current.addEventListener("mouseup",n.handleMouseUp,!1),n.canvas.current.addEventListener("mousemove",n.handleMouseMove,!1),n.canvas.current.addEventListener("touchstart",n.handleTouchStart,!1),n.canvas.current.addEventListener("touchend",n.handleTouchEnd,!1),n.canvas.current.addEventListener("touchmove",n.handleTouchMove,!1)},n.removeListeners=function(){n.canvas.current.removeEventListener("mousedown",n.handleMouseDown,!1),n.canvas.current.removeEventListener("mouseup",n.handleMouseUp,!1),n.canvas.current.removeEventListener("mousemove",n.handleMouseMove,!1),n.canvas.current.removeEventListener("touchstart",n.handleTouchStart,!1),n.canvas.current.removeEventListener("touchend",n.handleTouchEnd,!1),n.canvas.current.removeEventListener("touchmove",n.handleTouchMove,!1)},n.handleTouchStart=function(e){n.pointStart(e)},n.handleTouchEnd=function(e){n.pointEnd(e)},n.handleTouchMove=function(e){n.handleMouseMove(e)},n.pointStart=function(e){n.isDrawing=!0;var t=n.props.onConvertToImage;xa.putTag(),n.updateLine(),xa.beginPath();var a=n.getCoords(e),r=a.x,o=a.y;xa.moveTo(r,o),t(n.canvas)},n.pointEnd=function(e){n.isDrawing=!1,n.makeStep(e),xa.putTag()},n.pointMove=function(e){n.isDrawing&&n.makeStep(e)},n.handleMouseDown=function(e){0===e.button&&n.pointStart(e)},n.handleMouseUp=function(e){0===e.button&&n.pointEnd(e)},n.handleMouseMove=function(e){n.isDrawing&&n.makeStep(e)},n.handleUndo=function(){var e=n.props.onConvertToImage;console.log(n.savedSize),xa.undoTag(/^(?!.*(width|height|size|fillRect))/,1),e(n.canvas)},n.handleRedo=function(){var e=n.props.onConvertToImage;xa.redoTag(),e(n.canvas)},n.handleClear=function(){var e=n.props.onConvertToImage;xa.clearRect(0,0,n.canvas.current.width,n.canvas.current.height),e(n.canvas)},n.handleSizeChange=function(e,t){n.setState((function(e){return{lineOptions:Object(dt.a)({},e.lineOptions,{lineWidth:t})}}))},n.canvas=Object(a.createRef)(),n.isDrawing=!1,n.doUpdateSize=null,n.savedSize={},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.lineOptions.lineWidth;return r.a.createElement(w.a,{container:!0,className:e.paint},r.a.createElement(w.a,{item:!0,className:e.toolbar},r.a.createElement($a,{onColorSelect:this.handlerColorSelect,onUndo:this.handleUndo,onRedo:this.handleRedo,onClear:this.handleClear,onSizeChange:this.handleSizeChange,lineWidth:t})),r.a.createElement(w.a,{item:!0,className:e.screen},r.a.createElement(D,{k:500/600},r.a.createElement(Ha,{innerRef:this.canvas,init:this.init,updateSize:this.updateSize,saveUpdateSizeFunc:this.saveUpdateSizeFunc}))))}}]),t}(a.PureComponent),Ga=Object(y.a)((function(){return{desk:{position:"relative",width:"100%",height:"100%"},canvas:{},paint:{width:"100%",height:"100%",flexDirection:"column"},toolbar:{},screen:{position:"relative",flexGrow:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}}}))(Ma),Pa=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.image;return r.a.createElement(D,{k:500/600},r.a.createElement(z.a,{elevation:5,square:!0,className:t.screen},n&&n.length?r.a.createElement("img",{src:n||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAYAAAByNR6YAAAT1ElEQVR4Xu3WMREAAAgDMerfNCZ+DAI65Bh+5wgQIECAAAECBFKBpWvGCBAgQIAAAQIETmB5AgIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQeJDfAZGJuGy/AAAAAElFTkSuQmCC",className:t.image,alt:"gamehub"}):r.a.createElement(L.a,{className:t.note},"The game is going to start")))}}]),t}(a.PureComponent),Ya=Object(d.b)((function(e){return{image:e.crocodile.room.image}}))(Object(y.a)((function(){return{screen:{position:"relative",margin:"0 auto",width:"100%",height:"100%"},image:{display:"block",width:"100%",height:"100%"},note:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}}}))(Pa)),La=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(I.a)(this,Object(v.a)(t).call(this,e))).updateSize=function(){var e=n.props,t=e.updateSize,a=e.resizer;t(a.width,a.height)},n.setInit=function(){var e=n.props,t=e.init,a=e.resizer;t(a.width,a.height),n.isInited=!0},n.isInited=!1,n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.saveUpdateSizeFunc(this.updateSize),setTimeout((function(){e.setInit()}),100)}},{key:"componentDidUpdate",value:function(e,t,n){!this.isInited||e.resizer.width===this.props.resizer.width&&e.resizer.height===this.props.resizer.height||this.updateSize()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.innerRef;return r.a.createElement(z.a,{elevation:5,square:!0,className:t.desk},r.a.createElement("canvas",{ref:n,className:t.canvas}))}}]),t}(a.PureComponent),Ha=Object(y.a)((function(){return{desk:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},canvas:{}}}))(Object(a.forwardRef)((function(e,t){return r.a.createElement(La,Object.assign({innerRef:t},e))}))),Da=n(512),Ua=n(214),za=n.n(Ua),Wa=n(215),Ka=n.n(Wa),Fa=n(216),Ja=n.n(Fa),Va=[{id:"undo",icon:r.a.createElement(za.a,null),action:"onUndo"},{id:"redo",icon:r.a.createElement(Ka.a,null),action:"onRedo"},{id:"clear",icon:r.a.createElement(Ja.a,null),action:"onClear"}],qa=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(o)))).renderButton=function(){var e=n.props,t=e.classes,a=e.width,o=Object(Rt.b)("xs",a)?"small":"medium";return r.a.createElement(L.a,{className:t.iconButtons},Va.map((function(e){var a=e.id,i=e.icon,c=e.action;return r.a.createElement(T.a,{key:a,onClick:n.props[c],size:o,className:t.iconButton},i)})))},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onColorSelect,a=e.onSizeChange,o=e.lineWidth;return r.a.createElement(ce,{variant:"dense",className:t.toolbar},r.a.createElement(tr,{onColorSelect:n,className:t.colorPicker}),r.a.createElement(Da.a,{value:o,onChange:a,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:100,className:t.sizeSlider}),this.renderButton())}}]),t}(a.PureComponent),$a=Object(Rt.a)()(Object(y.a)((function(e){var t;return{toolbar:{flexWrap:"wrap"},colorPicker:Object(k.a)({position:"relative"},e.breakpoints.down("xs"),{flexGrow:1}),sizeSlider:(t={flexGrow:1},Object(k.a)(t,e.breakpoints.down("xs"),{order:1}),Object(k.a)(t,e.breakpoints.up("sm"),{width:"auto",marginLeft:e.spacing(2)}),t),iconButtons:{},iconButton:Object(k.a)({},e.breakpoints.down("xs"),{"&:not(:first-child)":{marginLeft:e.spacing(1)}})}}))(qa)),Xa=n(217),Za=["#ffffff","#000075","#ffe119","#3cb44b","#4363d8","#f032e6","#42d4f4","#f58231","#e6beff","#e6194B","#fabebe","#000000"],er=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e,t){var a=n.props.onColorSelect;a&&a(e.hex)},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className;return r.a.createElement(L.a,{className:Y()(t.color,n)},r.a.createElement(Xa.GithubPicker,{width:150,color:Za[0],onChange:this.handleChange,triangle:"hide",colors:Za,className:t.picker}))}}]),t}(a.PureComponent),tr=Object(y.a)((function(){return{color:{},picker:{background:"transparent !important",border:"none !important",boxShadow:"none !important",padding:"0 !important"}}}))(er),nr=n(501),ar=n(514),rr=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={value:null},n.handleChange=function(e,t){var a=n.props.onClick;n.setState((function(){return{value:t}})),a(t)},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=this.state.value;return r.a.createElement(w.a,{container:!0,className:Y()(t.thumbClicker,n)},r.a.createElement(ar.a,{size:"small",value:a,exclusive:!0,onChange:this.handleChange},r.a.createElement(nr.a,{key:1,value:"THUMB_STATUS_LIKE"},r.a.createElement(Ia.a,null)),r.a.createElement(nr.a,{key:2,value:"THUMB_STATUS_DISLIKE"},r.a.createElement(Qa.a,null))))}}]),t}(a.PureComponent),or=Object(y.a)((function(){return{thumbClicker:{}}}))(rr),ir=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentWillUnmount",value:function(){(0,this.props.resetConfig)()}},{key:"render",value:function(){var e=this.props,t=e.isConnected,n=e.isRoomDefined;return t?r.a.createElement(a.Fragment,null,n?r.a.createElement(la,null):r.a.createElement(Kn,null)):r.a.createElement(a.Fragment,null,"no connect")}}]),t}(a.PureComponent),cr=Object(d.b)((function(e){return{isConnected:e.socket.isConnected,isRoomDefined:e.crocodile.room.status}}),(function(e){return{resetConfig:function(){return e({type:"RESET_CONFIG"})}}}))(ir),sr=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(Ne,null)}}]),t}(a.PureComponent),lr=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(cr,null)}}]),t}(a.PureComponent),ur={link:"/",label:"Home",page:function(e){return r.a.createElement(Hn,e)}},Ar={link:"/tetris",label:"Tetris",name:"Tetris",description:"Classic tetris, that you can play single or with friend.",page:function(e){return r.a.createElement(oe,{header:"Tetris",component:r.a.createElement(sr,e)})}},pr={link:"/crocodile",label:"Crocodile",name:"Crocodile",description:"You can guess the word that painter draws or you can be painter.",page:function(e){return r.a.createElement(oe,{header:"Crocodile",component:r.a.createElement(lr,e)})}},mr={link:"/tetris/singleplayer",label:"Singleplayer",description:"Play with your own",page:function(e){return r.a.createElement(oe,{header:"Tetris/singleplayer",component:r.a.createElement(ut,e)})}},gr={link:"/tetris/multiplayer",label:"Multiplayer",description:"Play vs your friend",page:function(e){return r.a.createElement(oe,{header:"Tetris/multiplayer",component:r.a.createElement(_t,e)})}},Er=[ur,Ar,pr,mr,gr],fr=[Ar,pr],hr=[mr,gr],dr=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.location.pathname,a=e.header,o=e.sub_header,i=e.topAction,c=e.topComponent;return r.a.createElement(N.a,{position:"static",color:"primary",className:t.appBar},r.a.createElement(S.a,{className:t.toolbar},n!==ur.link&&r.a.createElement(T.a,{component:l.b,to:ur.link,onClick:i},r.a.createElement(M.a,null)),r.a.createElement(_.a,{variant:"h6",className:t.title},a&&"".concat(a),o&&"/".concat(o)),i&&r.a.createElement(R.a,{variant:"contained",color:"secondary",size:"small",onClick:i},"Leave"),c&&c))}}]),t}(a.PureComponent),br=Object(d.b)((function(e){var t=e.app;return{header:t.header,sub_header:t.sub_header,topAction:t.topAction,topComponent:t.topComponent}}))(Object(y.a)((function(e){var t;return{appBar:{},title:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",display:"block",width:0},toolbar:(t={},Object(k.a)(t,e.breakpoints.down("sm"),{minHeight:"auto"}),Object(k.a)(t,e.breakpoints.up("sm"),{minHeight:ft}),t)}}))(dr)),Cr=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.status;return r.a.createElement(ce,{className:t.footerToolbar},n)}}]),t}(a.PureComponent),Br=Object(d.b)((function(e){return{status:(e.crocodile.room||{}).appStatusText}}))(Object(y.a)((function(e){return{footerToolbar:{textAlign:"center",paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),justifyContent:"center"}}}))(Cr));var Or=function(e){function t(e){var n,a;return Object(O.a)(this,t),(a=Object(I.a)(this,Object(v.a)(t).call(this,e))).doGameFinish=function(){var e=a.props,t=e.isResultModalOpen,n=e.showResults;t||n()},a.doTetrisActionButton=function(e){var t=e.button_action;t&&t in a.props&&a.props[t]()},a.handleSocket=function(e){var t=e.target,n=e.action,r=e.args;t in a.listen_map&&n in a.listen_map[t]&&a.listen_map[t][n](r)},a.socketOnConnect=function(){var e=a.context;(0,a.props.socketConnect)(e.id)},a.socketOnDisconnect=function(){var e=a.context;(0,a.props.socketDisconnect)(e.id)},a.socketOnMessage=function(e){var t=e.message_type,n=e.message;(0,a.props.enqueueSnackbar)(n,{variant:t,autoHideDuration:1500})},a.listen_map=(n={},Object(k.a)(n,"COMMON_ACTIONS",{SOCKET_MESSAGE:a.socketOnMessage}),Object(k.a)(n,"GAME_TETRIS",{ON_GAME:e.updateOpponent,DO_BUTTON_ACTION:a.doTetrisActionButton,DO_GAME_DISCONNECT:e.socketGameDisconnect,DO_GAME_FINISH:a.doGameFinish}),Object(k.a)(n,"GAME_CROCODILE",{LOBBY_UPDATE_CONFIG:e.updateConfigCrocodile,UPDATE_ROOM_LIST:e.updateRoomList,UPDATE_ROOM:e.updateRoom}),n),a}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.context;e.on("connect",this.socketOnConnect),e.on("disconnect",this.socketOnDisconnect),e.on("SOCKET_CHANNEL",this.handleSocket)}},{key:"componentWillUnmount",value:function(){var e=this.context;e.off("connect",this.socketOnConnect),e.off("disconnect",this.socketOnDisconnect),e.off("SOCKET_CHANNEL",this.handleSocket)}},{key:"render",value:function(){return null}}]),t}(a.PureComponent);Or.contextType=g;var jr=Object(d.b)((function(e){return{isResultModalOpen:e.tetris.isResultModalOpen}}),(function(e){return{socketConnect:function(t){return e(function(e){return{type:"CONNECT",payload:{id:e}}}(t))},socketDisconnect:function(t){return e(function(e){return{type:"DISCONNECT",payload:{id:e}}}(t))},updateOpponent:function(t){return e(function(e){return{type:"UPDATE_OPPONENT",payload:{opponent:e}}}(t))},resetConfig:function(){return e({type:"RESET_CONFIG"})},showResults:function(){return e({type:"SHOW_RESULTS"})},socketGameReset:function(){return e(Bt())},socketGameDisconnect:function(){return e((function(e){e({type:"STOP_GAME"}),e({type:"RESET_CONFIG"})}))},startNewGame:function(){return e({type:"START_NEW_GAME"})},startMoving:function(){return e({type:"START_MOVING"})},stopMoving:function(){return e({type:"STOP_MOVING"})},stopGame:function(){return e({type:"STOP_GAME"})},startNewGameAndMove:function(){return e(We())},updateConfigCrocodile:function(t){return e(Un(t))},updateRoomList:function(t){return e(zn(t))},updateRoom:function(t){return e(function(e){return{type:"UPDATE_ROOM",payload:{room:e}}}(t))}}}))(Object(m.withSnackbar)(Or)),Ir=function(e){function t(){return Object(O.a)(this,t),Object(I.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(l.a,null,r.a.createElement(jr,null),r.a.createElement(w.a,{container:!0,direction:"column",alignItems:"stretch",justify:"space-between",className:e.layout},r.a.createElement(w.a,{item:!0,className:e.header},r.a.createElement(u.a,{component:function(e){return r.a.createElement(br,e)}})),r.a.createElement(w.a,{item:!0,className:e.body},r.a.createElement(u.c,null,Er.map((function(e,t){var n=e.link,a=(e.label,e.page);return r.a.createElement(u.a,{key:t,exact:!0,path:n,component:a})})))),r.a.createElement(w.a,{item:!0,className:e.footer},r.a.createElement(Br,null))))}}]),t}(a.PureComponent),vr=Object(y.a)((function(){return{layout:{backgroundColor:"#191922",width:"100%",height:"100%",overflow:"hidden"},header:{backgroundColor:"#121216"},body:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1},footer:{backgroundColor:"#121216"}}}))(Ir),Qr=Object(a.createContext)(),wr=function(e){function t(){var e,n;Object(O.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(I.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).showSnackbar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=n.props.enqueueSnackbar;a(e,{variant:t,autoHideDuration:2500})},n.validateResponse=function(e,t){e&&e.error?n.showSnackbar(e.error,"error"):t&&"function"===typeof t&&t(e)},n}return Object(Q.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(Qr.Provider,{value:this.showSnackbar},r.a.createElement(Ot.Provider,{value:this.validateResponse},r.a.createElement(vr,null)))}}]),t}(a.PureComponent),yr=Object(m.withSnackbar)(wr),kr={header:null,sub_header:null,topAction:null,topComponent:null};var Nr={isConnected:!1,id:null};var Sr,Tr={nickname:"",step:"LOBBY_STEP_NICKNAME"},_r={room:{},rooms:[],config:Object(dt.a)({},Tr)};var Rr=function(e,t){var n=t.table,a=t.figure,r=t.rotation;return!!xr(e,r,t)&&nt(n,ot(a[r],e))},xr=function(e,t,n){var a=Object(Se.a)(e,2),r=a[0],o=a[1],i=n.figure,c=r+i[t].length,s=o+i[t][0].length;return c<=24&&s<=10},Mr=function(e){return e.table[3].find((function(e){return 1===e}))},Gr=function(e,t){var n=t.position,a=Object(Se.a)(n,2),r=a[0],o=a[1],i=Pr(e,t);return i<0?[r,o+i]:[r,o]},Pr=function(e,t){var n=t.position,a=t.table,r=t.figure,o=n[1];return a[0].length-(o+r[e][0].length)},Yr=function(e,t,n){var a=n.table;return!!xr(e,t,n)&&nt(a,Lr(n))},Lr=function(e){var t=e.figure,n=e.position,a=e.rotation,r=t[a].length,o=t[a][0].length,i=r>o?r:o;return ot(Array.from({length:i},(function(){return Array.from({length:i},(function(){return 1}))})),n)},Hr={nickname:"",type:"TYPE_CLIENT",step:"LOBBY_STEP_NICKNAME"},Dr={table:function(e){var t=[[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,0,0,1,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,1,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];return $e(t,[e.length-t.length,0],e)}(qe(10,24)),rotation:Xe(),rotationNext:Xe(),figure:Ze(),figureNext:Ze(),position:Te,speed:150,score:0,isPause:!0,isGameRunning:!1,isResultModalOpen:!1,moveAction:null,key_map:null,opponent:null,config:Object(dt.a)({},Hr)},Ur=(Sr={},Object(k.a)(Sr,_e,(function(e){return function(e){return e.position[1]-1>=0}(e)})),Object(k.a)(Sr,Re,(function(e){return function(e){var t=e.position,n=e.rotation,a=e.table,r=e.figure;return t[1]<a[0].length-r[n][0].length}(e)})),Sr),zr=null,Wr=function(e,t){clearInterval(zr),zr=setInterval((function(){t.moveAction()}),e)};var Kr=Object(b.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP":return Object(dt.a)({},e,{},t.payload);case"CLEAN_APP":return kr;default:return e}},socket:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CONNECT":return(e=JSON.parse(JSON.stringify(t))).isConnected=!0,e.id=n.payload.id,e;case"DISCONNECT":return Nr;default:return t}},crocodile:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_ROOM":e=Object(Ve.cloneDeep)(t);var a=n.payload.room;return e.room=Object(dt.a)({},e.room,{},a,{appStatusText:a.status?Dn[a.status](a):null}),e;case"CLEAN_ROOM":return Object(dt.a)({},_r,{config:Object(dt.a)({},t.config,{step:"LOBBY_STEP_ROOM_SELECTION"})});case"UPDATE_CONFIG":return Object(dt.a)({},t,{config:Object(dt.a)({},t.config,{},n.payload.config)});case"RESET_CONFIG":return Object(dt.a)({},t,{config:Object(dt.a)({},Tr,{nickname:t.config.nickname})});case"UPDATE_ROOM_LIST":return Object(dt.a)({},t,{rooms:n.payload.rooms});default:return t}},tetris:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SPEED":return Object(dt.a)({},e,{speed:t.payload.speed});case"MOVE_FIGURE":var n=t.payload.direction,a=Pe[n](e.position);return n in Ur&&!Ur[n](e,t.payload.rotation)?e:Rr(a,e)?Object(dt.a)({},e,{position:a}):e;case"START_NEW_GAME":return clearInterval(zr),Object(dt.a)({},e,{isResultModalOpen:!1,table:qe(10,24),figure:Ze(),figureNext:Ze(),position:Te,rotation:Xe(),rotationNext:Xe(),score:0,isPause:!1,isGameRunning:!0,speed:150});case"STOP_GAME":return clearInterval(zr),Object(dt.a)({},Dr,{moveAction:e.moveAction,key_map:e.key_map,config:e.config,opponent:e.opponent});case"START_MOVING":return Wr(e.speed,e),Object(dt.a)({},e,{isPause:!1});case"STOP_MOVING":return clearInterval(zr),Object(dt.a)({},e,{isPause:!0});case"MOVE_FIGURE_DOWN":var r=Pe[Me](e.position);if(Rr(r,e))return Object(dt.a)({},e,{position:r});if(Mr(e))return clearInterval(zr),Object(dt.a)({},e,{isResultModalOpen:!0,isGameRunning:!1,speed:150});var o=$e(e.figure[e.rotation],e.position,e.table),i=at(o),c=e.score+i.length,s=e.speed;return i.length&&(o=rt(o,i),s=it(c,e.speed)),Wr(s,e),Object(dt.a)({},e,{table:o,score:c,speed:s,figure:e.figureNext,figureNext:Ze(),position:Te,rotation:e.rotationNext,rotationNext:Xe()});case"ROTATE_FIGURE":var l=t.payload.getRotation(e.rotation),u=Gr(l,e);return Yr(u,l,e)?Object(dt.a)({},e,{position:u,rotation:l}):e;case"STORE_ACTION_DATA":return Object(dt.a)({},e,{moveAction:t.payload.moveFunc,key_map:t.payload.key_map});case"CLOSE_RESULTS":return Object(dt.a)({},e,{isResultModalOpen:!1});case"UPDATE_OPPONENT":return Object(dt.a)({},e,{opponent:Object(dt.a)({},e.opponent,{},t.payload.opponent)});case"UPDATE_CONFIG":return Object(dt.a)({},e,{config:Object(dt.a)({},e.config,{},t.payload.config)});case"RESET_CONFIG":return Object(dt.a)({},e,{opponent:null,config:Object(dt.a)({},Hr,{nickname:e.config.nickname})});case"SHOW_RESULTS":return clearInterval(zr),Object(dt.a)({},e,{isResultModalOpen:!0,isGameRunning:!1});default:return e}}}),Fr=h()("https://gamehub-server.herokuapp.com/"),Jr=Object(b.d)(Kr,Object(b.a)(E.a,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SOCKET_CHANNEL";return function(n){return function(n){return function(a){return a.meta&&"META_SOCKET_EMIT"===a.meta.remote?new Promise((function(n,r){e.emit(t,a,(function(e){n(e)}))})):n(a)}}}}(Fr)));i.a.render(r.a.createElement(l.a,null,r.a.createElement(d.a,{store:Jr},r.a.createElement(p.a,{theme:B},r.a.createElement(m.SnackbarProvider,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(A.a,null),r.a.createElement(g.Provider,{value:Fr},r.a.createElement(u.a,{component:yr})))))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");c?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):s(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):s(t,e)}))}}()}},[[228,1,2]]]);
//# sourceMappingURL=main.0ae0a282.chunk.js.map