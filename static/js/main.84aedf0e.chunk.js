(this.webpackJsonpgamehub=this.webpackJsonpgamehub||[]).push([[0],{228:function(e,t,n){e.exports=n(445)},233:function(e,t,n){},273:function(e,t){},445:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),i=n.n(o);n(233),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=n(48),s=n(57),l=n(503),u=n(477),A=n(71),p=Object(a.createContext)(),m=n(201),g=n(202),E=n.n(g),f=n(12),h=n(61),d=n(101),b=Object(d.a)({palette:{type:"dark"}}),C=n(5),B=n(3),O=n(6),j=n(7),I=n(8),v=n(490),Q=n(11),w=n(4),y=n(502),k=n(481),N=n(479),S=n(76),T=n(478),_=n(218),R=n.n(_),x=function(e){var t=e.label,n=e.to,a=e.component;return r.a.createElement(s.a,{path:n,exact:!0,children:function(e){var o=e.match;return r.a.createElement(a||T.a,{to:n,disabled:Boolean(o),component:c.b,children:t})}})},M=n(18),G=n.n(M),P=n(504),Y=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).setSizeForce=function(){var e=n.getSize();n.setSize(e),setTimeout((function(){var e=n.getSize();n.setSize(e)}),200)},n.listener=function(){n.getting||clearTimeout(n.timer),n.getting=!1,n.timer=setTimeout((function(){n.getting=!0;var e=n.getSize();n.setSize(e)}),250)},n.setType1=function(e){var t=n.props.k,a=e-n.spacing;return{width:a,height:a*t}},n.setType2=function(e){var t=n.props.k,a=e-n.spacing;return{width:a/t,height:a}},n.getSize=function(){if(!n.ref.current)return!1;var e,t=n.ref.current.parentElement,a=t.offsetWidth,r=t.offsetHeight;return a<r?(e=n.setType1(a)).height>r&&(e=n.setType2(r)):a>r?(e=n.setType2(r)).width>a&&(e=n.setType1(a)):console.log("type 3"),e},n.setSize=function(e){if(!e)return!1;var t=e.width,a=e.height;n.setState((function(){return{width:t,height:a}}))},n.updateChildren=function(){var e=n.props.children,t=n.state,r=t.width,o=t.height;return Object(a.cloneElement)(e,{resizer:{width:r,height:o}})},n.ref=Object(a.createRef)(),n.getting=!0,n.spacing=e.theme.spacing(2),n.state={width:"100%",height:"100%"},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.setSizeForce(),window.addEventListener("resize",this.listener,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.listener,!1)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=this.state,o=a.width,i=a.height;return r.a.createElement(P.a,{className:G()(t.resizer,n),ref:this.ref,style:{width:"".concat(o,"px"),height:"".concat(i,"px")}},this.updateChildren())}}]),t}(a.PureComponent),H=Object(Q.a)((function(){return{resizer:{position:"absolute",minWidth:50,minHeight:50,transition:"all 0.3s ease 0s"}}}),{withTheme:!0})(Y),L=n(2),D=n(145),U=n(507),z=n(480),W=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e){var t=n.props.onSubmit;e.preventDefault(),t(e)},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onChange,a=e.placeholder,o=e.value,i=e.className,c=Object(L.a)(e,["classes","onChange","placeholder","value","className"]);return r.a.createElement(D.a,Object.assign({className:G()(t.root,i),square:!0},c),r.a.createElement("form",{className:t.form,onSubmit:this.handleSubmit},r.a.createElement(U.a,{className:t.input,placeholder:a,value:o,onChange:n,autoFocus:!0}),r.a.createElement(N.a,{className:t.iconButton,onClick:this.handleSubmit},r.a.createElement(z.a,null))))}}]),t}(a.PureComponent),K=Object(Q.a)((function(e){return{root:{position:"relative"},input:{marginLeft:e.spacing(2),flex:1},iconButton:{},form:{padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"}}}))(W);function F(e){return{type:"SET_APP",payload:e}}var J,V,q,$,X,Z,ee,te,ne=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setApp)({header:e.header})}},{key:"componentWillUnmount",value:function(){(0,this.props.setApp)({header:null})}},{key:"render",value:function(){return this.props.component}}]),t}(a.PureComponent),ae=Object(f.b)(null,(function(e){return{setApp:function(t){return e(F(t))}}}))(ne),re=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.children,o=Object(L.a)(e,["classes","className","children"]);return r.a.createElement(k.a,Object.assign({className:G()(t.toolbar,n)},o),a)}}]),t}(a.PureComponent),oe=Object(Q.a)((function(e){return{toolbar:{paddingTop:0,paddingBottom:0,paddingLeft:e.spacing(2),paddingRight:e.spacing(2),minHeight:"auto"}}}))(re),ie=n(482),ce=n(483),se=n(484),le=n(485),ue=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.onClose,o=e.title,i=void 0===o?"Game results":o;return n&&n.length?r.a.createElement(Ce,{open:!0,title:i,isCancel:!0,onClose:a},r.a.createElement(ie.a,{className:t.table},r.a.createElement(ce.a,null,n.map((function(e,n){var a=e.label,o=e.value;return r.a.createElement(se.a,{key:n,className:t.row},r.a.createElement(le.a,null,a,": "),r.a.createElement(le.a,{align:"right"},o))}))))):null}}]),t}(a.PureComponent),Ae=Object(Q.a)((function(){return{table:{},row:{"&:only-child":{"& > *":{border:"none"}}}}}))(ue),pe=n(207),me=n.n(pe),ge=n(505),Ee=n(486),fe=n(487),he=n(488),de=Object(Q.a)((function(){return{paper:{width:"100%"}}}))(ge.a),be=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){(0,n.props.onClose)()},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.open,a=e.title,o=e.isCancel,i=e.buttons,c=e.children;return r.a.createElement(de,{open:n,onClose:this.handleClose,maxWidth:"xs"},r.a.createElement(Ee.a,{disableTypography:!0,className:t.title},r.a.createElement(S.a,{variant:"h6",className:t.titleLabel},a),o?r.a.createElement(N.a,{onClick:this.handleClose},r.a.createElement(me.a,null)):null),r.a.createElement(fe.a,{dividers:!0,className:t.content},c),r.a.createElement(he.a,{className:t.actions},i?i.map((function(e,t){var n=e.label,a=Object(L.a)(e,["label"]);return r.a.createElement(T.a,Object.assign({key:t},a),n)})):null,o?r.a.createElement(T.a,{variant:"contained",onClick:this.handleClose,color:"secondary"},"Cancel"):null))}}]),t}(a.PureComponent),Ce=Object(Q.a)((function(e){return{title:{display:"flex",alignItems:"center",padding:e.spacing(2)},titleLabel:{flexGrow:1},content:{padding:e.spacing(2)},actions:{padding:e.spacing(2)}}}))(be),Be=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.isBack,o=void 0===a||a,i=e.isNext,c=void 0===i||i,s=e.onBack,l=e.onNext,u=Object(L.a)(e,["classes","className","isBack","isNext","onBack","onNext"]);return r.a.createElement(P.a,Object.assign({className:G()(t.stepper,n)},u),o?r.a.createElement(T.a,{variant:"contained",onClick:s,className:t.button},"Back"):null,c?r.a.createElement(T.a,{variant:"contained",onClick:l,className:t.button},"Next"):null)}}]),t}(a.PureComponent),Oe=Object(Q.a)((function(e){return{stepper:{marginTop:e.spacing(3),width:250},button:{margin:e.spacing(1)}}}))(Be),je=n(489),Ie=n(491),ve=n(492),Qe=n(493),we=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(je.a,null,r.a.createElement(v.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:1},Er.map((function(t){var n=t.label,o=t.link,i=t.description,c=Object(a.forwardRef)((function(e,t){return r.a.createElement(x,Object.assign({to:o,label:r.a.createElement(Ie.a,null,r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},i))},e))}));return r.a.createElement(v.a,{key:o,item:!0,zeroMinWidth:!0,xs:6,md:4,lg:3},r.a.createElement(Qe.a,{className:e.card},r.a.createElement(c,{component:function(t){return r.a.createElement(ve.a,Object.assign({className:e.actionArea},t))}})))}))))}}]),t}(a.PureComponent),ye=Object(Q.a)((function(){return{}}))(we),ke=n(43),Ne=[0,4],Se="MOVE_DIRECTION_LEFT",Te="MOVE_DIRECTION_RIGHT",_e="MOVE_DIRECTION_UP",Re="MOVE_DIRECTION_DOWN",xe=[_e,Te,Re,Se],Me=(J={},Object(w.a)(J,Re,(function(e){var t=Object(ke.a)(e,2);return[t[0]+1,t[1]]})),Object(w.a)(J,Se,(function(e){var t=Object(ke.a)(e,2);return[t[0],t[1]-1]})),Object(w.a)(J,Te,(function(e){var t=Object(ke.a)(e,2);return[t[0],t[1]+1]})),J),Ge="ArrowLeft",Pe="ArrowRight",Ye="ArrowUp",He="ArrowDown",Le="Space",De={T:(V={},Object(w.a)(V,_e,[[0,1,0],[1,1,1]]),Object(w.a)(V,Re,[[1,1,1],[0,1,0]]),Object(w.a)(V,Se,[[0,1],[1,1],[0,1]]),Object(w.a)(V,Te,[[1,0],[1,1],[1,0]]),V),Z:(q={},Object(w.a)(q,_e,[[0,1],[1,1],[1,0]]),Object(w.a)(q,Re,[[0,1],[1,1],[1,0]]),Object(w.a)(q,Se,[[1,1,0],[0,1,1]]),Object(w.a)(q,Te,[[1,1,0],[0,1,1]]),q),S:($={},Object(w.a)($,_e,[[1,0],[1,1],[0,1]]),Object(w.a)($,Re,[[1,0],[1,1],[0,1]]),Object(w.a)($,Se,[[0,1,1],[1,1,0]]),Object(w.a)($,Te,[[0,1,1],[1,1,0]]),$),Q:(X={},Object(w.a)(X,_e,[[1,1],[1,1]]),Object(w.a)(X,Re,[[1,1],[1,1]]),Object(w.a)(X,Se,[[1,1],[1,1]]),Object(w.a)(X,Te,[[1,1],[1,1]]),X),J:(Z={},Object(w.a)(Z,_e,[[1,1],[1,0],[1,0]]),Object(w.a)(Z,Re,[[0,1],[0,1],[1,1]]),Object(w.a)(Z,Se,[[1,0,0],[1,1,1]]),Object(w.a)(Z,Te,[[1,1,1],[0,0,1]]),Z),L:(ee={},Object(w.a)(ee,_e,[[1,1],[0,1],[0,1]]),Object(w.a)(ee,Re,[[1,0],[1,0],[1,1]]),Object(w.a)(ee,Se,[[1,1,1],[1,0,0]]),Object(w.a)(ee,Te,[[0,0,1],[1,1,1]]),ee),I:(te={},Object(w.a)(te,_e,[[1],[1],[1],[1]]),Object(w.a)(te,Re,[[1],[1],[1],[1]]),Object(w.a)(te,Se,[[1,1,1,1]]),Object(w.a)(te,Te,[[1,1,1,1]]),te)};function Ue(){return function(e){e({type:"START_NEW_GAME"}),e(ze())}}function ze(){return{type:"START_MOVING"}}function We(e){return{type:"UPDATE_CONFIG",payload:{config:e}}}var Ke=n(24),Fe=n(62);function Je(e,t){return Array.from({length:t},(function(){return Array.from({length:e},(function(){return 0}))}))}function Ve(e,t,n){var a=Object(ke.a)(t,2),r=a[0],o=a[1],i=Object(Fe.cloneDeep)(n);return i.map((function(t,n){return n===r&&e.forEach((function(e,t){var a;(a=i[n+t]).splice.apply(a,[o,e.length].concat(Object(Ke.a)(e))).forEach((function(e,a){0!==e&&(i[n+t][o+a]=1)}))})),t.map((function(e){return e}))}))}function qe(){var e=Math.ceil(Math.random()*(xe.length-1));return xe[e]}function $e(){var e=Object.keys(De),t=Math.floor(Math.random()*e.length);return De[e[t]]}function Xe(e){var t=xe.length,n=xe.indexOf(e);return 0===n?xe[t-1]:xe[n-1]}function Ze(e){var t=xe.length,n=xe.indexOf(e);return n===t-1?xe[0]:xe[n+1]}function et(e,t){return!e.find((function(e,n){return e.find((function(e,a){return e===t[n][a]&&1===e}))}))}function tt(e){return e.reduce((function(e,t,n){return 10===t.reduce((function(e,t){return e+t}))&&e.push(n),e}),[])}function nt(e,t){var n=Array.from({length:10},(function(){return 0})),a=Object(Fe.cloneDeep)(e);return t.forEach((function(e,t,r){var o=a.slice(0,e),i=a.slice(r[t]+1,a.length);a=[n].concat(Object(Ke.a)(o),Object(Ke.a)(i))})),a}function at(e,t){return Ve(e,t,Je(10,24))}function rt(e,t){for(var n=1;n<t;n++)e>=1*n&&e<1*n+1&&t!==150-10*n&&(t-=10);return t}var ot=function(e){function t(e){var n,a;return Object(C.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).handleKeyPress=function(e){var t=e.code,n=a.props.key_map;t in n&&n[t]()},a.key_map=(n={},Object(w.a)(n,Ye,(function(){return e.rotateFigure(Xe)})),Object(w.a)(n,He,(function(){return e.rotateFigure(Ze)})),Object(w.a)(n,Ge,(function(){return e.moveFigure(Se)})),Object(w.a)(n,Pe,(function(){return e.moveFigure(Te)})),Object(w.a)(n,Le,(function(){return e.moveFigureDown()})),n),a}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.storeActionData)(e.moveFigureDown,this.key_map),document.addEventListener("keydown",this.handleKeyPress)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress)}},{key:"render",value:function(){return null}}]),t}(a.PureComponent),it=Object(f.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.key_map;return{key_map:!a&&n?r:{}}}),(function(e){return{moveFigure:function(t){e(function(e){return{type:"MOVE_FIGURE",payload:{direction:e}}}(t))},moveFigureDown:function(){e({type:"MOVE_FIGURE_DOWN"})},rotateFigure:function(t){e(function(e){return{type:"ROTATE_FIGURE",payload:{getRotation:e}}}(t))},storeActionData:function(t,n){e(function(e,t){return{type:"STORE_ACTION_DATA",payload:{moveFunc:e,key_map:t}}}(t,n))}}}))(ot),ct=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.results,n=e.closeResults;return r.a.createElement(a.Fragment,null,r.a.createElement(Gn,{isOpponent:!1}),t?r.a.createElement(Ae,{data:t,onClose:n}):null)}}]),t}(a.PureComponent),st=Object(f.b)((function(e){var t=e.tetris,n=t.isResultModalOpen,a=t.score;return{results:n?[{label:"Your score",value:a}]:null}}),(function(e){return{closeResults:function(){e({type:"CLOSE_RESULTS"})}}}))(ct),lt=function(e){function t(e){var n,a;return Object(C.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).steps=(n={},Object(w.a)(n,"LOBBY_STEP_NICKNAME",r.a.createElement(Ot,null)),Object(w.a)(n,"LOBBY_STEP_TYPE_SELECTING",r.a.createElement(wt,null)),Object(w.a)(n,"LOBBY_STEP_CONNECTION",r.a.createElement(kt,null)),n),a}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.step;return r.a.createElement(P.a,{className:t.lobby},n in this.steps?this.steps[n]:n)}}]),t}(a.PureComponent),ut=Object(f.b)((function(e){return{step:e.tetris.config.step}}))(Object(Q.a)((function(){return{lobby:{position:"relative"}}}))(lt)),At=n(39),pt=n.n(At),mt=50,gt=60;function Et(){var e=!1;return function(t){e||(e=!0,t(),setTimeout((function(){e=!1}),750))}}var ft=n(14),ht={type:"GAME_TETRIS",meta:{remote:"META_SOCKET_EMIT"}};function dt(e){return Object(ft.a)({action:"MAKE_CONNECTION",server_id:e},ht)}function bt(){return function(e){e({type:"STOP_GAME"}),e(dt())}}var Ct=Object(a.createContext)(),Bt=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).handleNicknameChange=function(e){var t=e.target.value;(0,n.props.updateConfig)({nickname:t})},n.submitNickname=function(){var e,t,a,r,o,i;return pt.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e=n.context,t=n.props,a=t.nickname,r=t.updateConfig,o=t.socketValidateNickname,c.next=4,pt.a.awrap(o(a));case 4:i=c.sent,e(i,(function(e){r(e)}));case 6:case"end":return c.stop()}}))},n.handleNicknameSubmit=function(){n.handleNicknameSubmitDecorator(n.submitNickname)},n.handleNicknameSubmitDecorator=Et(),n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.nickname;return r.a.createElement(K,{onChange:this.handleNicknameChange,onSubmit:this.handleNicknameSubmit,placeholder:"Enter your nickname",value:e})}}]),t}(a.PureComponent);Bt.contextType=Ct;var Ot=Object(f.b)((function(e){return{nickname:e.tetris.config.nickname}}),(function(e){return{updateConfig:function(t){return e(We(t))},socketValidateNickname:function(t){return e(function(e){return Object(ft.a)({action:"VALIDATE_NICKNAME",nickname:e},ht)}(t))}}}))(Bt),jt=n(509),It=n(494),vt=n(506),Qt=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleType=function(e){var t=e.target.value;(0,n.props.updateConfig)({type:t})},n.handleBack=function(){(0,n.props.updateConfig)({step:"LOBBY_STEP_NICKNAME"})},n.handleNext=function(){(0,n.props.updateConfig)({step:"LOBBY_STEP_CONNECTION"})},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.type;return r.a.createElement(P.a,{className:t.form},r.a.createElement(jt.a,{value:n,onChange:this.handleType},r.a.createElement(It.a,{value:"TYPE_CLIENT",control:r.a.createElement(vt.a,null),label:"Client"}),r.a.createElement(It.a,{value:"TYPE_SERVER",control:r.a.createElement(vt.a,null),label:"Server"})),r.a.createElement(Oe,{onBack:this.handleBack,onNext:this.handleNext}))}}]),t}(a.PureComponent),wt=Object(f.b)((function(e){return{type:e.tetris.config.type}}),(function(e){return{updateConfig:function(t){return e(We(t))}}}))(Object(Q.a)((function(e){return{form:{margin:e.spacing(2),width:200}}}))(Qt)),yt=function(e){function t(e){var n,o;return Object(C.a)(this,t),(o=Object(O.a)(this,Object(j.a)(t).call(this,e))).renderStepTypeClient=function(){var e=o.state.server_id;return r.a.createElement(a.Fragment,null,r.a.createElement(S.a,null,"Your friend is ought to be server. Ask him to provide you his ID"),r.a.createElement(K,{onChange:o.handleClientChange,onSubmit:o.handleClientSubmit,placeholder:"Enter your friend's id",value:e}))},o.renderStepTypeServer=function(){return r.a.createElement(p.Consumer,null,(function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(S.a,null,"Share your ID with your friend"),r.a.createElement(S.a,null,r.a.createElement("code",null,e.id)))}))},o.handleClientChange=function(e){var t=e.target.value;o.setState((function(){return{server_id:t}}))},o.submitClient=function(){var e,t,n,a;return pt.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=o.context,t=o.state.server_id,n=o.props.socketMakeConnection,r.next=5,pt.a.awrap(n(t));case 5:a=r.sent,e(a);case 7:case"end":return r.stop()}}))},o.handleClientSubmit=function(){o.handleNicknameSubmitDecorator(o.submitClient)},o.handleBack=function(){(0,o.props.updateConfig)({step:"LOBBY_STEP_TYPE_SELECTING"})},o.handleNicknameSubmitDecorator=Et(),o.step_type_map=(n={},Object(w.a)(n,"TYPE_CLIENT",o.renderStepTypeClient),Object(w.a)(n,"TYPE_SERVER",o.renderStepTypeServer),n),o.state={server_id:""},o}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.type;return r.a.createElement(P.a,{className:t.form},this.step_type_map[n](),r.a.createElement(Oe,{onBack:this.handleBack,onNext:this.submitClient,isNext:!1}))}}]),t}(a.PureComponent);yt.contextType=Ct;var kt=Object(f.b)((function(e){return{type:e.tetris.config.type}}),(function(e){return{updateConfig:function(t){return e(We(t))},socketMakeConnection:function(t){return e(dt(t))}}}))(Object(Q.a)((function(e){return{form:{margin:e.spacing(2),width:200}}}))(yt)),Nt=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setApp)({})}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.resetConfig,n=e.is_lobby,a=e.socketDisconnect,r=e.stopGame;n||(console.log("make disconnect"),r(),a()),t()}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.results_data,o=a.socketGameFinish;null!==r&&o()}},{key:"render",value:function(){var e=this.props,t=e.isConnected,n=e.is_lobby,o=e.results_data,i=e.closeResults;return t?r.a.createElement(a.Fragment,null,n?r.a.createElement(ut,null):r.a.createElement(Gn,null),o?r.a.createElement(Ae,{data:o.data,title:o.title,onClose:i}):null):r.a.createElement(a.Fragment,null,"no connected")}}]),t}(a.PureComponent),St=Object(f.b)((function(e){var t=e.tetris,n=t.isResultModalOpen,a=t.opponent,r=t.score,o=t.config;return{isConnected:e.socket.isConnected,is_lobby:null===a,results_data:n?{title:r>a.score?"You won!":r<a.score?"You lost!":"\u041f\u043e\u0431\u0435\u0434\u0438\u043b\u0430 \u0434\u0440\u0443\u0436\u0431\u0430!",data:[{label:"You (".concat(o.nickname,"):"),value:r},{label:"Opponent (".concat(a.nickname,"):"),value:a.score}]}:null}}),(function(e){return{resetConfig:function(){return e({type:"RESET_CONFIG"})},setApp:function(t){return e(F(t))},stopGame:function(){return e({type:"STOP_GAME"})},socketDisconnect:function(){return e(Object(ft.a)({action:"DISCONNECT"},ht))},socketGameFinish:function(){return e(Object(ft.a)({action:"GAME_FINISH"},ht))},closeResults:function(){return e({type:"CLOSE_RESULTS"})}}}))(Nt),Tt=n(508),_t=[{value:"score",label:"Score"},{value:"speed",label:"Speed"}],Rt=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.className;return r.a.createElement(P.a,null,_t.map((function(t,o){var i=t.value,c=t.label;return r.a.createElement(S.a,{key:o,variant:"h6",className:G()(n.item,a)},c,": ",e.props[i])})))}}]),t}(a.PureComponent),xt=Object(Q.a)((function(e){return{item:{lineHeight:1,"&:not(:first-child)":{marginTop:e.spacing(.5)}}}}))(Rt),Mt=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data,a=e.isOpponent,o=e.className;return r.a.createElement(oe,{className:G()(t.toolbar,o)},n.map((function(e,n){return e?r.a.createElement(P.a,{key:n,className:G()(t.item,a?t.item_with_opponent:t.item_without_opponent)},e):null})))}}]),t}(a.PureComponent),Gt=Object(f.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}))(Object(Q.a)((function(e){var t;return{toolbar:{flexWrap:"wrap",flexDirection:"column",alignItems:"stretch",height:"100%"},item:{display:"flex",alignItems:"flex-start"},item_with_opponent:{"&:not(:first-child)":(t={},Object(w.a)(t,e.breakpoints.up("sm"),{marginTop:e.spacing(1)}),Object(w.a)(t,e.breakpoints.down("xs"),{marginTop:e.spacing(.5)}),t)},item_without_opponent:{"&:not(:first-child)":{marginTop:e.spacing(2)}},score:{}}}))(Mt)),Pt=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=e.className,a=e.classes,o=Object(L.a)(e,["preview","className","classes"]);return r.a.createElement(Lt,Object.assign({grid:t,className:G()(a.preview,n),isPreview:!0},o))}}]),t}(a.PureComponent),Yt=Object(Q.a)((function(){return{preview:{display:"flex",alignItems:"center"}}}))(Pt),Ht=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.grid,a=e.isField,o=e.isPreview,i=e.className;return r.a.createElement(P.a,{className:G()(t.field,o&&t.fieldPreview,i)},r.a.createElement(P.a,{className:t.fieldInner},n?n.map((function(e,n){return r.a.createElement(P.a,{key:n,className:G()(t.row,a&&n<4&&t.hidden)},e.map((function(e,n){return r.a.createElement(P.a,{key:n,className:G()(t.col,1===e&&t.square,o&&t.colPreview)})})))})):null))}}]),t}(a.PureComponent);Ht.defaultProps={size:30};var Lt=Object(Q.a)((function(){return{field:{position:"relative",height:function(e){return 20*e.size-19},width:function(e){return 10*e.size-10+1},overflow:"hidden"},fieldPreview:{height:function(e){return 4*e.size},width:function(e){return 4*e.size}},fieldInner:{position:"absolute",bottom:0,left:0,right:0,"$fieldPreview &":{position:"relative"}},row:{display:"flex",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",flexWrap:"nowrap","&:not(:first-child)":{marginTop:-1}},col:{width:function(e){return e.size},height:function(e){return e.size},flexShrink:0,margin:0,border:"1px solid #5a5a5a",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",flexWrap:"nowrap","&:not(:first-child)":{marginLeft:-1},"&$colPreview":{borderColor:"transparent","&$square":{borderColor:"#5a5a5a"}}},square:{backgroundColor:"#4050b5"},hidden:{opacity:0,pointerEvents:"none"},colPreview:{}}}))(Ht),Dt=n(495),Ut=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.icon,o=Object(L.a)(e,["classes","className","icon"]);return r.a.createElement(Dt.a,Object.assign({className:G()(t.button,n)},o),a)}}]),t}(a.PureComponent);Ut.defaultProps={icon:"Add"};var zt=Object(Q.a)((function(){return{button:{},typograpy:{lineHeight:1}}}))(Ut),Wt=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.name,a=e.className;return r.a.createElement(P.a,{className:t.nickname},r.a.createElement(S.a,{variant:"h6",className:G()(t.value,a)},n))}}]),t}(a.PureComponent),Kt=Object(Q.a)((function(){return{nickname:{position:"relative",display:"flex",width:"100%",alignItems:"stretch",justifyContent:"stretch"},value:{lineHeight:1.1,width:0,flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}}))(Wt),Ft=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=e.toolbarClassName,o=e.field,i=e.toolbar;return r.a.createElement(P.a,{className:G()(t.playerInterface,n)},o,r.a.createElement(P.a,{className:G()(t.toolbar,a)},i))}}]),t}(a.PureComponent),Jt=Object(Q.a)((function(){return{playerInterface:{display:"flex",alignItems:"stretch",justifyContent:"center"},toolbar:{}}}))(Ft),Vt=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.speed,a=Object(L.a)(e,["score","speed"]);return r.a.createElement(xt,Object.assign({score:t,speed:n},a))}}]),t}(a.PureComponent),qt=Object(f.b)((function(e){return{score:e.tetris.score,speed:e.tetris.speed}}))(Vt),$t=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=Object(L.a)(e,["preview"]);return r.a.createElement(Yt,Object.assign({preview:t},n))}}]),t}(a.PureComponent),Xt=Object(f.b)((function(e){return{preview:e.tetris.isGameRunning&&e.tetris.figureNext[e.tetris.rotationNext]}}))($t),Zt=n(143),en=n.n(Zt),tn=n(208),nn=n.n(tn),an=n(209),rn=n.n(an),on=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.grid,n=Object(L.a)(e,["grid"]);return r.a.createElement(Lt,Object.assign({grid:t,isField:!0},n))}}]),t}(a.PureComponent),cn=Object(f.b)((function(e){var t=e.tetris.opponent;return{grid:t.field&&t.field.length?t.field:e.tetris.table}}))(on),sn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.score,n=e.speed,a=Object(L.a)(e,["score","speed"]);return r.a.createElement(xt,Object.assign({score:t,speed:n},a))}}]),t}(a.PureComponent),ln=Object(f.b)((function(e){return{score:e.tetris.opponent.score,speed:e.tetris.opponent.speed}}))(sn),un=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.speed,e.nickname),n=e.previewComponent,a=(e.classes,e.labelClassName),o=Object(L.a)(e,["speed","nickname","previewComponent","classes","labelClassName"]);return r.a.createElement(Gt,Object.assign({data:[r.a.createElement(Kt,{name:t,className:a}),r.a.createElement(ln,{className:a}),n]},o))}}]),t}(a.PureComponent),An=Object(f.b)((function(e){return{nickname:e.tetris.opponent.nickname}}))(Object(Q.a)((function(){return{}}))(un)),pn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.preview,n=Object(L.a)(e,["preview"]);return r.a.createElement(Yt,Object.assign({preview:t},n))}}]),t}(a.PureComponent),mn=Object(f.b)((function(e){return{preview:e.tetris.isGameRunning&&e.tetris.opponent.preview}}))(pn),gn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.size,a=e.labelClassName,o=e.toolbarClassName;return r.a.createElement(Jt,{className:t.opponent,field:r.a.createElement(cn,{size:n}),toolbar:r.a.createElement(An,{className:o,labelClassName:a,previewComponent:r.a.createElement(mn,{size:n})})})}}]),t}(a.PureComponent),En=Object(Q.a)((function(e){return{opponent:Object(w.a)({},e.breakpoints.down("sm"),{position:"absolute",bottom:0})}}))(gn),fn=10,hn=17,dn=function(e){function t(){var e,n;Object(C.a)(this,t);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(i)))).handleAction=function(e){var t,a,r,o,i,c;return pt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t=n.context,a=n.props,r=a.isOpponent,o=a.socketSendButtonAction,i=function(){return e in n.props&&n.props[e]()},r){s.next=7;break}i(),s.next=11;break;case 7:return s.next=9,pt.a.awrap(o(e));case 9:c=s.sent,t(c,i);case 11:case"end":return s.stop()}}))},n.handleStart=function(e){e.currentTarget.blur(),n.handleAction("startNewGameAndMove")},n.handleStartMoving=function(){n.handleAction("startMoving")},n.handleStopMoving=function(){n.handleAction("stopMoving")},n.handleStopGame=function(){var e=n.props.isOpponent?"socketGameReset":"stopGame";n.handleAction(e)},n.renderPlayPauseButtons=function(){var e=n.props,t=e.classes,o=e.isGameRunning,i=e.isPlayButton,c=e.isPauseButton;return r.a.createElement(a.Fragment,null,o?r.a.createElement(a.Fragment,null,r.a.createElement(zt,{icon:r.a.createElement(nn.a,null),size:"small",onClick:n.handleStopGame,className:t.button}),i&&r.a.createElement(zt,{icon:r.a.createElement(en.a,null),size:"small",onClick:n.handleStartMoving,className:t.button}),c&&r.a.createElement(zt,{icon:r.a.createElement(rn.a,null),size:"small",onClick:n.handleStopMoving,className:t.button})):r.a.createElement(zt,{icon:r.a.createElement(en.a,null),size:"small",onClick:n.handleStart}))},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.setApp)({topComponent:this.renderPlayPauseButtons()})}},{key:"componentDidUpdate",value:function(e,t,n){var a=this.props,r=a.setApp,o=a.isGameRunning,i=a.isPlayButton,c=a.isPauseButton;o===e.isGameRunning&&i===e.isPlayButton&&c===e.isPauseButton||r({topComponent:this.renderPlayPauseButtons()})}},{key:"componentWillUnmount",value:function(){(0,this.props.setApp)({topComponent:null})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.nickname,a=e.previewComponent,o=e.isOpponent,i=e.width,c=Object(Tt.b)("sm",i),s=Object(Tt.b)("xs",i)?fn:hn;return r.a.createElement(Gt,{data:[n&&r.a.createElement(Kt,{name:n,className:o?t.label:t.labelSingle}),r.a.createElement(qt,{className:o?t.label:t.labelSingle}),a,o&&c&&r.a.createElement(En,{size:s,labelClassName:t.labelOpponent,toolbarClassName:t.toolbarOpponent})]})}}]),t}(a.PureComponent);dn.contextType=Ct;var bn,Cn=Object(f.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.opponent,o=t.config;return{isGameRunning:n,isPlayButton:n&&a,isPauseButton:n&&!a,nickname:null!==r&&o.nickname,isOpponent:null!==r}}),(function(e){return{startNewGame:function(){e({type:"START_NEW_GAME"})},stopGame:function(){e({type:"STOP_GAME"})},startMoving:function(){e({type:"START_MOVING"})},stopMoving:function(){e({type:"STOP_MOVING"})},startNewGameAndMove:function(){e(Ue())},setApp:function(t){return e(F(t))},socketSendButtonAction:function(t){return e(function(e){return Object(ft.a)({action:"SEND_BUTTON_ACTION",button_action:e},ht)}(t))},socketGameReset:function(){return e(bt())}}}))(Object(Tt.a)()(Object(Q.a)((function(e){return{button:{"&:not(:first-child)":{marginLeft:e.spacing(1)}},label:Object(w.a)({},e.breakpoints.down("xs"),{fontSize:"0.7rem"}),labelOpponent:Object(w.a)({},e.breakpoints.down("sm"),{fontSize:"0.7rem"}),labelSingle:Object(w.a)({},e.breakpoints.down("xs"),{fontSize:"0.8rem"}),toolbarOpponent:Object(w.a)({},e.breakpoints.down("xs"),{position:"absolute",bottom:20*fn-18,left:0,padding:0,height:"auto"})}}))(dn))),Bn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.isOpponent&&!Object(Fe.isEqual)(this.props.field,e.field)){var a=this.props;(0,a.socketSendMove)({field:a.field,preview:a.preview,speed:a.speed,score:a.score})}}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.width,a=Object(L.a)(e,["field","width"]);return r.a.createElement(Lt,Object.assign({size:Object(Tt.c)("sm",n)?30:20,grid:t,isField:!0},a))}}]),t}(a.PureComponent),On=Object(f.b)((function(e){var t=e.tetris,n=t.opponent,a=t.isGameRunning,r=t.figureNext,o=t.rotationNext,i=t.figure,c=t.rotation,s=t.position,l=t.table,u=t.speed,A=t.score;return{isOpponent:null!==n,preview:a&&r[o],speed:u,score:A,field:i?Ve(i[c],s,l):l}}),(function(e){return{socketSendMove:function(t){return e(function(e){return Object(ft.a)({action:"SEND_MOVE"},e,{},ht)}(t))}}}))(Object(Tt.a)()(Bn)),jn=n(210),In=n.n(jn),vn=n(211),Qn=n.n(vn),wn=n(212),yn=n.n(wn),kn=n(213),Nn=n.n(kn),Sn=[{icon:r.a.createElement(In.a,null),action:Ge,position:"left"},{icon:r.a.createElement(Qn.a,null),action:Pe,position:"right"},{icon:r.a.createElement(yn.a,null),action:Le,position:"down"}],Tn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.key_map;return r.a.createElement(P.a,{className:t.mobileBar},r.a.createElement(P.a,{className:t.item},r.a.createElement(P.a,{className:t.arrows},Sn.map((function(e,a){var o=e.icon,i=e.action,c=e.position;return r.a.createElement(zt,{key:a,icon:o,onClick:n[i],className:G()(t.touchButton,t.arrow,t["arrow_".concat(c)])})})))),r.a.createElement(P.a,{className:t.item},r.a.createElement(P.a,{className:t.arrows},r.a.createElement(zt,{icon:r.a.createElement(Nn.a,null),onClick:n[Ye],className:G()(t.touchButton,t.arrow,t.arrow_rightCenter)}))))}}]),t}(a.PureComponent),_n=Object(f.b)((function(e){var t=e.tetris,n=t.isGameRunning,a=t.isPause,r=t.key_map;return{key_map:!a&&n?r:{}}}),null)(Object(Q.a)((function(){return{mobileBar:{position:"relative",display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"flex-end",justifyContent:"space-between",zIndex:1,height:120},item:{"&:first-child":{marginLeft:60},"&:last-child":{marginRight:60}},arrows:{position:"relative",width:60,height:60,marginTop:-60,marginBottom:60},touchButton:{width:60,height:60,padding:0,minWidth:"auto"},arrow:{position:"absolute",borderRadius:"100%"},arrow_left:{top:0,left:"-100%"},arrow_right:{top:0,right:"-100%"},arrow_down:{bottom:"-100%"},arrow_center:{top:0,left:0},arrow_rightCenter:{top:"50%",right:"-100%"}}}))(Tn)),Rn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.size,a=e.isOpponent;return r.a.createElement(Jt,{field:r.a.createElement(On,{size:n}),toolbar:r.a.createElement(Cn,{previewComponent:r.a.createElement(Xt,{size:n,className:a?t.preview:""})}),toolbarClassName:!a&&t.toolbar})}}]),t}(a.PureComponent),xn=Object(f.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}))(Object(Q.a)((function(e){return{toolbar:Object(w.a)({},e.breakpoints.up("sm"),{marginLeft:30}),preview:Object(w.a)({},e.breakpoints.down("xs"),{position:"fixed",top:mt,right:0,opacity:.25,display:"flex",alignItems:"center",justifyContent:"center"})}}))(Rn)),Mn=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleLeave=function(){var e=n.props.history;console.log(e),e.push(lr.link)},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.width,o=e.isOpponent,i=Object(Tt.b)("xs",n),c=Object(Tt.b)("sm",n),s=i?17:30;return r.a.createElement(a.Fragment,null,r.a.createElement(it,null),r.a.createElement(P.a,{className:t.layout},r.a.createElement(P.a,{className:t.body},r.a.createElement(xn,{size:s}),o&&!c?r.a.createElement(En,{size:s}):null),i?r.a.createElement(P.a,{className:t.mobileBar},r.a.createElement(_n,null)):null))}}]),t}(a.PureComponent),Gn=Object(f.b)((function(e){return{isOpponent:null!==e.tetris.opponent}}),(function(e){return{closeResults:function(){e({type:"CLOSE_RESULTS"})}}}))(Object(s.f)(Object(Tt.a)()(Object(Q.a)((function(){return{layout:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"},body:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},mobileBar:{alignSelf:"stretch"}}}))(Mn)))),Pn=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(je.a,null,r.a.createElement(v.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch",spacing:1},gr.map((function(t){var n=t.name,o=t.description,i=t.link,c=Object(a.forwardRef)((function(e,t){return r.a.createElement(x,Object.assign({to:i,label:r.a.createElement(Ie.a,null,r.a.createElement(S.a,{gutterBottom:!0,variant:"h5",component:"h2"},n),r.a.createElement(S.a,{variant:"body2",color:"textSecondary",component:"p"},o))},e))}));return r.a.createElement(v.a,{key:i,item:!0,zeroMinWidth:!0,xs:6,md:4,lg:3},r.a.createElement(Qe.a,{className:e.card},r.a.createElement(c,{component:function(t){return r.a.createElement(ve.a,Object.assign({className:e.actionArea},t))}})))}))))}}]),t}(a.PureComponent),Yn=Object(Q.a)((function(){return{home:{},card:{height:"100%"},actionArea:{height:"100%"}}}))(Pn),Hn=(bn={},Object(w.a)(bn,"ROOM_STATUS_WAITING",(function(){return"We need more players (2 minimum)"})),Object(w.a)(bn,"ROOM_STATUS_PAINTER_SELECTING",(function(e){var t=e.countdown;return"Painter is being selected in ".concat(t," (random)")})),Object(w.a)(bn,"ROOM_STATUS_WORD_SELECTING",(function(e){var t=e.painter;return"Painter ".concat(t.nickname," is selecting a word")})),Object(w.a)(bn,"ROOM_STATUS_DRAWING",(function(e){var t=e.painter;return"".concat(t.nickname," is drawing")})),Object(w.a)(bn,"ROOM_STATUS_GAME_FINISHED",(function(e){var t=e.winner;return"The game is over. ".concat(t.nickname," wins")})),bn);function Ln(e){return{type:"UPDATE_CONFIG",payload:{config:e}}}function Dn(e){return{type:"UPDATE_ROOM_LIST",payload:{rooms:e}}}var Un=function(e){function t(e){var n,a;return Object(C.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).handleBackToNickname=function(){(0,a.props.updateConfig)({step:"LOBBY_STEP_NICKNAME"})},a.steps=(n={},Object(w.a)(n,"LOBBY_STEP_NICKNAME",r.a.createElement(Jn,null)),Object(w.a)(n,"LOBBY_STEP_ROOM_SELECTION",r.a.createElement(na,{onBackToNickname:a.handleBackToNickname})),n),a}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.step;return r.a.createElement(P.a,{className:t.lobby},n in this.steps?this.steps[n]:n)}}]),t}(a.PureComponent),zn=Object(f.b)((function(e){return{step:e.crocodile.config.step}}),(function(e){return{updateConfig:function(t){return e(Ln(t))}}}))(Object(Q.a)((function(){return{lobby:{position:"relative"},lobbyContent:{position:"relative"}}}))(Un));var Wn={type:"GAME_CROCODILE",meta:{remote:"META_SOCKET_EMIT"}};var Kn=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).handleNicknameChange=function(e){var t=e.target.value;(0,n.props.updateConfig)({nickname:t})},n.submitNickname=function(){var e,t,a,r,o,i,c;return pt.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=n.context,t=n.props,a=t.nickname,r=t.updateConfig,o=t.socketValidateNickname,i=t.updateRoomList,s.next=4,pt.a.awrap(o(a));case 4:c=s.sent,e(c,(function(e){var t=e.config,n=e.rooms;r(t),i(n)}));case 6:case"end":return s.stop()}}))},n.handleNicknameSubmit=function(){n.handleNicknameSubmitDecorator(n.submitNickname)},n.handleNicknameSubmitDecorator=function(){var e=!1;return function(t){e||(e=!0,t(),setTimeout((function(){e=!1}),750))}}(),n.state={nickname:""},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.nickname;return r.a.createElement(K,{onChange:this.handleNicknameChange,onSubmit:this.handleNicknameSubmit,placeholder:"Enter your nickname",value:e})}}]),t}(a.PureComponent);Kn.contextType=Ct;var Fn,Jn=Object(f.b)((function(e){return{nickname:e.crocodile.config.nickname}}),(function(e){return{updateConfig:function(t){return e(Ln(t))},updateRoomList:function(t){return e(Dn(t))},socketValidateNickname:function(t){return e(function(e){return Object(ft.a)({action:"VALIDATE_NICKNAME",nickname:e},Wn)}(t))}}}))(Kn),Vn=n(498),qn=n(510),$n=n(499),Xn=n(500),Zn=n(496),ea=n(497),ta=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleNewRoomModalOpen=function(){n.setState((function(){return{isNewRoomModal:!0}}))},n.handleJoinRoom=function(e){(0,n.props.socketJoinRoom)(e)},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=t.rooms,i=t.onBackToNickname;return r.a.createElement(je.a,null,r.a.createElement(S.a,{className:n.stepTitle,variant:"h6"},"Select room or create new one:"),r.a.createElement(v.a,{container:!0},r.a.createElement(v.a,{item:!0},r.a.createElement(N.a,{className:n.iconButton,onClick:i},r.a.createElement(Zn.a,null)),r.a.createElement(N.a,{className:n.iconButton,onClick:this.handleNewRoomModalOpen,disabled:!0},r.a.createElement(ea.a,null))),r.a.createElement(v.a,{item:!0,className:n.listArea},r.a.createElement(D.a,{square:!0},r.a.createElement(Vn.a,{component:"nav",className:n.list},o&&o.length?o.map((function(t,i){var c=t.room,s=t.players;return r.a.createElement(a.Fragment,{key:c},r.a.createElement(qn.a,{button:!0,onClick:function(){return e.handleJoinRoom(c)}},r.a.createElement($n.a,{primary:c,className:n.listItemText}),r.a.createElement(P.a,null,"(",s,")")),i!==o.length-1?r.a.createElement(Xn.a,null):null)})):"No rooms found")))))}}]),t}(a.PureComponent),na=Object(f.b)((function(e){return{rooms:e.crocodile.rooms}}),(function(e){return{socketJoinRoom:function(t){return e(function(e){return Object(ft.a)({action:"JOIN_ROOM",room:e},Wn)}(t))}}}))(Object(Q.a)((function(e){return{root:{},input:{marginLeft:e.spacing(2),flex:1},iconButton:{padding:20},divider:{height:28,margin:4},stepTitle:{margin:"20px 0"},list:{maxWidth:350,width:"100%"},listArea:{flexGrow:1},listItemText:{marginRight:e.spacing(2)}}}))(ta)),aa=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.task,o=e.isPainter,i=e.children;return r.a.createElement(a.Fragment,null,r.a.createElement(v.a,{container:!0,spacing:0,wrap:"nowrap",className:t.crocodile},r.a.createElement(v.a,{item:!0,className:t.paint},r.a.createElement(P.a,{className:t.paintWork},i),r.a.createElement(P.a,{className:t.paintHeader},r.a.createElement(fa,{data:[Object(ft.a)({},n),{label:"Players",value:r.a.createElement(ga,null)}]}))),r.a.createElement(v.a,{item:!0,className:t.chat},r.a.createElement(Ca,{painterMode:o}))),r.a.createElement(da,null))}}]),t}(a.PureComponent),ra=Object(Q.a)((function(e){return{crocodile:Object(w.a)({alignItems:"stretch",justifyContent:"stretch",height:"100%",flexDirection:"column"},e.breakpoints.up("md"),{flexDirection:"row"}),paint:{position:"relative",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"stretch"},paintHeader:{},paintWork:{position:"relative",flexGrow:1,display:"flex",alignItems:"center",justifyContent:"center",paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},chat:Object(w.a)({flexBasis:function(e){return e.isPainter?130:200},flexShrink:0,paddingTop:0,paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:e.spacing(1)},e.breakpoints.up("md"),{flexBasis:"250px !important",paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:0}),players:{display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}))(aa),oa=function(e){e.classes;var t=Object(L.a)(e,["classes"]);return t.isPainter?r.a.createElement(Aa,t):r.a.createElement(la,t)},ia=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).handleLeaveRoom=function(){if(n.is_left)return!1;var e=n.props,t=e.setApp,a=e.cleanRoom;(0,e.socketLeaveRoom)(),a(),t({sub_header:null,topAction:null}),n.is_left=!0},n.is_left=!1,n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.setApp)({sub_header:e.roomName,topAction:this.handleLeaveRoom})}},{key:"componentWillUnmount",value:function(){this.handleLeaveRoom()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.isPainter;return r.a.createElement(P.a,{className:t.interface},r.a.createElement(oa,Object.assign({isPainter:n},this.props)))}}]),t}(a.PureComponent),ca=Object(f.b)((function(e){return{sub_header:e.app.sub_header,isPainter:(e.crocodile.room.painter||{}).id===e.socket.id,roomName:e.crocodile.room.roomName}}),(function(e){return{cleanRoom:function(){e({type:"CLEAN_ROOM"})},setApp:function(t){e(F(t))},socketLeaveRoom:function(){e(Object(ft.a)({action:"LEAVE_ROOM"},Wn))}}}))(Object(Q.a)((function(){return{interface:{position:"relative",width:"100%",height:"100%"}}}))(ia)),sa=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).getTask=function(){var e=n.props,t=e.word,a=e.painter_name;return t?{label:"Your task",value:"Try to guess the word that ".concat(a," is drawing")}:{}},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.getTask();return r.a.createElement(ra,Object.assign({task:e},this.props),r.a.createElement(Ga,null))}}]),t}(a.PureComponent),la=Object(f.b)((function(e){return{word:e.crocodile.room.word,painter_name:(e.crocodile.room.painter||{}).nickname}}))(Object(Q.a)((function(){return{}}))(sa)),ua=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleWordSelect=function(e,t){(0,n.props.socketWordSelect)(t)},n.handleConvertToImage=function(e){if(!e)return!1;(0,n.props.socketPaint)(e.current.toDataURL())},n.getTask=function(){var e=n.props.word;return e?{label:"Your task",value:'Try to draw word "'.concat(e,'"')}:{}},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,o=(t.onWordSelect,t.isWordDefined),i=t.words,c=Object(L.a)(t,["classes","onWordSelect","isWordDefined","words"]);return r.a.createElement(a.Fragment,null,r.a.createElement(ra,Object.assign({task:this.getTask()},c),r.a.createElement(xa,{onConvertToImage:this.handleConvertToImage})),r.a.createElement(ge.a,{open:o},r.a.createElement(P.a,{className:n.wordList},i.map((function(t,a){return r.a.createElement(T.a,{key:a,className:n.wordButton,variant:"outlined",onClick:function(n){return e.handleWordSelect(n,t)}},t)})))))}}]),t}(a.PureComponent),Aa=Object(f.b)((function(e){return{isWordDefined:!e.crocodile.room.word,words:e.crocodile.room.words}}),(function(e){return{socketWordSelect:function(t){return e(function(e){return Object(ft.a)({action:"WORD_SELECT",word:e},Wn)}(t))},socketPaint:function(t){return e(function(e){return Object(ft.a)({action:"PAINT",image:e},Wn)}(t))}}}))(Object(Q.a)((function(e){return{wordList:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:e.spacing(2)},wordButton:{width:"100%","&:not(:first-child)":{marginTop:e.spacing(1)}}}}))(ua)),pa=n(511),ma=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){return function(e){}},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.players,a=e.painterId,o=Object.keys(n);return r.a.createElement(P.a,{className:t.players},n&&o.length?o.map((function(e,t){return r.a.createElement(pa.a,{key:t,size:"small",label:n[e].nickname,color:a===e?"primary":"default"})})):"There is no players in this room")}}]),t}(a.PureComponent),ga=Object(f.b)((function(e){return{players:e.crocodile.room.players,painterId:(e.crocodile.room.painter||{}).id}}))(Object(Q.a)((function(e){return{players:{alignSelf:"flex-start",display:"flex",justifyContent:"center",flexWrap:"wrap","& > *":{margin:e.spacing(.5)}}}}))(ma)),Ea=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.data;return r.a.createElement(oe,null,r.a.createElement(P.a,{className:t.roomInfoBar},n.map((function(e,n){var a=e.label,o=e.value;return a&&o?r.a.createElement(P.a,{key:n,className:t.item},r.a.createElement(P.a,{className:t.label,fontWeight:"fontWeightMedium"},a,":"),r.a.createElement(P.a,{className:t.value},o)):null}))))}}]),t}(a.PureComponent),fa=Object(Q.a)((function(e){return{roomInfoBar:{position:"relative",alignSelf:"flex-start",width:"100%",marginBottom:e.spacing(1)},item:{display:"flex",alignItems:"center",justifyContent:"flex-start",flexWrap:"wrap",flexDirection:"row"},label:{flexBasis:70},value:{marginLeft:e.spacing(2)}}}))(Ea),ha=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.winner_name,a=e.word;return n?r.a.createElement(ge.a,{open:!0},r.a.createElement(Ee.a,null,r.a.createElement(P.a,null,r.a.createElement(P.a,{component:"h4"},"The game is over!"),r.a.createElement(ie.a,{className:t.table},r.a.createElement(ce.a,null,r.a.createElement(se.a,null,r.a.createElement(le.a,null,"Winner: "),r.a.createElement(le.a,{align:"right"},n)),r.a.createElement(se.a,null,r.a.createElement(le.a,null,"Right word: "),r.a.createElement(le.a,{align:"right"},a))))))):null}}]),t}(a.PureComponent),da=Object(f.b)((function(e){return{winner_name:(e.crocodile.room.winner||{}).nickname,word:e.crocodile.room.word}}))(Object(Q.a)((function(){return{table:{maxWidth:300}}}))(ha)),ba=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).onChat=function(e){(0,n.props.socketChat)(e)},n.handleChat=function(){var e=n.state.message;e.length>0&&(n.setState((function(){return{message:""}})),n.lockFuncChat((function(){return n.onChat(e)})))},n.handleMessageChange=function(e){var t=e.target.value;n.setState((function(){return{message:t}}))},n.handleLikeMessage=function(e){return function(t){(0,n.props.socketMessageMark)(e,t)}},n.lockFuncChat=Et(),n.state={message:""},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.painterMode,a=this.state.message;return r.a.createElement(v.a,{container:!0,spacing:0,direction:"column",className:t.wrapChat},r.a.createElement(v.a,{item:!0,className:t.wrapMessages},r.a.createElement(Na,{painterMode:n,onLikeMessage:this.handleLikeMessage})),n?null:r.a.createElement(v.a,{item:!0,className:t.wrapSubmit},r.a.createElement(K,{onChange:this.handleMessageChange,onSubmit:this.handleChat,placeholder:"Message",value:a,className:t.textField,elevation:5})))}}]),t}(a.PureComponent),Ca=Object(f.b)(null,(function(e){return{socketChat:function(t){return e(function(e){return Object(ft.a)({action:"CHAT",message:e},Wn)}(t))},socketMessageMark:function(t,n){return e(function(e,t){return Object(ft.a)({action:"MESSAGE_MARK",id:e,value:t},Wn)}(t,n))}}}))(Object(Q.a)((function(e){return{chat:{flexGrow:1},wrapChat:{position:"relative",height:"100%",margin:0},wrapMessages:{position:"relative",flexGrow:1,padding:"0 !important"},wrapSubmit:{flexShrink:0,padding:"".concat(e.spacing(1),"px 0 0 0 !important")},textField:{width:"100%",padding:"2px 4px",display:"flex",alignItems:"center"},input:{flex:1}}}))(ba)),Ba=n(110),Oa=n.n(Ba),ja=n(111),Ia=n.n(ja),va=n(144),Qa=(Fn={},Object(w.a)(Fn,"THUMB_STATUS_LIKE",(function(e){return r.a.createElement(Oa.a,{className:G()(e.thumb,e.thumbUp)})})),Object(w.a)(Fn,"THUMB_STATUS_DISLIKE",(function(e){return r.a.createElement(Ia.a,{className:G()(e.thumb,e.thumbDown)})})),Fn),wa=function(e){var t=e.classes,n=e.sender,a=e.message,o=e.onLikeMessage,i=e.likeStatus;return r.a.createElement(P.a,{className:t.card},o?r.a.createElement(ar,{className:t.thumbClicker,onClick:o}):null,r.a.createElement(P.a,{fontWeight:"fontWeightBold",className:t.name},i&&Qa[i](t),n),r.a.createElement(P.a,{className:t.message},a))},ya=function(e){var t=e.classes,n=e.message;return r.a.createElement(P.a,{className:t.card},r.a.createElement(P.a,{fontWeight:"fontWeightLight",className:t.messageServer},n))},ka=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).scrollWindowToBottom=function(){if(n.windowRef&&n.windowRef.current){var e=n.windowRef.current,t=e.scrollHeight,a=e.clientHeight;n.windowRef.current.scrollTop=t-a}},n.windowRef=Object(a.createRef)(),n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){this.scrollWindowToBottom()}},{key:"componentDidUpdate",value:function(e,t,n){this.scrollWindowToBottom()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.chat,o=e.painterMode,i=e.onLikeMessage,c=n&&n.length?n:[{player:{nickname:"SERVER"},message:"This chat is currently empty"}];return r.a.createElement(D.a,{elevation:5,square:!0,className:t.window},r.a.createElement(P.a,{className:t.windowInner,ref:this.windowRef},c.map((function(e,n){var c=e.player,s=e.message,l=e.id,u=e.likeStatus,A=c.nickname,p=o?{onLikeMessage:i(l)}:null;return r.a.createElement(a.Fragment,{key:n},"SERVER"===A?r.a.createElement(ya,{classes:t,message:s}):r.a.createElement(wa,Object.assign({classes:t,message:s,sender:A,likeStatus:u},p)))}))))}}]),t}(a.PureComponent),Na=Object(f.b)((function(e){return{chat:e.crocodile.room.chat}}))(Object(Q.a)((function(e){return{window:{position:"relative",width:"100%",height:"100%"},windowInner:{position:"absolute",top:0,left:0,right:0,bottom:0,overflowX:"hidden",overflowY:"scroll"},card:Object(w.a)({position:"relative",padding:e.spacing(1),"&:nth-child(2n)":{backgroundColor:Object(va.fade)(e.palette.grey[400],.1)}},e.breakpoints.down("sm"),{padding:e.spacing(.5)}),cardActive:{cursor:"pointer",display:"block","&:hover":{backgroundColor:Object(va.fade)(e.palette.primary.light,.2)}},name:Object(w.a)({textAlign:"left",fontSize:e.typography.pxToRem(13),paddingBottom:e.spacing(1)},e.breakpoints.down("sm"),{paddingBottom:e.spacing(.5)}),message:{textAlign:"right",color:"#fff",fontSize:e.typography.pxToRem(12)},messageServer:{textAlign:"right",fontSize:e.typography.pxToRem(10)},thumb:{fontSize:e.typography.pxToRem(14),verticalAlign:"middle",marginRight:e.spacing(1),color:e.palette.primary.main},thumbUp:{color:"green"},thumbDown:{color:"red"},thumbClicker:{position:"absolute",top:0,right:0,width:"auto",transition:"opacity 0.3s ease 0s",opacity:0,"$card:hover &":{opacity:.75}}}}))(ka)),Sa=n(112),Ta=n.n(Sa),_a=null,Ra=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).state={lineOptions:{lineWidth:2,lineJoin:"round",lineCap:"round",strokeStyle:"#ffffff"}},n.handlerColorSelect=function(e){n.setState((function(t){return{lineOptions:Object(ft.a)({},t.lineOptions,{strokeStyle:e})}}))},n.getCoords=function(e){var t=e.target,n=e.changedTouches,a=t.getBoundingClientRect(),r=a.left,o=a.top,i=n?n[0]:e;return{x:i.clientX-r,y:i.clientY-o}},n.updateLine=function(){var e=n.state.lineOptions;for(var t in e)_a[t]=e[t]},n.makeStep=function(e){var t=n.props.onConvertToImage,a=n.getCoords(e),r=a.x,o=a.y;return _a.lineTo(r,o),_a.stroke(),t(n.canvas),{x:r,y:o}},n.init=function(e,t){console.log(e,t),n.canvas.current.width=e,n.canvas.current.height=t,_a=n.canvas.current.getContext("2d"),Ta.a.enableUndo(_a),n.setListeners()},n.saveUpdateSizeFunc=function(e){n.doUpdateSize=e},n.updateSize=function(e,t){Ta.a.disableUndo(_a);var a=_a.getImageData(0,0,e,t);n.canvas.current.width=e,n.canvas.current.height=t,_a.putImageData(a,0,0),n.savedSize.width=e,n.savedSize.height=t,Ta.a.enableUndo(_a)},n.setListeners=function(){n.canvas.current.addEventListener("mousedown",n.handleMouseDown,!1),n.canvas.current.addEventListener("mouseup",n.handleMouseUp,!1),n.canvas.current.addEventListener("mousemove",n.handleMouseMove,!1),n.canvas.current.addEventListener("touchstart",n.handleTouchStart,!1),n.canvas.current.addEventListener("touchend",n.handleTouchEnd,!1),n.canvas.current.addEventListener("touchmove",n.handleTouchMove,!1)},n.removeListeners=function(){n.canvas.current.removeEventListener("mousedown",n.handleMouseDown,!1),n.canvas.current.removeEventListener("mouseup",n.handleMouseUp,!1),n.canvas.current.removeEventListener("mousemove",n.handleMouseMove,!1),n.canvas.current.removeEventListener("touchstart",n.handleTouchStart,!1),n.canvas.current.removeEventListener("touchend",n.handleTouchEnd,!1),n.canvas.current.removeEventListener("touchmove",n.handleTouchMove,!1)},n.handleTouchStart=function(e){n.pointStart(e)},n.handleTouchEnd=function(e){n.pointEnd(e)},n.handleTouchMove=function(e){n.handleMouseMove(e)},n.pointStart=function(e){n.isDrawing=!0;var t=n.props.onConvertToImage;_a.putTag(),n.updateLine(),_a.beginPath();var a=n.getCoords(e),r=a.x,o=a.y;_a.moveTo(r,o),t(n.canvas)},n.pointEnd=function(e){n.isDrawing=!1,n.makeStep(e),_a.putTag()},n.pointMove=function(e){n.isDrawing&&n.makeStep(e)},n.handleMouseDown=function(e){0===e.button&&n.pointStart(e)},n.handleMouseUp=function(e){0===e.button&&n.pointEnd(e)},n.handleMouseMove=function(e){n.isDrawing&&n.makeStep(e)},n.handleUndo=function(){var e=n.props.onConvertToImage;console.log(n.savedSize),_a.undoTag(/^(?!.*(width|height|size|fillRect))/,1),e(n.canvas)},n.handleRedo=function(){var e=n.props.onConvertToImage;_a.redoTag(),e(n.canvas)},n.handleClear=function(){var e=n.props.onConvertToImage;_a.clearRect(0,0,n.canvas.current.width,n.canvas.current.height),e(n.canvas)},n.handleSizeChange=function(e,t){n.setState((function(e){return{lineOptions:Object(ft.a)({},e.lineOptions,{lineWidth:t})}}))},n.canvas=Object(a.createRef)(),n.isDrawing=!1,n.doUpdateSize=null,n.savedSize={},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.lineOptions.lineWidth;return r.a.createElement(v.a,{container:!0,className:e.paint},r.a.createElement(v.a,{item:!0,className:e.toolbar},r.a.createElement(Va,{onColorSelect:this.handlerColorSelect,onUndo:this.handleUndo,onRedo:this.handleRedo,onClear:this.handleClear,onSizeChange:this.handleSizeChange,lineWidth:t})),r.a.createElement(v.a,{item:!0,className:e.screen},r.a.createElement(H,{k:500/600},r.a.createElement(Ya,{innerRef:this.canvas,init:this.init,updateSize:this.updateSize,saveUpdateSizeFunc:this.saveUpdateSizeFunc}))))}}]),t}(a.PureComponent),xa=Object(Q.a)((function(){return{desk:{position:"relative",width:"100%",height:"100%"},canvas:{},paint:{width:"100%",height:"100%",flexDirection:"column"},toolbar:{},screen:{position:"relative",flexGrow:1,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}}}))(Ra),Ma=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.image;return r.a.createElement(H,{k:500/600},r.a.createElement(D.a,{elevation:5,square:!0,className:t.screen},n&&n.length?r.a.createElement("img",{src:n||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAYAAAByNR6YAAAT1ElEQVR4Xu3WMREAAAgDMerfNCZ+DAI65Bh+5wgQIECAAAECBFKBpWvGCBAgQIAAAQIETmB5AgIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQEFh+gAABAgQIECAQCwisGNQcAQIECBAgQEBg+QECBAgQIECAQCwgsGJQcwQIECBAgAABgeUHCBAgQIAAAQKxgMCKQc0RIECAAAECBASWHyBAgAABAgQIxAICKwY1R4AAAQIECBAQWH6AAAECBAgQIBALCKwY1BwBAgQIECBAQGD5AQIECBAgQIBALCCwYlBzBAgQIECAAAGB5QcIECBAgAABArGAwIpBzREgQIAAAQIEBJYfIECAAAECBAjEAgIrBjVHgAABAgQIEBBYfoAAAQIECBAgEAsIrBjUHAECBAgQIEBAYPkBAgQIECBAgEAsILBiUHMECBAgQIAAAYHlBwgQIECAAAECsYDAikHNESBAgAABAgQElh8gQIAAAQIECMQCAisGNUeAAAECBAgQeJDfAZGJuGy/AAAAAElFTkSuQmCC",className:t.image,alt:"gamehub"}):r.a.createElement(P.a,{className:t.note},"The game is going to start")))}}]),t}(a.PureComponent),Ga=Object(f.b)((function(e){return{image:e.crocodile.room.image}}))(Object(Q.a)((function(){return{screen:{position:"relative",margin:"0 auto",width:"100%",height:"100%"},image:{display:"block",width:"100%",height:"100%"},note:{width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexWrap:"wrap"}}}))(Ma)),Pa=function(e){function t(e){var n;return Object(C.a)(this,t),(n=Object(O.a)(this,Object(j.a)(t).call(this,e))).updateSize=function(){var e=n.props,t=e.updateSize,a=e.resizer;t(a.width,a.height)},n.setInit=function(){var e=n.props,t=e.init,a=e.resizer;t(a.width,a.height),n.isInited=!0},n.isInited=!1,n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.saveUpdateSizeFunc(this.updateSize),setTimeout((function(){e.setInit()}),100)}},{key:"componentDidUpdate",value:function(e,t,n){!this.isInited||e.resizer.width===this.props.resizer.width&&e.resizer.height===this.props.resizer.height||this.updateSize()}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.innerRef;return r.a.createElement(D.a,{elevation:5,square:!0,className:t.desk},r.a.createElement("canvas",{ref:n,className:t.canvas}))}}]),t}(a.PureComponent),Ya=Object(Q.a)((function(){return{desk:{position:"relative",width:"100%",height:"100%",overflow:"hidden"},canvas:{}}}))(Object(a.forwardRef)((function(e,t){return r.a.createElement(Pa,Object.assign({innerRef:t},e))}))),Ha=n(512),La=n(214),Da=n.n(La),Ua=n(215),za=n.n(Ua),Wa=n(216),Ka=n.n(Wa),Fa=[{id:"undo",icon:r.a.createElement(Da.a,null),action:"onUndo"},{id:"redo",icon:r.a.createElement(za.a,null),action:"onRedo"},{id:"clear",icon:r.a.createElement(Ka.a,null),action:"onClear"}],Ja=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(o)))).renderButton=function(){var e=n.props,t=e.classes,a=e.width,o=Object(Tt.b)("xs",a)?"small":"medium";return r.a.createElement(P.a,{className:t.iconButtons},Fa.map((function(e){var a=e.id,i=e.icon,c=e.action;return r.a.createElement(N.a,{key:a,onClick:n.props[c],size:o,className:t.iconButton},i)})))},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.onColorSelect,a=e.onSizeChange,o=e.lineWidth;return r.a.createElement(oe,{variant:"dense",className:t.toolbar},r.a.createElement(Za,{onColorSelect:n,className:t.colorPicker}),r.a.createElement(Ha.a,{value:o,onChange:a,"aria-labelledby":"discrete-slider",valueLabelDisplay:"auto",step:1,marks:!0,min:1,max:100,className:t.sizeSlider}),this.renderButton())}}]),t}(a.PureComponent),Va=Object(Tt.a)()(Object(Q.a)((function(e){var t;return{toolbar:{flexWrap:"wrap"},colorPicker:Object(w.a)({position:"relative"},e.breakpoints.down("xs"),{flexGrow:1}),sizeSlider:(t={flexGrow:1},Object(w.a)(t,e.breakpoints.down("xs"),{order:1}),Object(w.a)(t,e.breakpoints.up("sm"),{width:"auto",marginLeft:e.spacing(2)}),t),iconButtons:{},iconButton:Object(w.a)({},e.breakpoints.down("xs"),{"&:not(:first-child)":{marginLeft:e.spacing(1)}})}}))(Ja)),qa=n(217),$a=["#ffffff","#000075","#ffe119","#3cb44b","#4363d8","#f032e6","#42d4f4","#f58231","#e6beff","#e6194B","#fabebe","#000000"],Xa=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e,t){var a=n.props.onColorSelect;a&&a(e.hex)},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className;return r.a.createElement(P.a,{className:G()(t.color,n)},r.a.createElement(qa.GithubPicker,{width:150,color:$a[0],onChange:this.handleChange,triangle:"hide",colors:$a,className:t.picker}))}}]),t}(a.PureComponent),Za=Object(Q.a)((function(){return{color:{},picker:{background:"transparent !important",border:"none !important",boxShadow:"none !important",padding:"0 !important"}}}))(Xa),er=n(501),tr=n(514),nr=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).state={value:null},n.handleChange=function(e,t){var a=n.props.onClick;n.setState((function(){return{value:t}})),a(t)},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.className,a=this.state.value;return r.a.createElement(v.a,{container:!0,className:G()(t.thumbClicker,n)},r.a.createElement(tr.a,{size:"small",value:a,exclusive:!0,onChange:this.handleChange},r.a.createElement(er.a,{key:1,value:"THUMB_STATUS_LIKE"},r.a.createElement(Oa.a,null)),r.a.createElement(er.a,{key:2,value:"THUMB_STATUS_DISLIKE"},r.a.createElement(Ia.a,null))))}}]),t}(a.PureComponent),ar=Object(Q.a)((function(){return{thumbClicker:{}}}))(nr),rr=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentWillUnmount",value:function(){(0,this.props.resetConfig)()}},{key:"render",value:function(){var e=this.props,t=e.isConnected,n=e.isRoomDefined;return t?r.a.createElement(a.Fragment,null,n?r.a.createElement(ca,null):r.a.createElement(zn,null)):r.a.createElement(a.Fragment,null,"no connect")}}]),t}(a.PureComponent),or=Object(f.b)((function(e){return{isConnected:e.socket.isConnected,isRoomDefined:e.crocodile.room.status}}),(function(e){return{resetConfig:function(){return e({type:"RESET_CONFIG"})}}}))(rr),ir=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return r.a.createElement(ye,null)}}]),t}(a.PureComponent),cr=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return r.a.createElement(or,null)}}]),t}(a.PureComponent),sr={link:"/",label:"Home",page:function(e){return r.a.createElement(Yn,e)}},lr={link:"/tetris",label:"Tetris",name:"Tetris",description:"Classic tetris, that you can play single or with friend.",page:function(e){return r.a.createElement(ae,{header:"Tetris",component:r.a.createElement(ir,e)})}},ur={link:"/crocodile",label:"Crocodile",name:"Crocodile",description:"You can guess the word that painter draws or you can be painter.",page:function(e){return r.a.createElement(ae,{header:"Crocodile",component:r.a.createElement(cr,e)})}},Ar={link:"/tetris/singleplayer",label:"Singleplayer",description:"Play with your own",page:function(e){return r.a.createElement(ae,{header:"Tetris/singleplayer",component:r.a.createElement(st,e)})}},pr={link:"/tetris/multiplayer",label:"Multiplayer",description:"Play vs your friend",page:function(e){return r.a.createElement(ae,{header:"Tetris/multiplayer",component:r.a.createElement(St,e)})}},mr=[sr,lr,ur,Ar,pr],gr=[lr,ur],Er=[Ar,pr],fr=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.location.pathname,a=e.header,o=e.sub_header,i=e.topAction,s=e.topComponent;return r.a.createElement(y.a,{position:"static",color:"primary",className:t.appBar},r.a.createElement(k.a,{className:t.toolbar},n!==sr.link&&r.a.createElement(N.a,{component:c.b,to:sr.link,onClick:i},r.a.createElement(R.a,null)),r.a.createElement(S.a,{variant:"h6",className:t.title},a&&"".concat(a),o&&"/".concat(o)),i&&r.a.createElement(T.a,{variant:"contained",color:"secondary",size:"small",onClick:i},"Leave"),s&&s))}}]),t}(a.PureComponent),hr=Object(f.b)((function(e){var t=e.app;return{header:t.header,sub_header:t.sub_header,topAction:t.topAction,topComponent:t.topComponent}}))(Object(Q.a)((function(e){var t;return{appBar:{},title:{flexGrow:1,overflow:"hidden",textOverflow:"ellipsis",display:"block",width:0},toolbar:(t={},Object(w.a)(t,e.breakpoints.down("sm"),{minHeight:"auto"}),Object(w.a)(t,e.breakpoints.up("sm"),{minHeight:gt}),t)}}))(fr)),dr=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.status;return r.a.createElement(oe,{className:t.footerToolbar},n)}}]),t}(a.PureComponent),br=Object(f.b)((function(e){return{status:(e.crocodile.room||{}).appStatusText}}))(Object(Q.a)((function(e){return{footerToolbar:{textAlign:"center",paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),justifyContent:"center"}}}))(dr));var Cr=function(e){function t(e){var n,a;return Object(C.a)(this,t),(a=Object(O.a)(this,Object(j.a)(t).call(this,e))).doGameFinish=function(){var e=a.props,t=e.isResultModalOpen,n=e.showResults;t||n()},a.doTetrisActionButton=function(e){var t=e.button_action;t&&t in a.props&&a.props[t]()},a.handleSocket=function(e){var t=e.target,n=e.action,r=e.args;t in a.listen_map&&n in a.listen_map[t]&&a.listen_map[t][n](r)},a.socketOnConnect=function(){var e=a.context;(0,a.props.socketConnect)(e.id)},a.socketOnDisconnect=function(){var e=a.context;(0,a.props.socketDisconnect)(e.id)},a.socketOnMessage=function(e){var t=e.message_type,n=e.message;(0,a.props.enqueueSnackbar)(n,{variant:t,autoHideDuration:1500})},a.listen_map=(n={},Object(w.a)(n,"COMMON_ACTIONS",{SOCKET_MESSAGE:a.socketOnMessage}),Object(w.a)(n,"GAME_TETRIS",{ON_GAME:e.updateOpponent,DO_BUTTON_ACTION:a.doTetrisActionButton,DO_GAME_DISCONNECT:e.socketGameDisconnect,DO_GAME_FINISH:a.doGameFinish}),Object(w.a)(n,"GAME_CROCODILE",{LOBBY_UPDATE_CONFIG:e.updateConfigCrocodile,UPDATE_ROOM_LIST:e.updateRoomList,UPDATE_ROOM:e.updateRoom}),n),a}return Object(I.a)(t,e),Object(B.a)(t,[{key:"componentDidMount",value:function(){var e=this.context;e.on("connect",this.socketOnConnect),e.on("disconnect",this.socketOnDisconnect),e.on("SOCKET_CHANNEL",this.handleSocket)}},{key:"componentWillUnmount",value:function(){var e=this.context;e.off("connect",this.socketOnConnect),e.off("disconnect",this.socketOnDisconnect),e.off("SOCKET_CHANNEL",this.handleSocket)}},{key:"render",value:function(){return null}}]),t}(a.PureComponent);Cr.contextType=p;var Br=Object(f.b)((function(e){return{isResultModalOpen:e.tetris.isResultModalOpen}}),(function(e){return{socketConnect:function(t){return e(function(e){return{type:"CONNECT",payload:{id:e}}}(t))},socketDisconnect:function(t){return e(function(e){return{type:"DISCONNECT",payload:{id:e}}}(t))},updateOpponent:function(t){return e(function(e){return{type:"UPDATE_OPPONENT",payload:{opponent:e}}}(t))},resetConfig:function(){return e({type:"RESET_CONFIG"})},showResults:function(){return e({type:"SHOW_RESULTS"})},socketGameReset:function(){return e(bt())},socketGameDisconnect:function(){return e((function(e){e({type:"STOP_GAME"}),e({type:"RESET_CONFIG"})}))},startNewGame:function(){return e({type:"START_NEW_GAME"})},startMoving:function(){return e({type:"START_MOVING"})},stopMoving:function(){return e({type:"STOP_MOVING"})},stopGame:function(){return e({type:"STOP_GAME"})},startNewGameAndMove:function(){return e(Ue())},updateConfigCrocodile:function(t){return e(Ln(t))},updateRoomList:function(t){return e(Dn(t))},updateRoom:function(t){return e(function(e){return{type:"UPDATE_ROOM",payload:{room:e}}}(t))}}}))(Object(A.withSnackbar)(Cr)),Or=function(e){function t(){return Object(C.a)(this,t),Object(O.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(c.a,null,r.a.createElement(Br,null),r.a.createElement(v.a,{container:!0,direction:"column",alignItems:"stretch",justify:"space-between",className:e.layout},r.a.createElement(v.a,{item:!0,className:e.header},r.a.createElement(s.a,{component:function(e){return r.a.createElement(hr,e)}})),r.a.createElement(v.a,{item:!0,className:e.body},r.a.createElement(s.c,null,mr.map((function(e,t){var n=e.link,a=(e.label,e.page);return r.a.createElement(s.a,{key:t,exact:!0,path:n,component:a})})))),r.a.createElement(v.a,{item:!0,className:e.footer},r.a.createElement(br,null))))}}]),t}(a.PureComponent),jr=Object(Q.a)((function(){return{layout:{backgroundColor:"#191922",width:"100%",height:"100%",overflow:"hidden"},header:{backgroundColor:"#121216"},body:{position:"relative",display:"flex",justifyContent:"center",alignItems:"center",flexGrow:1},footer:{backgroundColor:"#121216"}}}))(Or),Ir=Object(a.createContext)(),vr=function(e){function t(){var e,n;Object(C.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(O.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).showSnackbar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=n.props.enqueueSnackbar;a(e,{variant:t,autoHideDuration:2500})},n.validateResponse=function(e,t){e&&e.error?n.showSnackbar(e.error,"error"):t&&"function"===typeof t&&t(e)},n}return Object(I.a)(t,e),Object(B.a)(t,[{key:"render",value:function(){return r.a.createElement(Ir.Provider,{value:this.showSnackbar},r.a.createElement(Ct.Provider,{value:this.validateResponse},r.a.createElement(jr,null)))}}]),t}(a.PureComponent),Qr=Object(A.withSnackbar)(vr),wr={header:null,sub_header:null,topAction:null,topComponent:null};var yr={isConnected:!1,id:null};var kr,Nr={nickname:"",step:"LOBBY_STEP_NICKNAME"},Sr={room:{},rooms:[],config:Object(ft.a)({},Nr)};var Tr=function(e,t){var n=t.table,a=t.figure,r=t.rotation;return!!_r(e,r,t)&&et(n,at(a[r],e))},_r=function(e,t,n){var a=Object(ke.a)(e,2),r=a[0],o=a[1],i=n.figure,c=r+i[t].length,s=o+i[t][0].length;return c<=24&&s<=10},Rr=function(e){return e.table[3].find((function(e){return 1===e}))},xr=function(e,t){var n=t.position,a=Object(ke.a)(n,2),r=a[0],o=a[1],i=Mr(e,t);return i<0?[r,o+i]:[r,o]},Mr=function(e,t){var n=t.position,a=t.table,r=t.figure,o=n[1];return a[0].length-(o+r[e][0].length)},Gr=function(e,t,n){var a=n.table;return!!_r(e,t,n)&&et(a,Pr(n))},Pr=function(e){var t=e.figure,n=e.position,a=e.rotation,r=t[a].length,o=t[a][0].length,i=r>o?r:o;return at(Array.from({length:i},(function(){return Array.from({length:i},(function(){return 1}))})),n)},Yr={nickname:"",type:"TYPE_CLIENT",step:"LOBBY_STEP_NICKNAME"},Hr={table:function(e){var t=[[0,0,1,0,0,0,0,1,0,0],[0,1,1,1,0,0,1,1,1,0],[0,0,1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,1,0,0],[0,0,0,1,0,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];return Ve(t,[e.length-t.length,0],e)}(Je(10,24)),rotation:qe(),rotationNext:qe(),figure:$e(),figureNext:$e(),position:Ne,speed:150,score:0,isPause:!0,isGameRunning:!1,isResultModalOpen:!1,moveAction:null,key_map:null,opponent:null,config:Object(ft.a)({},Yr)},Lr=(kr={},Object(w.a)(kr,Se,(function(e){return function(e){return e.position[1]-1>=0}(e)})),Object(w.a)(kr,Te,(function(e){return function(e){var t=e.position,n=e.rotation,a=e.table,r=e.figure;return t[1]<a[0].length-r[n][0].length}(e)})),kr),Dr=null,Ur=function(e,t){clearInterval(Dr),Dr=setInterval((function(){t.moveAction()}),e)};var zr=Object(h.c)({app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_APP":return Object(ft.a)({},e,{},t.payload);case"CLEAN_APP":return wr;default:return e}},socket:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"CONNECT":return(e=JSON.parse(JSON.stringify(t))).isConnected=!0,e.id=n.payload.id,e;case"DISCONNECT":return yr;default:return t}},crocodile:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"UPDATE_ROOM":e=Object(Fe.cloneDeep)(t);var a=n.payload.room;return e.room=Object(ft.a)({},e.room,{},a,{appStatusText:a.status?Hn[a.status](a):null}),e;case"CLEAN_ROOM":return Object(ft.a)({},Sr,{config:Object(ft.a)({},t.config,{step:"LOBBY_STEP_ROOM_SELECTION"})});case"UPDATE_CONFIG":return Object(ft.a)({},t,{config:Object(ft.a)({},t.config,{},n.payload.config)});case"RESET_CONFIG":return Object(ft.a)({},t,{config:Object(ft.a)({},Nr,{nickname:t.config.nickname})});case"UPDATE_ROOM_LIST":return Object(ft.a)({},t,{rooms:n.payload.rooms});default:return t}},tetris:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Hr,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SPEED":return Object(ft.a)({},e,{speed:t.payload.speed});case"MOVE_FIGURE":var n=t.payload.direction,a=Me[n](e.position);return n in Lr&&!Lr[n](e,t.payload.rotation)?e:Tr(a,e)?Object(ft.a)({},e,{position:a}):e;case"START_NEW_GAME":return clearInterval(Dr),Object(ft.a)({},e,{isResultModalOpen:!1,table:Je(10,24),figure:$e(),figureNext:$e(),position:Ne,rotation:qe(),rotationNext:qe(),score:0,isPause:!1,isGameRunning:!0,speed:150});case"STOP_GAME":return clearInterval(Dr),Object(ft.a)({},Hr,{moveAction:e.moveAction,key_map:e.key_map,config:e.config,opponent:e.opponent});case"START_MOVING":return Ur(e.speed,e),Object(ft.a)({},e,{isPause:!1});case"STOP_MOVING":return clearInterval(Dr),Object(ft.a)({},e,{isPause:!0});case"MOVE_FIGURE_DOWN":var r=Me[Re](e.position);if(Tr(r,e))return Object(ft.a)({},e,{position:r});if(Rr(e))return clearInterval(Dr),Object(ft.a)({},e,{isResultModalOpen:!0,isGameRunning:!1,speed:150});var o=Ve(e.figure[e.rotation],e.position,e.table),i=tt(o),c=e.score+i.length,s=e.speed;return i.length&&(o=nt(o,i),s=rt(c,e.speed)),Ur(s,e),Object(ft.a)({},e,{table:o,score:c,speed:s,figure:e.figureNext,figureNext:$e(),position:Ne,rotation:e.rotationNext,rotationNext:qe()});case"ROTATE_FIGURE":var l=t.payload.getRotation(e.rotation),u=xr(l,e);return Gr(u,l,e)?Object(ft.a)({},e,{position:u,rotation:l}):e;case"STORE_ACTION_DATA":return Object(ft.a)({},e,{moveAction:t.payload.moveFunc,key_map:t.payload.key_map});case"CLOSE_RESULTS":return Object(ft.a)({},e,{isResultModalOpen:!1});case"UPDATE_OPPONENT":return Object(ft.a)({},e,{opponent:Object(ft.a)({},e.opponent,{},t.payload.opponent)});case"UPDATE_CONFIG":return Object(ft.a)({},e,{config:Object(ft.a)({},e.config,{},t.payload.config)});case"RESET_CONFIG":return Object(ft.a)({},e,{opponent:null,config:Object(ft.a)({},Yr,{nickname:e.config.nickname})});case"SHOW_RESULTS":return clearInterval(Dr),Object(ft.a)({},e,{isResultModalOpen:!0,isGameRunning:!1});default:return e}}}),Wr=E()("https://gamehub-server.herokuapp.com/"),Kr=Object(h.d)(zr,Object(h.a)(m.a,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SOCKET_CHANNEL";return function(n){return function(n){return function(a){return a.meta&&"META_SOCKET_EMIT"===a.meta.remote?new Promise((function(n,r){e.emit(t,a,(function(e){n(e)}))})):n(a)}}}}(Wr)));i.a.render(r.a.createElement(c.a,null,r.a.createElement(f.a,{store:Kr},r.a.createElement(u.a,{theme:b},r.a.createElement(A.SnackbarProvider,{maxSnack:3,anchorOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(l.a,null),r.a.createElement(p.Provider,{value:Wr},r.a.createElement(s.a,{component:Qr})))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[228,1,2]]]);
//# sourceMappingURL=main.84aedf0e.chunk.js.map